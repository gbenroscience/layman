let BODY_ID="sys_main",GUIDE_CLASS="guideline",MIN_BIAS=1e-10;const styleSheet=document.createElement("style");styleSheet.setAttribute("type","text/css");let page,projectURL,scriptURL;function isScriptLoaded(t){let e=document.getElementsByTagName("script");for(let i=0;i<e.length;i++)if(e[i].src===t)return!0;return null}function docReady(t){"complete"===document.readyState||"interactive"===document.readyState?t():document.addEventListener("DOMContentLoaded",t)}getUrls(),console.log("projectURL: ",projectURL," , scriptURL: ",scriptURL),Number.isNaN||(Number.isNaN=Number.isNaN||function t(e){return"number"==typeof e&&e!=e}),Number.isInteger||(Number.isInteger=function(t){return+t==+t-+t%1}),Object.constructor.prototype.hasOwnProperty("name")||Object.defineProperty(Object.constructor.prototype,"name",{get:function(){return this.toString().trim().replace(/^\S+\s+(\w+)[\S\s]+$/,"$1")}}),function(t){t.forEach(function(t){!t.hasOwnProperty("remove")&&Object.defineProperty(t,"remove",{configurable:!0,enumerable:!0,writable:!0,value:function t(){this.parentNode&&this.parentNode.removeChild(this)}})})}([Element.prototype,CharacterData.prototype,DocumentType.prototype].filter(Boolean));let onLayoutComplete=function(){},onSourcesLoaded=function(){},layoutCode=function(){return null};function RemoteLayoutData(t){this.path=t,this.rect=[],this.consumed=!1}function Page(t){if(this.rootElement=t,this.viewMap=new Map,this.hideRoot(),this.layoutObj=layoutCode(),this.sourcesLoaded=!0,this.subPages=new Map,this.sources=new Map,this.srcPaths=[],this.popups=new Map,this.sidemenus=new Map,this.leftMenus=[],this.rightMenus=[],this.includes=new Map,!t){let e=new Style("html,body",[]);e.addFromOptions({width:"100%",height:"100%",padding:"0",margin:"0"});let i=new Style("*",[]);i.addFromOptions({margin:"0",padding:"0","box-sizing":"border-box","-webkit-box-sizing":"border-box","-moz-box-sizing":"border-box","overscroll-behavior":"none"});let r=new Style(".abs",[]);r.addStyleElement("position","absolute"),r.addStyleElement("padding","0"),r.addStyleElement("margin","0"),updateOrCreateSelectorInStyleSheet(styleSheet,e),updateOrCreateSelectorInStyleSheet(styleSheet,i),updateOrCreateSelectorInStyleSheet(styleSheet,r);let n=document.body.getAttribute(attrKeys.layout_constraintGuideColor);!n&&this.layoutObj&&this.layoutObj.body&&(n=this.layoutObj.body["data-guide-color"]);let o=new Style("."+GUIDE_CLASS,[]);o.addFromOptions({"background-color":n||"transparent",visibility:n?"visible":"hidden"}),updateOrCreateSelectorInStyleSheet(styleSheet,o)}}function shouldIgnoreNonLayoutNode(t){let e=t.nodeName.toLowerCase();return"meta"===e||"title"===e||"head"==e||"script"==e||"link"==e||"style"==e}function isWhiteSpaceOrCommentNode(t){let e=t.nodeName.toLowerCase();return"#text"===e||"#comment"===e}function isWhiteSpaceCommentStyleOrScriptNode(t){let e=t.nodeName.toLowerCase();return"#text"===e||"#comment"===e||"script"===e||"style"===e}function shouldIgnoreSpecialChildElement(t){let e=t.nodeName.toLowerCase();return"li"===e||"tr"===e||"td"===e||"th"===e||"tbody"===e||"thead"===e||"tfoot"===e||"col"===e||"colgroup"===e||"option"===e||"optgroup"===e||"b"===e||"i"===e||"strong"===e||"u"===e||"caption"===e}function enforceIdOnChildElements(t){let e=null;return!shouldIgnoreSpecialChildElement(t)||(e=t.getAttribute(attrKeys.id))||(e=ULID.ulid(),t.setAttribute(attrKeys.id,e)),e}docReady(function(){(page=new Page(null)).layout()}),Page.prototype.findViewById=function(t){return this.viewMap.get(t)},Page.prototype.layout=function(){this===page&&layoutCode()?this.layoutFromSheet(this.rootElement):this.layoutFromTags(this.rootElement)},Page.prototype.layoutFromSheet=function(t){let e=this,i=t||document.body;if(i===document.body&&(i.id=BODY_ID),t){let r=t.nodeName.toLowerCase();if("script"===r)return;if(!t.id&&!shouldIgnoreSpecialChildElement(t))throw"Please supply the id for node: "+r+", around:\n"+t.outerHTML+". The layout engine needs it."}if(!isWhiteSpaceOrCommentNode(i)){let n=i===document.body?this.layoutObj.body:this.layoutObj.elements[i.id];n?i===document.body&&(n.w="match_parent",n.h="match_parent",n.ss="parent",n.ee="parent",n.tt="parent",n.bb="parent"):(document.body,n={w:"match_parent",h:"match_parent",ss:"parent",ee:"parent",tt:"parent",bb:"parent"});let o=new Map;Object.keys(n).forEach(function(t){let r=n[t];if(o.set(t,r),t===attrKeys.layout_src){e.srcPaths.push(r),e.sourcesLoaded=!1;let s=new RemoteLayoutData(r),l=n[attrKeys.layout_popup],u=n[attrKeys.layout_menuLeft],h=n[attrKeys.layout_menuRight];if(!0===u&&!0===h)throw`Each html element can only take one of ${attrKeys.layout_menuLeft} or ${attrKeys.layout_menuRight} at once...`;!0===u||"true"===u?(e.leftMenus.push(i.id),e.sidemenus.set(i.id,s)):!0===h||"true"===h?(e.rightMenus.push(i.id),e.sidemenus.set(i.id,s)):!0===l||"true"===l?e.popups.set(i.id,s):e.includes.set(i.id,s)}if(t===attrKeys.customType&&"canvas"!==i.nodeName.toLowerCase())throw"Error: the `customType` attribute can only be defined on canvas elements"});let s,l=n[attrKeys.layout_constraintGuide];if(l){if("true"===l||!0===l)o.set(attrKeys.layout_width,sizes.WRAP_CONTENT),o.set(attrKeys.layout_height,sizes.WRAP_CONTENT),s=new Guideline(this,i,o,i.parentNode.id);else throw"Invalid value for guide"}else enforceIdOnChildElements(i),s=i===document.body?new View(this,i,o,void 0):new View(this,i,o,i.parentNode.id);if(i.hasChildNodes()){let u=i.children;for(let h=0;h<u.length;h++){let c=u[h];if(!isWhiteSpaceCommentStyleOrScriptNode(c)){if(!shouldIgnoreSpecialChildElement(c)){let p=c.getAttribute(attrKeys.id);s.childrenIds.push(p)}this.layoutFromSheet(c)}}}s&&!0===s.topLevel&&((this.buildUI(s),this.showRoot(),e.srcPaths.length>0)?BuildBridgedWorker(workerCode,["loadAll"],["layoutLoaded","layoutError"],[layoutLoaded,layoutError]).loadAll(projectURL,e.srcPaths):(e.sourcesLoaded=!0,onLayoutComplete()))}},Page.prototype.layoutFromTags=function(t){let e=this,i=t||document.body;if(i===document.body&&(i.id=BODY_ID),t){let r=t.nodeName.toLowerCase();if("script"===r)return;if(!t.id&&!shouldIgnoreSpecialChildElement(t))throw"Please supply the id for node: "+r+", around:\n"+t.outerHTML+". The layout engine needs it."}if(!isWhiteSpaceOrCommentNode(i)){let n=i.getAttribute(attrKeys.layout_constraint);i.removeAttribute(attrKeys.layout_constraint),n||(document.body,n="w:match_parent;h:match_parent;ss:parent;ee:parent;tt:parent;bb:parent"),endsWith(n=n.trim(),";")&&(n=n.substring(0,n.length-1)),n=(n=(n=n.replace(/\s*?(;)\s*/g,";")).replace(/\s*?(:)\s*/g,":")).split(";");let o=new Map,s=!1,l=!1,u=!1,h=null;for(let c=0;c<n.length;c++){let p=n[c],d;if(-1!==(d=p.indexOf(":"))){let f=p.substring(0,d),y=p.substring(d+1);switch(o.set(f,y),f===attrKeys.layout_src&&(e.srcPaths.push(y),e.sourcesLoaded=!1,h=y),f){case attrKeys.layout_popup:s=!0===y||"true"===y;break;case attrKeys.layout_menuLeft:l=!0===y||"true"===y;break;case attrKeys.layout_menuRight:u=!0===y||"true"===y}if(l&&u)throw`Each html element can only take one of ${attrKeys.layout_menuLeft} or ${attrKeys.layout_menuRight} at once...`;if(f===attrKeys.customType&&"canvas"!==i.nodeName.toLowerCase())throw"Error: the `customType` attribute can only be defined on canvas elements"}else throw"invalid constraint definition... no colon found in "+p+" on "+i.id}if(h){let g=new RemoteLayoutData(h);!0===s?e.popups.set(i.id,g):!0===l?(e.leftMenus.push(i.id),e.sidemenus.set(i.id,g)):!0===u?(e.rightMenus.push(i.id),e.sidemenus.set(i.id,g)):e.includes.set(i.id,g)}let m,v=i.getAttribute(attrKeys.layout_constraintGuide);if(v){if("true"===v)o.set(attrKeys.layout_width,sizes.WRAP_CONTENT),o.set(attrKeys.layout_height,sizes.WRAP_CONTENT),m=new Guideline(this,i,o,i.parentNode.id);else throw"Invalid value for data-guide"}else enforceIdOnChildElements(i),m=i===document.body?new View(this,i,o,void 0):new View(this,i,o,i.parentNode.id);if(i.hasChildNodes()){let $=i.children;for(let _=0;_<$.length;_++){let E=$[_];if(!isWhiteSpaceCommentStyleOrScriptNode(E)){if(!shouldIgnoreSpecialChildElement(E)){let A=E.getAttribute(attrKeys.id);m.childrenIds.push(A)}this.layoutFromTags(E)}}}m&&!0===m.topLevel&&((this.buildUI(m),this.showRoot(),e.srcPaths.length>0)?BuildBridgedWorker(workerCode,["loadAll"],["layoutLoaded","layoutError"],[layoutLoaded,layoutError]).loadAll(projectURL,e.srcPaths):(e.sourcesLoaded=!0,onLayoutComplete()))}},Page.prototype.buildUI=function(t){let e=[],i=[],r=[],n=function(t,o){t.childrenIds.length>0&&(autoLayout(t.htmlNode===document.body?void 0:t.htmlNode,t.layoutChildren(o)),t.childrenIds.forEach(function(t){let s=o.viewMap.get(t);s.isPopup()&&i.push(s),s.isSideMenu()&&r.push(s),s.hasBgImage&&e.push(s),s.childrenIds.length>0&&n(s,o)}))};n(t,this),e.forEach(function(t){t.makeBgImage()});let o=this;i.forEach(function(t){let e=o.popups.get(t.id);e.rect=t.htmlNode.getBoundingClientRect(),o.popups.set(t.id,e),t.htmlNode.remove()}),r.forEach(function(t){let e=o.sidemenus.get(t.id);e.rect=t.htmlNode.getBoundingClientRect(),o.sidemenus.set(t.id,e),t.htmlNode.remove()})},Page.prototype.showRoot=function(){this.rootElement&&this.rootElement!==document.body?this.rootElement.style.visibility="visible":document.body.style.visibility="visible"},Page.prototype.hideRoot=function(){this.rootElement&&this.rootElement!==document.body?this.rootElement.style.visibility="hidden":document.body.style.visibility="hidden"},Page.prototype.openSideMenu=function(t,e,i,r){if(4!==arguments.length)throw"`Page.openSideMenu` function requires 4 arguments";if("string"!=typeof t)throw"`menuId` must be a string";if("boolean"!=typeof e)throw"`closeOnClickOutSide` must be  a boolean";if("function"!=typeof i)throw"onOpen must be a function";if("function"!=typeof r)throw"onClose must be a function";let n=this.sidemenus.get(t),o=-1!==this.leftMenus.indexOf(t),s=-1!==this.rightMenus.indexOf(t),l=o?SideMenuTypes.LEFT:s?SideMenuTypes.RIGHT:null;if(!l)throw"Invalid menutype found";let u=this.sources.get(n.path),h=n.rect;if(!h||!h.width||!h.height)throw"specify width or height on popup: "+popupId;return new SideMenuX({id:t,layout:u,width:h.width,onOpen:i,onClose:r,menuType:l,closeOnClickOutside:"boolean"==typeof e&&e,bg:"#fff"}).open()},Page.prototype.initSideMenu=function(t,e,i,r){if(4!==arguments.length)throw"`Page.openSideMenu` function requires 4 arguments";if("string"!=typeof t)throw"`menuId` must be a string";if("boolean"!=typeof e)throw"`closeOnClickOutSide` must be  a boolean";if("function"!=typeof i)throw"onOpen must be a function";if("function"!=typeof r)throw"onClose must be a function";let n=this.sidemenus.get(t),o=-1!==this.leftMenus.indexOf(t),s=-1!==this.rightMenus.indexOf(t),l=o?SideMenuTypes.LEFT:s?SideMenuTypes.RIGHT:null;if(!l)throw"Invalid menutype found";let u=this.sources.get(n.path),h=n.rect;if(!h||!h.width||!h.height)throw"specify width or height on popup: "+popupId;return new SideMenuX({id:t,layout:u,width:h.width,onOpen:i,onClose:r,menuType:l,closeOnClickOutside:"boolean"==typeof e&&e,bg:"#fff"}).build()},Page.prototype.openPopup=function(t,e,i,r){if(4!==arguments.length)throw"`Page.openPopup` function requires 4 arguments";if("string"!=typeof t)throw"`popupId` must be a string";if("boolean"!=typeof e)throw"`closeOnClickOutSide` must be  a boolean";if("function"!=typeof i)throw"onOpen must be a function";if("function"!=typeof r)throw"onClose must be a function";let n=this.popups.get(t),o=this.sources.get(n.path),s=n.rect;if(!s||!s.width||!s.height)throw"specify width or height on popup: "+t;return new Popup({id:t,layout:o,width:s.width,height:s.height,closeOnClickOutside:"boolean"==typeof e&&e,bg:"#fff",onOpen:i,onClose:r}).open()},Page.prototype.closePopup=function(t){t.hide()},Page.prototype.renderInclude=function(t,e){let i=this.includes.get(t).path,r=e||this.sources.get(i),n=document.getElementById(t);n.innerHTML=r;let o=new Page(n);o.layout(),this.subPages.set(t,o)};var workerCode=function(){var t,e,i;function r(t,e){!function t(e,i,r){if(Array.isArray(i)){if(r<i.length){var n=i[r];!function t(e,i,r){let n=new URL(i,e);fetch(n,{credentials:"same-origin"}).then(function(t){return t}).then(function(t){return t.text()}).then(function(t){r(t)}).catch(function(t){setTimeout(function(){throw main.layoutError(t),t})})}(e,n,function(o){main.layoutLoaded(n,o,!1),t(e,i,r+1)})}else main.layoutLoaded(null,"",!0)}else main.layoutError(Error("Pass an array of filepaths here"))}(t,e,0)}t=function(){"use strict";function t(t){var e=this.constructor;return this.then(function(i){return e.resolve(t()).then(function(){return i})},function(i){return e.resolve(t()).then(function(){return e.reject(i)})})}function e(t){return new this(function(e,i){function r(t,i){if(i&&("object"==typeof i||"function"==typeof i)){var s=i.then;if("function"==typeof s)return void s.call(i,function(e){r(t,e)},function(i){n[t]={status:"rejected",reason:i},0==--o&&e(n)})}n[t]={status:"fulfilled",value:i},0==--o&&e(n)}if(!t||void 0===t.length)return i(TypeError(typeof t+" "+t+" is not iterable(cannot read property Symbol(Symbol.iterator))"));var n=Array.prototype.slice.call(t);if(0===n.length)return e([]);for(var o=n.length,s=0;n.length>s;s++)r(s,n[s])})}function i(t){return!(!t||void 0===t.length)}function r(){}function n(t){if(!(this instanceof n))throw TypeError("Promises must be constructed via new");if("function"!=typeof t)throw TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],h(t,this)}function o(t,e){for(;3===t._state;)t=t._value;0!==t._state?(t._handled=!0,n._immediateFn(function(){var i,r=1===t._state?e.onFulfilled:e.onRejected;if(null!==r){try{i=r(t._value)}catch(n){return void l(e.promise,n)}s(e.promise,i)}else(1===t._state?s:l)(e.promise,t._value)})):t._deferreds.push(e)}function s(t,e){try{if(e===t)throw TypeError("A promise cannot be resolved with itself.");if(e&&("object"==typeof e||"function"==typeof e)){var i,r,o=e.then;if(e instanceof n)return t._state=3,t._value=e,void u(t);if("function"==typeof o)return void h((i=o,r=e,function(){i.apply(r,arguments)}),t)}t._state=1,t._value=e,u(t)}catch(s){l(t,s)}}function l(t,e){t._state=2,t._value=e,u(t)}function u(t){2===t._state&&0===t._deferreds.length&&n._immediateFn(function(){t._handled||n._unhandledRejectionFn(t._value)});for(var e=0,i=t._deferreds.length;i>e;e++)o(t,t._deferreds[e]);t._deferreds=null}function h(t,e){var i=!1;try{t(function(t){i||(i=!0,s(e,t))},function(t){i||(i=!0,l(e,t))})}catch(r){if(i)return;i=!0,l(e,r)}}var c=setTimeout;n.prototype.catch=function(t){return this.then(null,t)},n.prototype.then=function(t,e){var i=new this.constructor(r);return o(this,new function(t,e,i){this.onFulfilled="function"==typeof t?t:null,this.onRejected="function"==typeof e?e:null,this.promise=i}(t,e,i)),i},n.prototype.finally=t,n.all=function(t){return new n(function(e,r){function n(t,i){try{if(i&&("object"==typeof i||"function"==typeof i)){var l=i.then;if("function"==typeof l)return void l.call(i,function(e){n(t,e)},r)}o[t]=i,0==--s&&e(o)}catch(u){r(u)}}if(!i(t))return r(TypeError("Promise.all accepts an array"));var o=Array.prototype.slice.call(t);if(0===o.length)return e([]);for(var s=o.length,l=0;o.length>l;l++)n(l,o[l])})},n.allSettled=e,n.resolve=function(t){return t&&"object"==typeof t&&t.constructor===n?t:new n(function(e){e(t)})},n.reject=function(t){return new n(function(e,i){i(t)})},n.race=function(t){return new n(function(e,r){if(!i(t))return r(TypeError("Promise.race accepts an array"));for(var o=0,s=t.length;s>o;o++)n.resolve(t[o]).then(e,r)})},n._immediateFn="function"==typeof setImmediate&&function(t){setImmediate(t)}||function(t){c(t,0)},n._unhandledRejectionFn=function(t){void 0!==console&&console&&console.warn("Possible Unhandled Promise Rejection:",t)};var p=function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if("undefined"!=typeof global)return global;throw Error("unable to locate global object")}();"function"!=typeof p.Promise?p.Promise=n:(p.Promise.prototype.finally||(p.Promise.prototype.finally=t),p.Promise.allSettled||(p.Promise.allSettled=e))},"object"==typeof exports&&"undefined"!=typeof module?t():"function"==typeof define&&define.amd?define(t):t(),e=this,i=function(t){"use strict";var e="undefined"!=typeof self&&self||void 0!==e&&e,i={searchParams:"URLSearchParams"in e,iterable:"Symbol"in e&&"iterator"in Symbol,blob:"FileReader"in e&&"Blob"in e&&function(){try{return new Blob,!0}catch(t){return!1}}(),formData:"FormData"in e,arrayBuffer:"ArrayBuffer"in e};if(i.arrayBuffer)var r=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],n=ArrayBuffer.isView||function(t){return t&&r.indexOf(Object.prototype.toString.call(t))>-1};function o(t){if("string"!=typeof t&&(t=String(t)),/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(t)||""===t)throw TypeError("Invalid character in header field name");return t.toLowerCase()}function s(t){return"string"!=typeof t&&(t=String(t)),t}function l(t){var e={next:function(){var e=t.shift();return{done:void 0===e,value:e}}};return i.iterable&&(e[Symbol.iterator]=function(){return e}),e}function u(t){this.map={},t instanceof u?t.forEach(function(t,e){this.append(e,t)},this):Array.isArray(t)?t.forEach(function(t){this.append(t[0],t[1])},this):t&&Object.getOwnPropertyNames(t).forEach(function(e){this.append(e,t[e])},this)}function h(t){if(t.bodyUsed)return Promise.reject(TypeError("Already read"));t.bodyUsed=!0}function c(t){return new Promise(function(e,i){t.onload=function(){e(t.result)},t.onerror=function(){i(t.error)}})}function p(t){var e=new FileReader,i=c(e);return e.readAsArrayBuffer(t),i}function d(t){if(t.slice)return t.slice(0);var e=new Uint8Array(t.byteLength);return e.set(new Uint8Array(t)),e.buffer}function f(){return this.bodyUsed=!1,this._initBody=function(t){if(this.bodyUsed=this.bodyUsed,this._bodyInit=t,t){if("string"==typeof t)this._bodyText=t;else if(i.blob&&Blob.prototype.isPrototypeOf(t))this._bodyBlob=t;else if(i.formData&&FormData.prototype.isPrototypeOf(t))this._bodyFormData=t;else if(i.searchParams&&URLSearchParams.prototype.isPrototypeOf(t))this._bodyText=t.toString();else{var e;i.arrayBuffer&&i.blob&&(e=t)&&DataView.prototype.isPrototypeOf(e)?(this._bodyArrayBuffer=d(t.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):i.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(t)||n(t))?this._bodyArrayBuffer=d(t):this._bodyText=t=Object.prototype.toString.call(t)}}else this._bodyText="";!this.headers.get("content-type")&&("string"==typeof t?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):i.searchParams&&URLSearchParams.prototype.isPrototypeOf(t)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},i.blob&&(this.blob=function(){var t=h(this);if(t)return t;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(!this._bodyFormData)return Promise.resolve(new Blob([this._bodyText]));throw Error("could not read FormData body as blob")},this.arrayBuffer=function(){if(!this._bodyArrayBuffer)return this.blob().then(p);var t=h(this);return t||(ArrayBuffer.isView(this._bodyArrayBuffer)?Promise.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset,this._bodyArrayBuffer.byteOffset+this._bodyArrayBuffer.byteLength)):Promise.resolve(this._bodyArrayBuffer))}),this.text=function(){var t,e,i,r=h(this);if(r)return r;if(this._bodyBlob)return t=this._bodyBlob,e=new FileReader,i=c(e),e.readAsText(t),i;if(this._bodyArrayBuffer)return Promise.resolve(function t(e){for(var i=new Uint8Array(e),r=Array(i.length),n=0;n<i.length;n++)r[n]=String.fromCharCode(i[n]);return r.join("")}(this._bodyArrayBuffer));if(!this._bodyFormData)return Promise.resolve(this._bodyText);throw Error("could not read FormData body as text")},i.formData&&(this.formData=function(){return this.text().then(m)}),this.json=function(){return this.text().then(JSON.parse)},this}u.prototype.append=function(t,e){t=o(t),e=s(e);var i=this.map[t];this.map[t]=i?i+", "+e:e},u.prototype.delete=function(t){delete this.map[o(t)]},u.prototype.get=function(t){return t=o(t),this.has(t)?this.map[t]:null},u.prototype.has=function(t){return this.map.hasOwnProperty(o(t))},u.prototype.set=function(t,e){this.map[o(t)]=s(e)},u.prototype.forEach=function(t,e){for(var i in this.map)this.map.hasOwnProperty(i)&&t.call(e,this.map[i],i,this)},u.prototype.keys=function(){var t=[];return this.forEach(function(e,i){t.push(i)}),l(t)},u.prototype.values=function(){var t=[];return this.forEach(function(e){t.push(e)}),l(t)},u.prototype.entries=function(){var t=[];return this.forEach(function(e,i){t.push([i,e])}),l(t)},i.iterable&&(u.prototype[Symbol.iterator]=u.prototype.entries);var y=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function g(t,e){if(!(this instanceof g))throw TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');var i,r,n=(e=e||{}).body;if(t instanceof g){if(t.bodyUsed)throw TypeError("Already read");this.url=t.url,this.credentials=t.credentials,e.headers||(this.headers=new u(t.headers)),this.method=t.method,this.mode=t.mode,this.signal=t.signal,n||null==t._bodyInit||(n=t._bodyInit,t.bodyUsed=!0)}else this.url=String(t);if(this.credentials=e.credentials||this.credentials||"same-origin",(e.headers||!this.headers)&&(this.headers=new u(e.headers)),this.method=(r=(i=e.method||this.method||"GET").toUpperCase(),y.indexOf(r)>-1?r:i),this.mode=e.mode||this.mode||null,this.signal=e.signal||this.signal,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&n)throw TypeError("Body not allowed for GET or HEAD requests");if(this._initBody(n),("GET"===this.method||"HEAD"===this.method)&&("no-store"===e.cache||"no-cache"===e.cache)){var o=/([?&])_=[^&]*/;o.test(this.url)?this.url=this.url.replace(o,"$1_="+new Date().getTime()):this.url+=(/\?/.test(this.url)?"&":"?")+"_="+new Date().getTime()}}function m(t){var e=new FormData;return t.trim().split("&").forEach(function(t){if(t){var i=t.split("="),r=i.shift().replace(/\+/g," "),n=i.join("=").replace(/\+/g," ");e.append(decodeURIComponent(r),decodeURIComponent(n))}}),e}function v(t,e){if(!(this instanceof v))throw TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');e||(e={}),this.type="default",this.status=void 0===e.status?200:e.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in e?e.statusText:"",this.headers=new u(e.headers),this.url=e.url||"",this._initBody(t)}g.prototype.clone=function(){return new g(this,{body:this._bodyInit})},f.call(g.prototype),f.call(v.prototype),v.prototype.clone=function(){return new v(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new u(this.headers),url:this.url})},v.error=function(){var t=new v(null,{status:0,statusText:""});return t.type="error",t};var $=[301,302,303,307,308];v.redirect=function(t,e){if(-1===$.indexOf(e))throw RangeError("Invalid status code");return new v(null,{status:e,headers:{location:t}})},t.DOMException=e.DOMException;try{new t.DOMException}catch(_){t.DOMException=function(t,e){this.message=t,this.name=e;var i=Error(t);this.stack=i.stack},t.DOMException.prototype=Object.create(Error.prototype),t.DOMException.prototype.constructor=t.DOMException}function E(r,n){return new Promise(function(o,l){var h=new g(r,n);if(h.signal&&h.signal.aborted)return l(new t.DOMException("Aborted","AbortError"));var c=new XMLHttpRequest;function p(){c.abort()}c.onload=function(){var t,e,i={status:c.status,statusText:c.statusText,headers:(t=c.getAllResponseHeaders()||"",e=new u,t.replace(/\r?\n[\t ]+/g," ").split(/\r?\n/).forEach(function(t){var i=t.split(":"),r=i.shift().trim();if(r){var n=i.join(":").trim();e.append(r,n)}}),e)};i.url="responseURL"in c?c.responseURL:i.headers.get("X-Request-URL");var r="response"in c?c.response:c.responseText;setTimeout(function(){o(new v(r,i))},0)},c.onerror=function(){setTimeout(function(){l(TypeError("Network request failed"))},0)},c.ontimeout=function(){setTimeout(function(){l(TypeError("Network request failed"))},0)},c.onabort=function(){setTimeout(function(){l(new t.DOMException("Aborted","AbortError"))},0)},c.open(h.method,function t(i){try{return""===i&&e.location.href?e.location.href:i}catch(r){return i}}(h.url),!0),"include"===h.credentials?c.withCredentials=!0:"omit"===h.credentials&&(c.withCredentials=!1),"responseType"in c&&(i.blob?c.responseType="blob":i.arrayBuffer&&h.headers.get("Content-Type")&&-1!==h.headers.get("Content-Type").indexOf("application/octet-stream")&&(c.responseType="arraybuffer")),!n||"object"!=typeof n.headers||n.headers instanceof u?h.headers.forEach(function(t,e){c.setRequestHeader(e,t)}):Object.getOwnPropertyNames(n.headers).forEach(function(t){c.setRequestHeader(t,s(n.headers[t]))}),h.signal&&(h.signal.addEventListener("abort",p),c.onreadystatechange=function(){4===c.readyState&&h.signal.removeEventListener("abort",p)}),c.send(void 0===h._bodyInit?null:h._bodyInit)})}E.polyfill=!0,e.fetch||(e.fetch=E,e.Headers=u,e.Request=g,e.Response=v),t.Headers=u,t.Request=g,t.Response=v,t.fetch=E,Object.defineProperty(t,"__esModule",{value:!0})},"object"==typeof exports&&"undefined"!=typeof module?i(exports):"function"==typeof define&&define.amd?define(["exports"],i):i(e.WHATWGFetch={})},layoutLoaded=function(t,e,i){page.sources.set(t,e),i&&(page.sourcesLoaded=i,onSourcesLoaded()),page.includes.forEach(function(i,r){!1===i.consumed&&i.path===t&&(page.renderInclude(r,e),i.consumed=!0)}),i&&onLayoutComplete()},layoutError=function(t){throw t};function layoutRootOnBindingElement(t,e){if("string"!=typeof t&&t)throw"Invalid bindingElemId...bindingElemId: "+t;if("string"!=typeof e||0===e.length)throw"Invalid rootChildId";return[{view1:e,attr1:"centerX",relation:"equ",view2:t,attr2:"centerX",constant:0,multiplier:1,priority:AutoLayout.Priority.REQUIRED},{view1:e,attr1:"centerY",relation:"equ",view2:t,attr2:"centerY",constant:0,multiplier:1,priority:AutoLayout.Priority.REQUIRED},{view1:e,attr1:"width",relation:"equ",view2:t,attr2:"width",constant:0,multiplier:1,priority:AutoLayout.Priority.REQUIRED},{view1:e,attr1:"height",relation:"equ",view2:t,attr2:"height",constant:0,multiplier:1,priority:AutoLayout.Priority.REQUIRED}]}function autoLayout(t,e){let i=e&&isOneDimArray(e)&&e.length>0&&"string"==typeof e[0],r=e&&isOneDimArray(e)&&(e.length>0&&"object"==typeof e[0]||0===e.length),n=window.AutoLayout,o=new n.View;if(!0===i)o.addConstraints(n.VisualFormat.parse(e,{extended:!0}));else if(r)o.addConstraints(e);else throw"Invalid parameters passed to autoLayout! no layout constraints specified";let s={};for(let l in o.subViews){let u=document.getElementById(l);u&&(addClass(u,"abs"),s[l]=u)}var h=function(){if(t){let e=t.scrollWidth>t.clientWidth,i=t.scrollHeight>t.clientHeight?window.innerWidth-getScrollBarWidth():window.innerWidth,r=e?window.innerHeight-getScrollBarWidth():window.innerHeight;o.setSize(t?t.clientWidth:i,t?t.clientHeight:r-1)}else o.setSize(t?t.clientWidth:window.innerWidth,t?t.clientHeight:window.innerHeight-1);for(let n in o.subViews){var l=o.subViews[n];let u=s[n];u&&setAbsoluteSizeAndPosition(u,l.left,l.top,l.width,l.height)}};if(window.addEventListener("resize",h),!t){let c=document.body.children;for(let p=0;p<c.length;p++){let d=c[p];new ResizeSensor(d,function(){d&&(d.scrollHeight>d.clientHeight||d.scrollWidth>d.clientWidth)&&h()})}}return h(),h}let transformAttr="transform"in document.documentElement.style?"transform":void 0;function setAbsoluteSizeAndPosition(t,e,i,r,n){t.setAttribute("style","width: "+r+"px; height: "+n+"px; "+transformAttr+": translate3d("+e+"px, "+i+"px, 0px);")}function View(t,e,i,r){let n=e.id;if(null==n||""===n)throw"Please specify the view id properly";if(void 0!==t.findViewById(n))throw"A view with this id(`"+n+"`) exists already";if(this.htmlNode=e,this.topLevel=0===t.viewMap.size||!r,this.id=n,this.parentId=r,this.childrenIds=[],this.hasBgImage=!!i.get(attrKeys.mi_useAutoBg),i&&i.size>0){let o=i.get(attrKeys.layout_margin),s=i.get(attrKeys.layout_marginHorizontal),l=i.get(attrKeys.layout_marginVertical);if(this.margins={top:i.get(attrKeys.layout_marginTop),bottom:i.get(attrKeys.layout_marginBottom),start:i.get(attrKeys.layout_marginStart),end:i.get(attrKeys.layout_marginEnd),horUnitsSame:!0,verUnitsSame:!0,horMarginDiff:function(){let t=parseNumberAndUnitsNoValidation(this.start,!0),e=parseNumberAndUnitsNoValidation(this.end,!0);if(!this.horUnitsSame)throw"start and end margins must be same when using `cx, scx, cxs` etc.";return parseFloat(t.number)-parseFloat(e.number)+t.units},verMarginDiff:function(){let t=parseNumberAndUnitsNoValidation(this.top,!0),e=parseNumberAndUnitsNoValidation(this.bottom,!0);if(!this.verUnitsSame)throw"top and bottom margins must be same when using `cy, tcy, cyt` etc.";return parseFloat(t.number)-parseFloat(e.number)+t.units}},l){if(isNumber(parseInt(l)))this.margins.top=l,this.margins.bottom=l;else throw Error("Invalid value specified for the vertical margin on "+this.constructor.name+"("+this.id+")")}if(s){if(isNumber(parseInt(s)))this.margins.start=s,this.margins.end=s;else throw Error("Invalid value specified for the horizontal margin on "+this.constructor.name+"("+this.id+")")}if(o){if(isNumber(parseInt(o)))this.margins.top=o,this.margins.bottom=o,this.margins.start=o,this.margins.end=o;else throw Error("Invalid value specified for the margins on "+this.constructor.name+"("+this.id+")")}this.margins.top&&startsWith(this.margins.top,"+")&&(this.margins.top=this.margins.top.substr(1)),this.margins.bottom&&startsWith(this.margins.bottom,"+")&&(this.margins.bottom=this.margins.bottom.substr(1)),this.margins.start&&startsWith(this.margins.start,"+")&&(this.margins.start=this.margins.start.substr(1)),this.margins.end&&startsWith(this.margins.end,"+")&&(this.margins.end=this.margins.end.substr(1)),this.margins.start&&"0"!==this.margins.start||(this.margins.start=0),this.margins.end&&"0"!==this.margins.end||(this.margins.end=0),this.margins.top&&"0"!==this.margins.top||(this.margins.top=0),this.margins.bottom&&"0"!==this.margins.bottom||(this.margins.bottom=0);enforceSameUnitsOnMargins:{let u=parseNumberAndUnitsNoValidation(this.margins.start,!0),h=parseNumberAndUnitsNoValidation(this.margins.end,!0),c=parseNumberAndUnitsNoValidation(this.margins.top,!0),p=parseNumberAndUnitsNoValidation(this.margins.bottom,!0),d=i.get(attrKeys.layout_marginStart),f=i.get(attrKeys.layout_marginEnd),y=i.get(attrKeys.layout_marginTop),g=i.get(attrKeys.layout_marginBottom);d&&f&&u.units!==h.units&&0!==parseInt(u.number)&&0!==parseInt(h.number)&&(this.margins.horUnitsSame=!1),y&&g&&c.units!==p.units&&0!==parseInt(c.number)&&0!==parseInt(p.number)&&(this.margins.verUnitsSame=!1),d&&!f&&(this.margins.end="0"+u.units),f&&!d&&(this.margins.start="0"+h.units),y&&!g&&(this.margins.bottom="0"+c.units),g&&!y&&(this.margins.top="0"+p.units)}this.width=i.get(attrKeys.layout_width),this.height=i.get(attrKeys.layout_height),this.width===sizes.MATCH_PARENT&&(this.width="100%"),this.height===sizes.MATCH_PARENT&&(this.height="100%");changePxToUnitLess:endsWith(this.width,"px")&&(this.width=parseFloat(this.width)),endsWith(this.height,"px")&&(this.height=parseFloat(this.height));this.dimRatio=-1,this.wrapWidth=-1,this.wrapHeight=-1;let m=Error();if(void 0===this.width||null===this.width||""===this.width)throw m.name="UnspecifiedWidthError",m.message="Please specify the width for '"+this.id+"'",m;if(void 0===this.height||null===this.height||""===this.height)throw m.name="UnspecifiedHeightError",m.message="Please specify the height for '"+this.id+"'",m;let v=this;i.forEach(function(t,e,r){switch(e){case attrKeys.layout:i.set(attrKeys.layout,t);break;case attrKeys.layout_width:isNaN(parseInt(e))&&i.set(attrKeys.layout_width,t);break;case attrKeys.layout_height:isNaN(parseInt(e))&&i.set(attrKeys.layout_height,t);break;case attrKeys.layout_maxWidth:isNaN(parseInt(e))&&i.set(attrKeys.layout_maxWidth,t);break;case attrKeys.layout_maxHeight:isNaN(parseInt(e))&&i.set(attrKeys.layout_maxHeight,t);break;case attrKeys.layout_minWidth:isNaN(parseInt(e))&&i.set(attrKeys.layout_minWidth,t);break;case attrKeys.layout_minHeight:isNaN(parseInt(e))&&i.set(attrKeys.layout_minHeight,t);break;case attrKeys.dimension_ratio:if(isNumber(t))this.dimRatio=parseFloat(t),i.set(attrKeys.dimension_ratio,v.dimRatio);else if(!0===isDimensionRatio(t)){let n=t.split(":"),o=parseFloat(n[0]),s=parseFloat(n[1]);if(o<=0)throw Error("Bad ratio specified! LHS can neither be 0 nor less than 0");if(s<=0)throw Error("Bad ratio specified! RHS can neither be 0 nor less than 0");v.dimRatio=o/s,i.set(attrKeys.dimension_ratio,v.dimRatio)}else throw Error("Invalid dimension ratio specified on view with id: "+v.id)}})}if(this.refIds=i,!this.id)throw"Your view must have an id!";if("string"!=typeof this.id)throw"The view id must be a string!";if(0===this.id.trim().length)throw"The view id cannot be an empty string!";let $=e.getBoundingClientRect();this.width===sizes.WRAP_CONTENT&&(this.width=this.wrapWidth=$.width),this.height===sizes.WRAP_CONTENT&&(this.height=this.wrapHeight=$.height),t.viewMap.set(this.id,this)}function isDimensionRatio(t){if(!isNaN(t))return t+=":1",!0;let e=0;for(let i=0;i<t.length;i++)if(":"===t.substring(i,i+1)&&++e>1)return!1;if(0===e||e>1)return!1;let r=t.split(":");return 2===r.length&&!isNaN(r[0])&&!isNaN(r[1])}function quickScan(t,e){let i=t+"";i=(i=i.replace(".width","%width")).replace(".height","%height");let r=new Scanner(i,!0,["*","+","%","-"]).scan();if(e&&!0===e)return r;let n=r.indexOf("%");return -1!==n&&(r[n]="."),r}function isHTMLTagName(t){if("string"==typeof t){let e="a b u i body head header h1 h2 h3 h4 h5 h6 style title div p span button checkbox radio input label textarea select legend ul ol li link table tbody thead tfoot tr td th option optgroup video meta img hr picture pre script section small strong noscript object canvas caption blockquote article audio time var cite code iframe nav noframes menu br".split(" ");return e.indexOf(t.trim().toLowerCase())>-1}return!1}function getSignedValue(t){if(void 0===t)return"+0.0";if("string"==typeof t){let e=parseInt(t);return isNaN(e)?"+0.0":e>=0?"+"+e:""+e}if("number"==typeof t)return t>0?"+"+t:"-"+t}function Guideline(t,e,i,r){View.call(this,t,e,i,r);let n=i.get(attrKeys.layout_width),o=i.get(attrKeys.layout_height);n!==sizes.WRAP_CONTENT&&this.refIds.set(attrKeys.layout_width,sizes.WRAP_CONTENT),o!==sizes.WRAP_CONTENT&&this.refIds.set(attrKeys.layout_height,sizes.WRAP_CONTENT),addClass(e,GUIDE_CLASS)}function IncludedView(t,e,i,r){View.call(this,t,e,i,r);let n=e.getAttribute(attrKeys.layout);if(!n||"string"!=typeof n)throw"An included layout must be the name of a valid xml file in the `"+PATH_TO_LAYOUTS_FOLDER+"` folder";let o=n.length;".xml"!==n.substring(o-4)&&(n+=".xml"),new Parser(t,n,this.id)}function is2DArray(t){if("[object Array]"===Object.prototype.toString.call(t)){for(let e=0;e<t.length;e++)if("[object Array]"!==Object.prototype.toString.call(t[e]))return!1;return!0}return!1}function attributeNotEmpty(t){return!!t&&!!(t.trim().length>0)}function attributeEmpty(t){return!t||0===t.trim().length}function Scanner(t,e,i){this.input=t,this.includeTokensInOutput=e,this.tokens=i}function StringBuffer(t){this.dataArray=Array(t)}transformAttr=(transformAttr=(transformAttr=(transformAttr=transformAttr||("-webkit-transform"in document.documentElement.style?"-webkit-transform":"undefined"))||("-moz-transform"in document.documentElement.style?"-moz-transform":"undefined"))||("-ms-transform"in document.documentElement.style?"-ms-transform":"undefined"))||("-o-transform"in document.documentElement.style?"-o-transform":"undefined"),View.prototype.isPopup=function(){let t=this.refIds.get(attrKeys.layout_popup);return void 0!==t&&(!0===t||"true"===t)},View.prototype.isLeftSideMenu=function(){let t=this.refIds.get(attrKeys.layout_menuLeft);return void 0!==t&&(!0===t||"true"===t)},View.prototype.isRightSideMenu=function(){let t=this.refIds.get(attrKeys.layout_menuRight);return void 0!==t&&(!0===t||"true"===t)},View.prototype.isSideMenu=function(){return this.isLeftSideMenu()||this.isRightSideMenu()},View.prototype.makeBgImage=function(){let t=this.refIds,e=t.get(attrKeys.mi_useAutoBg);if(!e||"false"===e)return;let i=t.get(attrKeys.mi_fg),r=t.get(attrKeys.mi_bg),n=t.get(attrKeys.mi_strokeWidth),o=t.get(attrKeys.mi_minSize),s=t.get(attrKeys.mi_textArray),l=t.get(attrKeys.mi_fontName),u=t.get(attrKeys.mi_fontWeight),h=t.get(attrKeys.mi_fontStyle),c=t.get(attrKeys.mi_fontSize),p=t.get(attrKeys.mi_numShapes),d=t.get(attrKeys.mi_shapesDensity),f=t.get(attrKeys.mi_opacity),y=t.get(attrKeys.mi_cacheAfterDraw),g=t.get(attrKeys.mi_opaqueBg),m=t.get(attrKeys.mi_mode),v=t.get(attrKeys.mi_textOnly),$=null;if(h?($=h,u&&($+=" "+u)):u&&($=u),s&&"string"==typeof s)try{s=JSON.parse(s)}catch(_){throw _}y=!0===y||"true"===y,v=!0===v||"true"===v,g=!0===g||"true"===g;let E=this.htmlNode.getBoundingClientRect(),A={width:E.width,height:E.height,fontName:l,fontSize:c,fontStyle:$,fgColor:i,bgColor:r,mode:m,numShapes:p,shapesDensity:d,strokeWidth:n,minSize:o,opacity:f,bgOpacityEnabled:g,textArray:s,textOnly:v,cacheAfterDraw:y};A.width=E.width,A.height=E.height;let x=new MysteryImage(A);x.draw();let S=new Style("#"+this.id,[]);S.addFromOptions({"background-image":"url('"+x.getImage()+"')","background-position":"0% 0%"}),updateOrCreateSelectorInStyleSheet(styleSheet,S),x.cleanup()},View.prototype.getValueAndPriority=function(t){if(void 0===t)return t;if(isNumber(t))return{id:t+"",defaultUsed:!0,priority:AutoLayout.Priority.REQUIRED};let e=t.indexOf("@");if(-1===e)return{id:t,defaultUsed:!0,priority:AutoLayout.Priority.REQUIRED};if(0===e)throw"Bad value for id";return{id:t.substring(0,e),defaultUsed:!1,priority:parseInt(t.substring(e+1))}},View.prototype.layoutSelf=function(t){let e=this.width,i=this.height,r=this.id,n=this.refIds.get(attrKeys.layout_maxWidth),o=this.refIds.get(attrKeys.layout_maxHeight),s=this.refIds.get(attrKeys.layout_minWidth),l=this.refIds.get(attrKeys.layout_minHeight),u=this.refIds.get(attrKeys.layout_constraintStart_toStartOf),h=this.refIds.get(attrKeys.layout_constraintEnd_toEndOf),c=this.refIds.get(attrKeys.layout_constraintTop_toTopOf),p=this.refIds.get(attrKeys.layout_constraintBottom_toBottomOf),d=this.refIds.get(attrKeys.layout_constraintCenterXAlign),f=this.refIds.get(attrKeys.layout_constraintCenterYAlign),y=[],g=this.getValueAndPriority(e);e=g.id;let m=g.priority;this.setWidthConstraints(t,y,this.id,e,m);let v=this.getValueAndPriority(i);i=v.id;let $=v.priority;if(this.setHeightConstraints(t,y,this.id,i,$),n){let _=this.getValueAndPriority(n);n=_.id;let E=_.priority;y.push({view1:r,attr1:"width",relation:"leq",constant:parseFloat(n),multiplier:1,priority:E})}if(s){let A=this.getValueAndPriority(s);s=A.id;let x=A.priority;y.push({view1:r,attr1:"width",relation:"geq",constant:parseFloat(s),multiplier:1,priority:x})}if(o){let S=this.getValueAndPriority(o);o=S.id;let T=S.priority;y.push({view1:r,attr1:"height",relation:"leq",constant:parseFloat(o),multiplier:1,priority:T})}if(l){let C=this.getValueAndPriority(l);l=C.id;let I=C.priority;y.push({view1:r,attr1:"height",relation:"geq",constant:parseFloat(l),multiplier:1,priority:I})}if(u){let O=this.getValueAndPriority(u);u=O.id;let V=O.priority;this.setLeftAlignSS(r,this.margins.start,"parent",V,y)}if(c){let R=this.getValueAndPriority(c);c=R.id;let N=R.priority;this.setTopAlignTT(r,this.margins.top,"parent",N,y)}if(h){let q=this.getValueAndPriority(h);h=q.id;let P=q.priority;this.setRightAlignEE(r,this.margins.end,"parent",P,y)}if(p){let B=this.getValueAndPriority(p);p=B.id;let k=B.priority;this.setBottomAlignBB(r,this.margins.bottom,"parent",k,y)}if(d){let H=this.getValueAndPriority(d);d=H.id;let L=H.priority;y.push({view1:r,attr1:"centerX",relation:"equ",view2:null,attr2:"centerX",constant:this.margins.start-this.margins.end,multiplier:1,priority:L})}if(f){let z=this.getValueAndPriority(f);f=z.id;let M=z.priority;y.push({view1:r,attr1:"centerY",relation:"equ",view2:null,attr2:"centerY",constant:this.margins.top-this.margins.bottom,multiplier:1,priority:M})}return y},View.prototype.layoutChildren=function(t){this.width,this.height;let e=[];for(let i=0;i<this.childrenIds.length;i++){let r=this.childrenIds[i],n=t.viewMap.get(r),o=n.refIds.get(attrKeys.layout_constraintStart_toStartOf),s=n.refIds.get(attrKeys.layout_constraintStart_toEndOf),l=n.refIds.get(attrKeys.layout_constraintEnd_toStartOf),u=n.refIds.get(attrKeys.layout_constraintEnd_toEndOf),h=n.refIds.get(attrKeys.layout_constraintTop_toTopOf),c=n.refIds.get(attrKeys.layout_constraintTop_toBottomOf),p=n.refIds.get(attrKeys.layout_constraintBottom_toTopOf),d=n.refIds.get(attrKeys.layout_constraintBottom_toBottomOf),f=n.refIds.get(attrKeys.layout_constraintCenterXAlign),y=n.refIds.get(attrKeys.layout_constraintCenterYAlign),g=n.refIds.get(attrKeys.layout_constraintStart_toCenterX),m=n.refIds.get(attrKeys.layout_constraintEnd_toCenterX),v=n.refIds.get(attrKeys.layout_constraintCenterX_toStart),$=n.refIds.get(attrKeys.layout_constraintCenterX_toEnd),_=n.refIds.get(attrKeys.layout_constraintTop_toCenterY),E=n.refIds.get(attrKeys.layout_constraintCenterY_toTop),A=n.refIds.get(attrKeys.layout_constraintBottom_toCenterY),x=n.refIds.get(attrKeys.layout_constraintCenterY_toBottom),S=n.refIds.get(attrKeys.layout_horizontalBias),T=n.refIds.get(attrKeys.layout_verticalBias);if("Guideline"===n.constructor.name){n.layoutGuide(e);continue}if(S){if(isNumber(S)){if((S=2*parseFloat(S))<0||S>2)throw"Invalid value set for horBias... should be between 0 and 1 on view.id="+r;0===S&&(S=MIN_BIAS)}else throw"Invalid type set for horBias... should be a number between 0 and 1 view.id="+r}else S=1;if(T){if(isNumber(T)){if((T=2*parseFloat(T))<0||T>2)throw"Invalid value set for verBias... should be between 0 and 1 on view.id="+r;0===T&&(T=MIN_BIAS)}else throw"Invalid type set for verBias... should be between 0 and 1 view.id="+r}else T=1;let C=n.refIds.get(attrKeys.layout_maxWidth),I=n.refIds.get(attrKeys.layout_maxHeight),O=n.refIds.get(attrKeys.layout_minWidth),V=n.refIds.get(attrKeys.layout_minHeight),R=n.width,N=n.height;R===sizes.WRAP_CONTENT&&(R=n.wrapWidth),N===sizes.WRAP_CONTENT&&(N=n.wrapHeight);let q=this.getValueAndPriority(R);R=q.id;let P=q.priority,B,k;q.defaultUsed&&(o&&u||o&&l||o&&m||s&&u||s&&l||s&&m||g&&u||g&&l||g&&m)&&(0===parseInt(R)?P=AutoLayout.Priority.DEFAULTLOW:(B=r+"_dummywid_"+ULID.ulid(),o?this.setLeftAlignSS(B,n.margins.start,o,AutoLayout.Priority.REQUIRED,e):s?this.setLeftAlignSE(B,n.margins.start,s,AutoLayout.Priority.REQUIRED,e):g&&this.setLeftAlignCX(B,n.margins.start,g,AutoLayout.Priority.REQUIRED,e),u?this.setRightAlignEE(B,n.margins.end,u,AutoLayout.Priority.REQUIRED,e):l?this.setRightAlignES(B,n.margins.end,l,AutoLayout.Priority.REQUIRED,e):m&&this.setRightAlignCX(B,n.margins.end,m,AutoLayout.Priority.REQUIRED,e),e.push({view1:B,attr1:"width",relation:"equ",view2:null,attr2:AutoLayout.Attribute.NOTANATTRIBUTE,constant:0,multiplier:1,priority:249}),e.push({view1:r,attr1:"centerX",relation:"equ",view2:B,attr2:"centerX",constant:n.margins.horMarginDiff(),multiplier:S,priority:AutoLayout.Priority.REQUIRED}))),this.setWidthConstraints(t,e,r,R,P);let H=this.getValueAndPriority(N);N=H.id;let L=H.priority;if(H.defaultUsed&&(h&&d||h&&p||h&&A||c&&d||c&&p||c&&A||_&&d||_&&p||_&&A)&&(0===parseInt(N)?L=AutoLayout.Priority.DEFAULTLOW:(L=AutoLayout.Priority.REQUIRED,k=r+"_dummyhei_"+ULID.ulid(),h?this.setTopAlignTT(k,n.margins.top,h,AutoLayout.Priority.REQUIRED,e):c?this.setTopAlignTB(k,n.margins.top,c,AutoLayout.Priority.REQUIRED,e):_&&this.setTopAlignCY(k,n.margins.top,_,AutoLayout.Priority.REQUIRED,e),d?this.setBottomAlignBB(k,n.margins.bottom,d,AutoLayout.Priority.REQUIRED,e):p?this.setBottomAlignBT(k,n.margins.bottom,p,AutoLayout.Priority.REQUIRED,e):A&&this.setBottomAlignCY(k,n.margins.bottom,A,AutoLayout.Priority.REQUIRED,e),e.push({view1:k,attr1:"height",relation:"equ",view2:null,attr2:AutoLayout.Attribute.NOTANATTRIBUTE,constant:0,multiplier:1,priority:249}),e.push({view1:r,attr1:"centerY",relation:"equ",view2:k,attr2:"centerY",constant:n.margins.verMarginDiff(),multiplier:T,priority:AutoLayout.Priority.REQUIRED}))),this.setHeightConstraints(t,e,r,N,L),this.setSizeBoundariesConstraints(t,e,r,C,O,I,V),o&&!B){let z=this.getValueAndPriority(o);o=z.id;let M=z.priority;this.setLeftAlignSS(r,n.margins.start,o,M,e)}if(h&&!k){let W=this.getValueAndPriority(h);h=W.id;let U=W.priority;this.setTopAlignTT(r,n.margins.top,h,U,e)}if(u&&!B){let D=this.getValueAndPriority(u);u=D.id;let F=D.priority;this.setRightAlignEE(r,n.margins.end,u,F,e)}if(d&&!k){let j=this.getValueAndPriority(d);d=j.id;let K=j.priority;this.setBottomAlignBB(r,n.margins.bottom,d,K,e)}if(s&&!B){let X=this.getValueAndPriority(s);s=X.id;let G=X.priority;this.setLeftAlignSE(r,n.margins.start,s,G,e)}if(l&&!B){let Q=this.getValueAndPriority(l);l=Q.id;let Y=Q.priority;this.setRightAlignES(r,n.margins.end,l,Y,e)}if(c&&!k){let Z=this.getValueAndPriority(c);c=Z.id;let J=Z.priority;this.setTopAlignTB(r,n.margins.top,c,J,e)}if(p&&!k){let tt=this.getValueAndPriority(p);p=tt.id;let te=tt.priority;this.setBottomAlignBT(r,n.margins.bottom,p,te,e)}if(f){let ti=this.getValueAndPriority(f);f=ti.id;let tr=ti.priority;if(!n.margins.horUnitsSame)throw"`cx` needs margin-start and margin-end to have same units!";e.push({view1:r,attr1:"centerX",relation:"equ",view2:"parent"===f?null:f,attr2:"centerX",constant:n.margins.horMarginDiff(),multiplier:S,priority:tr})}if(y){let tn=this.getValueAndPriority(y);y=tn.id;let to=tn.priority;if(!n.margins.verUnitsSame)throw"`cy` needs margin-top and margin-bottom to have same units!";e.push({view1:r,attr1:"centerY",relation:"equ",view2:"parent"===y?null:y,attr2:"centerY",constant:n.margins.verMarginDiff(),multiplier:T,priority:to})}if(g&&!B){let ts=this.getValueAndPriority(g);g=ts.id;let ta=ts.priority;this.setLeftAlignCX(r,n.margins.start,g,ta,e)}if(m&&!B){let tl=this.getValueAndPriority(m);m=tl.id;let tu=tl.priority;this.setRightAlignCX(r,n.margins.end,m,tu,e)}if(v&&!B){let th=this.getValueAndPriority(v);v=th.id;let tc=th.priority;if(!n.margins.horUnitsSame)throw"`cxs` needs margin-start and margin-end to have same units!";this.setCXAlignLeft(r,n.margins.horMarginDiff(),v,tc,e)}if($&&!B){let tp=this.getValueAndPriority($);$=tp.id;let td=tp.priority;if(!n.margins.horUnitsSame)throw"`cxe` needs margin-start and margin-end to have same units!";this.setCXAlignRight(r,n.margins.horMarginDiff(),$,td,e)}if(_&&!B){let tf=this.getValueAndPriority(_);_=tf.id;let ty=tf.priority;this.setTopAlignCY(r,n.margins.top,_,ty,e)}if(A&&!B){let tg=this.getValueAndPriority(A);A=tg.id;let tm=tg.priority;this.setBottomAlignCY(r,n.margins.bottom,A,tm,e)}if(E&&!B){let tv=this.getValueAndPriority(E);E=tv.id;let tw=tv.priority;if(!n.margins.verUnitsSame)throw"`bcy` needs margin-top and margin-bottom to have same units!";this.setCYAlignTop(r,n.margins.verMarginDiff(),E,tw,e)}if(x&&!B){let t$=this.getValueAndPriority(x);x=t$.id;let t_=t$.priority;if(!n.margins.verUnitsSame)throw"`cyb` needs margin-top and margin-bottom to have same units!";this.setCYAlignBottom(r,n.margins.verMarginDiff(),x,t_,e)}}return e},View.prototype.setLeftAlignSS=function(t,e,i,r,n){if("number"==typeof(e="0%"===e?0:e))n.push({view1:t,attr1:"left",relation:"equ",view2:"parent"===i?null:i,attr2:"left",constant:e,multiplier:1,priority:r});else if(isNumber(e))n.push({view1:t,attr1:"left",relation:"equ",view2:"parent"===i?null:i,attr2:"left",constant:parseFloat(e),multiplier:1,priority:r});else if(endsWith(e,"px"))n.push({view1:t,attr1:"left",relation:"equ",view2:"parent"===i?null:i,attr2:"left",constant:parseFloat(e),multiplier:1,priority:r});else{if(!endsWith(e,"%"))throw"margin-left can only be expressed in pixels, in percentage(%) or without units, on id: "+t;let o=parseFloat(e)/100,s=t+"_dummy_"+ULID.ulid();"parent"===i?(n.push({view1:s,attr1:"left",relation:"equ",view2:null,attr2:"left",constant:0,multiplier:1,priority:1e3}),n.push({view1:s,attr1:"width",relation:"equ",view2:null,attr2:"width",constant:1,multiplier:o,priority:1e3}),n.push({view1:t,attr1:"left",relation:"equ",view2:s,attr2:"right",constant:1,multiplier:1,priority:1e3})):(n.push({view1:s,attr1:"left",relation:"equ",view2:i,attr2:"left",constant:0,multiplier:1,priority:1e3}),n.push({view1:s,attr1:"width",relation:"equ",view2:null,attr2:"width",constant:1,multiplier:o,priority:1e3}),n.push({view1:t,attr1:"left",relation:"equ",view2:s,attr2:"right",constant:1,multiplier:1,priority:1e3}))}},View.prototype.setLeftAlignSE=function(t,e,i,r,n){if("number"==typeof(e="0%"===e?0:e))n.push({view1:t,attr1:"left",relation:"equ",view2:"parent"===i?null:i,attr2:"right",constant:e,multiplier:1,priority:r});else if(isNumber(e))n.push({view1:t,attr1:"left",relation:"equ",view2:"parent"===i?null:i,attr2:"right",constant:parseFloat(e),multiplier:1,priority:r});else if(endsWith(e,"px"))n.push({view1:t,attr1:"left",relation:"equ",view2:"parent"===i?null:i,attr2:"right",constant:parseFloat(e),multiplier:1,priority:r});else{if(!endsWith(e,"%"))throw"margin-left can only be expressed in pixels, in percentage(%) or without units, on id: "+t;let o=parseFloat(e)/100,s=t+"_dummy_"+ULID.ulid();"parent"===i?(n.push({view1:s,attr1:"left",relation:"equ",view2:null,attr2:"right",constant:0,multiplier:1,priority:1e3}),n.push({view1:s,attr1:"width",relation:"equ",view2:null,attr2:"width",constant:1,multiplier:o,priority:1e3}),n.push({view1:t,attr1:"left",relation:"equ",view2:s,attr2:"right",constant:1,multiplier:1,priority:1e3})):(n.push({view1:s,attr1:"left",relation:"equ",view2:i,attr2:"right",constant:0,multiplier:1,priority:1e3}),n.push({view1:s,attr1:"width",relation:"equ",view2:null,attr2:"width",constant:1,multiplier:o,priority:1e3}),n.push({view1:t,attr1:"left",relation:"equ",view2:s,attr2:"right",constant:1,multiplier:1,priority:1e3}))}},View.prototype.setRightAlignEE=function(t,e,i,r,n){if("number"==typeof(e="0%"===e?0:e))n.push({view1:t,attr1:"right",relation:"equ",view2:"parent"===i?null:i,attr2:"right",constant:-1*e,multiplier:1,priority:r});else if(isNumber(e))n.push({view1:t,attr1:"right",relation:"equ",view2:"parent"===i?null:i,attr2:"right",constant:-1*parseFloat(e),multiplier:1,priority:r});else if(endsWith(e,"px"))n.push({view1:t,attr1:"right",relation:"equ",view2:"parent"===i?null:i,attr2:"right",constant:-1*parseFloat(e),multiplier:1,priority:r});else{if(!endsWith(e,"%"))throw"margin-right can only be expressed in pixels, in percentage(%) or without units, on id: "+t;let o=parseFloat(e)/100,s=t+"_dummy_"+ULID.ulid();"parent"===i?(n.push({view1:s,attr1:"right",relation:"equ",view2:null,attr2:"right",constant:0,multiplier:1,priority:1e3}),n.push({view1:s,attr1:"width",relation:"equ",view2:null,attr2:"width",constant:1,multiplier:o,priority:1e3}),n.push({view1:t,attr1:"right",relation:"equ",view2:s,attr2:"left",constant:1,multiplier:1,priority:1e3})):(n.push({view1:s,attr1:"right",relation:"equ",view2:i,attr2:"right",constant:0,multiplier:1,priority:1e3}),n.push({view1:s,attr1:"width",relation:"equ",view2:null,attr2:"width",constant:1,multiplier:o,priority:1e3}),n.push({view1:t,attr1:"right",relation:"equ",view2:s,attr2:"left",constant:1,multiplier:1,priority:1e3}))}},View.prototype.setRightAlignES=function(t,e,i,r,n){if("number"==typeof(e="0%"===e?0:e))n.push({view1:t,attr1:"right",relation:"equ",view2:"parent"===i?null:i,attr2:"left",constant:-1*e,multiplier:1,priority:r});else if(isNumber(e))n.push({view1:t,attr1:"right",relation:"equ",view2:"parent"===i?null:i,attr2:"left",constant:-1*parseFloat(e),multiplier:1,priority:r});else if(endsWith(e,"px"))n.push({view1:t,attr1:"right",relation:"equ",view2:"parent"===i?null:i,attr2:"left",constant:-1*parseFloat(e),multiplier:1,priority:r});else{if(!endsWith(e,"%"))throw"margin-right can only be expressed in pixels, in percentage(%) or without units, on id: "+t;let o=parseFloat(e)/100,s=t+"_dummy_"+ULID.ulid();"parent"===i?(n.push({view1:s,attr1:"right",relation:"equ",view2:null,attr2:"left",constant:0,multiplier:1,priority:1e3}),n.push({view1:s,attr1:"width",relation:"equ",view2:null,attr2:"width",constant:1,multiplier:o,priority:1e3}),n.push({view1:t,attr1:"right",relation:"equ",view2:s,attr2:"left",constant:1,multiplier:1,priority:1e3})):(n.push({view1:s,attr1:"right",relation:"equ",view2:i,attr2:"left",constant:0,multiplier:1,priority:1e3}),n.push({view1:s,attr1:"width",relation:"equ",view2:null,attr2:"width",constant:1,multiplier:o,priority:1e3}),n.push({view1:t,attr1:"right",relation:"equ",view2:s,attr2:"left",constant:1,multiplier:1,priority:1e3}))}},View.prototype.setLeftAlignCX=function(t,e,i,r,n){if("number"==typeof(e="0%"===e?0:e))n.push({view1:t,attr1:AutoLayout.Attribute.LEFT,relation:"equ",view2:"parent"===i?null:i,attr2:AutoLayout.Attribute.CENTERX,constant:e,multiplier:1,priority:r});else if(isNumber(e))n.push({view1:t,attr1:AutoLayout.Attribute.LEFT,relation:"equ",view2:"parent"===i?null:i,attr2:AutoLayout.Attribute.CENTERX,constant:parseFloat(e),multiplier:1,priority:r});else if(endsWith(e,"px"))n.push({view1:t,attr1:AutoLayout.Attribute.LEFT,relation:"equ",view2:"parent"===i?null:i,attr2:AutoLayout.Attribute.CENTERX,constant:parseFloat(e),multiplier:1,priority:r});else{if(!endsWith(e,"%"))throw"margin-left can only be expressed in pixels, in percentage(%) or without units, on id: "+t;let o=parseFloat(e)/100,s=t+"_dummy_"+ULID.ulid();"parent"===i?(n.push({view1:s,attr1:AutoLayout.Attribute.LEFT,relation:"equ",view2:null,attr2:AutoLayout.Attribute.CENTERX,constant:0,multiplier:1,priority:1e3}),n.push({view1:s,attr1:"width",relation:"equ",view2:null,attr2:"width",constant:1,multiplier:o,priority:1e3}),n.push({view1:t,attr1:"left",relation:"equ",view2:s,attr2:"right",constant:1,multiplier:1,priority:1e3})):(n.push({view1:s,attr1:AutoLayout.Attribute.LEFT,relation:"equ",view2:i,attr2:AutoLayout.Attribute.CENTERX,constant:0,multiplier:1,priority:1e3}),n.push({view1:s,attr1:"width",relation:"equ",view2:null,attr2:"width",constant:1,multiplier:o,priority:1e3}),n.push({view1:t,attr1:"left",relation:"equ",view2:s,attr2:"right",constant:1,multiplier:1,priority:1e3}))}},View.prototype.setCXAlignLeft=function(t,e,i,r,n){if("number"==typeof(e="0%"===e?0:e))n.push({view1:t,attr1:AutoLayout.Attribute.CENTERX,relation:"equ",view2:"parent"===i?null:i,attr2:AutoLayout.Attribute.LEFT,constant:e,multiplier:1,priority:r});else if(isNumber(e))n.push({view1:t,attr1:AutoLayout.Attribute.CENTERX,relation:"equ",view2:"parent"===i?null:i,attr2:AutoLayout.Attribute.LEFT,constant:parseFloat(e),multiplier:1,priority:r});else if(endsWith(e,"px"))n.push({view1:t,attr1:AutoLayout.Attribute.CENTERX,relation:"equ",view2:"parent"===i?null:i,attr2:AutoLayout.Attribute.LEFT,constant:parseFloat(e),multiplier:1,priority:r});else{if(!endsWith(e,"%"))throw"margin-left can only be expressed in pixels, in percentage(%) or without units, on id: "+t;let o=parseFloat(e)/100,s=t+"_dummy_"+ULID.ulid();"parent"===i?(n.push({view1:s,attr1:AutoLayout.Attribute.LEFT,relation:"equ",view2:null,attr2:AutoLayout.Attribute.LEFT,constant:0,multiplier:1,priority:1e3}),n.push({view1:s,attr1:"width",relation:"equ",view2:null,attr2:"width",constant:1,multiplier:o,priority:1e3}),n.push({view1:t,attr1:AutoLayout.Attribute.CENTERX,relation:"equ",view2:s,attr2:AutoLayout.Attribute.RIGHT,constant:1,multiplier:1,priority:1e3})):(n.push({view1:s,attr1:AutoLayout.Attribute.LEFT,relation:"equ",view2:i,attr2:AutoLayout.Attribute.LEFT,constant:0,multiplier:1,priority:1e3}),n.push({view1:s,attr1:"width",relation:"equ",view2:null,attr2:"width",constant:1,multiplier:o,priority:1e3}),n.push({view1:t,attr1:AutoLayout.Attribute.CENTERX,relation:"equ",view2:s,attr2:AutoLayout.Attribute.RIGHT,constant:1,multiplier:1,priority:1e3}))}},View.prototype.setCXAlignRight=function(t,e,i,r,n){if("number"==typeof(e="0%"===e?0:e))n.push({view1:t,attr1:AutoLayout.Attribute.CENTERX,relation:"equ",view2:"parent"===i?null:i,attr2:AutoLayout.Attribute.RIGHT,constant:e,multiplier:1,priority:r});else if(isNumber(e))n.push({view1:t,attr1:AutoLayout.Attribute.CENTERX,relation:"equ",view2:"parent"===i?null:i,attr2:AutoLayout.Attribute.RIGHT,constant:parseFloat(e),multiplier:1,priority:r});else if(endsWith(e,"px"))n.push({view1:t,attr1:AutoLayout.Attribute.CENTERX,relation:"equ",view2:"parent"===i?null:i,attr2:AutoLayout.Attribute.RIGHT,constant:parseFloat(e),multiplier:1,priority:r});else{if(!endsWith(e,"%"))throw"margins can only be expressed in pixels, in percentage(%) or without units, on id: "+t;let o=parseFloat(e)/100,s=t+"_dummy_"+ULID.ulid();"parent"===i?(n.push({view1:s,attr1:AutoLayout.Attribute.LEFT,relation:"equ",view2:null,attr2:AutoLayout.Attribute.RIGHT,constant:0,multiplier:1,priority:1e3}),n.push({view1:s,attr1:"width",relation:"equ",view2:null,attr2:"width",constant:1,multiplier:o,priority:1e3}),n.push({view1:t,attr1:AutoLayout.Attribute.CENTERX,relation:"equ",view2:s,attr2:AutoLayout.Attribute.RIGHT,constant:1,multiplier:1,priority:1e3})):(n.push({view1:s,attr1:AutoLayout.Attribute.LEFT,relation:"equ",view2:i,attr2:AutoLayout.Attribute.RIGHT,constant:1,multiplier:1,priority:1e3}),n.push({view1:s,attr1:"width",relation:"equ",view2:null,attr2:"width",constant:1,multiplier:o,priority:1e3}),n.push({view1:t,attr1:AutoLayout.Attribute.CENTERX,relation:"equ",view2:s,attr2:AutoLayout.Attribute.RIGHT,constant:1,multiplier:1,priority:1e3}))}},View.prototype.setRightAlignCX=function(t,e,i,r,n){if("number"==typeof(e="0%"===e?0:e))n.push({view1:t,attr1:AutoLayout.Attribute.RIGHT,relation:"equ",view2:"parent"===i?null:i,attr2:AutoLayout.Attribute.CENTERX,constant:-e,multiplier:1,priority:r});else if(isNumber(e))n.push({view1:t,attr1:AutoLayout.Attribute.RIGHT,relation:"equ",view2:"parent"===i?null:i,attr2:AutoLayout.Attribute.CENTERX,constant:-parseFloat(e),multiplier:1,priority:r});else if(endsWith(e,"px"))n.push({view1:t,attr1:AutoLayout.Attribute.RIGHT,relation:"equ",view2:"parent"===i?null:i,attr2:AutoLayout.Attribute.CENTERX,constant:-parseFloat(e),multiplier:1,priority:r});else{if(!endsWith(e,"%"))throw"margin-left can only be expressed in pixels, in percentage(%) or without units, on id: "+t;let o=parseFloat(e)/100,s=t+"_dummy_"+ULID.ulid();"parent"===i?(n.push({view1:s,attr1:AutoLayout.Attribute.RIGHT,relation:"equ",view2:null,attr2:AutoLayout.Attribute.CENTERX,constant:0,multiplier:1,priority:1e3}),n.push({view1:s,attr1:"width",relation:"equ",view2:null,attr2:"width",constant:1,multiplier:o,priority:1e3}),n.push({view1:t,attr1:"left",relation:"equ",view2:s,attr2:"left",constant:1,multiplier:1,priority:1e3})):(n.push({view1:s,attr1:AutoLayout.Attribute.RIGHT,relation:"equ",view2:i,attr2:AutoLayout.Attribute.CENTERX,constant:0,multiplier:1,priority:1e3}),n.push({view1:s,attr1:"width",relation:"equ",view2:null,attr2:"width",constant:1,multiplier:o,priority:1e3}),n.push({view1:t,attr1:"left",relation:"equ",view2:s,attr2:"left",constant:1,multiplier:1,priority:1e3}))}},View.prototype.setTopAlignCY=function(t,e,i,r,n){if("number"==typeof(e="0%"===e?0:e))n.push({view1:t,attr1:AutoLayout.Attribute.TOP,relation:"equ",view2:"parent"===i?null:i,attr2:AutoLayout.Attribute.CENTERY,constant:e,multiplier:1,priority:r});else if(isNumber(e))n.push({view1:t,attr1:AutoLayout.Attribute.TOP,relation:"equ",view2:"parent"===i?null:i,attr2:AutoLayout.Attribute.CENTERY,constant:parseFloat(e),multiplier:1,priority:r});else if(endsWith(e,"px"))n.push({view1:t,attr1:AutoLayout.Attribute.TOP,relation:"equ",view2:"parent"===i?null:i,attr2:AutoLayout.Attribute.CENTERY,constant:parseFloat(e),multiplier:1,priority:r});else{if(!endsWith(e,"%"))throw"margin-left can only be expressed in pixels, in percentage(%) or without units, on id: "+t;let o=parseFloat(e)/100,s=t+"_dummy_"+ULID.ulid();"parent"===i?(n.push({view1:s,attr1:AutoLayout.Attribute.TOP,relation:"equ",view2:null,attr2:AutoLayout.Attribute.CENTERY,constant:0,multiplier:1,priority:1e3}),n.push({view1:s,attr1:"height",relation:"equ",view2:null,attr2:"height",constant:1,multiplier:o,priority:1e3}),n.push({view1:t,attr1:"top",relation:"equ",view2:s,attr2:"bottom",constant:1,multiplier:1,priority:1e3})):(n.push({view1:s,attr1:AutoLayout.Attribute.TOP,relation:"equ",view2:i,attr2:AutoLayout.Attribute.CENTERY,constant:0,multiplier:1,priority:1e3}),n.push({view1:s,attr1:"height",relation:"equ",view2:null,attr2:"width",constant:1,multiplier:o,priority:1e3}),n.push({view1:t,attr1:"top",relation:"equ",view2:s,attr2:"bottom",constant:1,multiplier:1,priority:1e3}))}},View.prototype.setCYAlignTop=function(t,e,i,r,n){if("number"==typeof(e="0%"===e?0:e))n.push({view1:t,attr1:AutoLayout.Attribute.CENTERY,relation:"equ",view2:"parent"===i?null:i,attr2:AutoLayout.Attribute.TOP,constant:e,multiplier:1,priority:r});else if(isNumber(e))n.push({view1:t,attr1:AutoLayout.Attribute.CENTERY,relation:"equ",view2:"parent"===i?null:i,attr2:AutoLayout.Attribute.TOP,constant:parseFloat(e),multiplier:1,priority:r});else if(endsWith(e,"px"))n.push({view1:t,attr1:AutoLayout.Attribute.CENTERY,relation:"equ",view2:"parent"===i?null:i,attr2:AutoLayout.Attribute.TOP,constant:parseFloat(e),multiplier:1,priority:r});else{if(!endsWith(e,"%"))throw"margin-left can only be expressed in pixels, in percentage(%) or without units, on id: "+t;let o=parseFloat(e)/100,s=t+"_dummy_"+ULID.ulid();"parent"===i?(n.push({view1:s,attr1:AutoLayout.Attribute.TOP,relation:"equ",view2:null,attr2:AutoLayout.Attribute.TOP,constant:0,multiplier:1,priority:1e3}),n.push({view1:s,attr1:"height",relation:"equ",view2:null,attr2:"width",constant:1,multiplier:o,priority:1e3}),n.push({view1:t,attr1:AutoLayout.Attribute.CENTERY,relation:"equ",view2:s,attr2:AutoLayout.Attribute.BOTTOM,constant:1,multiplier:1,priority:1e3})):(n.push({view1:s,attr1:AutoLayout.Attribute.TOP,relation:"equ",view2:i,attr2:AutoLayout.Attribute.TOP,constant:0,multiplier:1,priority:1e3}),n.push({view1:s,attr1:"height",relation:"equ",view2:null,attr2:"width",constant:1,multiplier:o,priority:1e3}),n.push({view1:t,attr1:AutoLayout.Attribute.CENTERY,relation:"equ",view2:s,attr2:AutoLayout.Attribute.BOTTOM,constant:1,multiplier:1,priority:1e3}))}},View.prototype.setCYAlignBottom=function(t,e,i,r,n){if("number"==typeof(e="0%"===e?0:e))n.push({view1:t,attr1:AutoLayout.Attribute.CENTERY,relation:"equ",view2:"parent"===i?null:i,attr2:AutoLayout.Attribute.BOTTOM,constant:e,multiplier:1,priority:r});else if(isNumber(e))n.push({view1:t,attr1:AutoLayout.Attribute.CENTERY,relation:"equ",view2:"parent"===i?null:i,attr2:AutoLayout.Attribute.BOTTOM,constant:parseFloat(e),multiplier:1,priority:r});else if(endsWith(e,"px"))n.push({view1:t,attr1:AutoLayout.Attribute.CENTERY,relation:"equ",view2:"parent"===i?null:i,attr2:AutoLayout.Attribute.BOTTOM,constant:parseFloat(e),multiplier:1,priority:r});else{if(!endsWith(e,"%"))throw"margins can only be expressed in pixels, in percentage(%) or without units, on id: "+t;let o=parseFloat(e)/100,s=t+"_dummy_"+ULID.ulid();"parent"===i?(n.push({view1:s,attr1:AutoLayout.Attribute.TOP,relation:"equ",view2:null,attr2:AutoLayout.Attribute.BOTTOM,constant:0,multiplier:1,priority:1e3}),n.push({view1:s,attr1:"height",relation:"equ",view2:null,attr2:"width",constant:1,multiplier:o,priority:1e3}),n.push({view1:t,attr1:AutoLayout.Attribute.CENTERY,relation:"equ",view2:s,attr2:AutoLayout.Attribute.BOTTOM,constant:1,multiplier:1,priority:1e3})):(n.push({view1:s,attr1:AutoLayout.Attribute.TOP,relation:"equ",view2:i,attr2:AutoLayout.Attribute.BOTTOM,constant:1,multiplier:1,priority:1e3}),n.push({view1:s,attr1:"height",relation:"equ",view2:null,attr2:"width",constant:1,multiplier:o,priority:1e3}),n.push({view1:t,attr1:AutoLayout.Attribute.CENTERY,relation:"equ",view2:s,attr2:AutoLayout.Attribute.BOTTOM,constant:1,multiplier:1,priority:1e3}))}},View.prototype.setBottomAlignCY=function(t,e,i,r,n){if("number"==typeof(e="0%"===e?0:e))n.push({view1:t,attr1:AutoLayout.Attribute.BOTTOM,relation:"equ",view2:"parent"===i?null:i,attr2:AutoLayout.Attribute.CENTERY,constant:-e,multiplier:1,priority:r});else if(isNumber(e))n.push({view1:t,attr1:AutoLayout.Attribute.BOTTOM,relation:"equ",view2:"parent"===i?null:i,attr2:AutoLayout.Attribute.CENTERY,constant:-parseFloat(e),multiplier:1,priority:r});else if(endsWith(e,"px"))n.push({view1:t,attr1:AutoLayout.Attribute.BOTTOM,relation:"equ",view2:"parent"===i?null:i,attr2:AutoLayout.Attribute.CENTERY,constant:-parseFloat(e),multiplier:1,priority:r});else{if(!endsWith(e,"%"))throw"margin-left can only be expressed in pixels, in percentage(%) or without units, on id: "+t;let o=parseFloat(e)/100,s=t+"_dummy_"+ULID.ulid();"parent"===i?(n.push({view1:s,attr1:AutoLayout.Attribute.BOTTOM,relation:"equ",view2:null,attr2:AutoLayout.Attribute.CENTERY,constant:0,multiplier:1,priority:1e3}),n.push({view1:s,attr1:"height",relation:"equ",view2:null,attr2:"width",constant:1,multiplier:o,priority:1e3}),n.push({view1:t,attr1:"top",relation:"equ",view2:s,attr2:"top",constant:1,multiplier:1,priority:1e3})):(n.push({view1:s,attr1:AutoLayout.Attribute.BOTTOM,relation:"equ",view2:i,attr2:AutoLayout.Attribute.CENTERY,constant:0,multiplier:1,priority:1e3}),n.push({view1:s,attr1:"height",relation:"equ",view2:null,attr2:"width",constant:1,multiplier:o,priority:1e3}),n.push({view1:t,attr1:"top",relation:"equ",view2:s,attr2:"top",constant:1,multiplier:1,priority:1e3}))}},View.prototype.setTopAlignTT=function(t,e,i,r,n){if("number"==typeof(e="0%"===e?0:e))n.push({view1:t,attr1:"top",relation:"equ",view2:"parent"===i?null:i,attr2:"top",constant:e,multiplier:1,priority:r});else if(isNumber(e))n.push({view1:t,attr1:"top",relation:"equ",view2:"parent"===i?null:i,attr2:"top",constant:parseFloat(e),multiplier:1,priority:r});else if(endsWith(e,"px"))n.push({view1:t,attr1:"top",relation:"equ",view2:"parent"===i?null:i,attr2:"top",constant:parseFloat(e),multiplier:1,priority:r});else{if(!endsWith(e,"%"))throw"margin-top can only be expressed in pixels, in percentage(%) or without units, on id: "+t;let o=parseFloat(e)/100;if(!o)throw"Invalid expression found for margin-top on id: "+t;let s=t+"_dummy_"+ULID.ulid();"parent"===i?(n.push({view1:s,attr1:"top",relation:"equ",view2:null,attr2:"top",constant:0,multiplier:1,priority:1e3}),n.push({view1:s,attr1:"height",relation:"equ",view2:null,attr2:"width",constant:1,multiplier:o,priority:1e3}),n.push({view1:t,attr1:"top",relation:"equ",view2:s,attr2:"bottom",constant:1,multiplier:1,priority:1e3})):(n.push({view1:s,attr1:"top",relation:"equ",view2:i,attr2:"top",constant:0,multiplier:1,priority:1e3}),n.push({view1:s,attr1:"height",relation:"equ",view2:null,attr2:"width",constant:1,multiplier:o,priority:1e3}),n.push({view1:t,attr1:"top",relation:"equ",view2:s,attr2:"bottom",constant:1,multiplier:1,priority:1e3}))}},View.prototype.setTopAlignTB=function(t,e,i,r,n){if("number"==typeof(e="0%"===e?0:e))n.push({view1:t,attr1:"top",relation:"equ",view2:"parent"===i?null:i,attr2:"bottom",constant:e,multiplier:1,priority:r});else if(isNumber(e))n.push({view1:t,attr1:"top",relation:"equ",view2:"parent"===i?null:i,attr2:"bottom",constant:parseFloat(e),multiplier:1,priority:r});else if(endsWith(e,"px"))n.push({view1:t,attr1:"top",relation:"equ",view2:"parent"===i?null:i,attr2:"bottom",constant:parseFloat(e),multiplier:1,priority:r});else{if(!endsWith(e,"%"))throw"margin-top can only be expressed in pixels, in percentage(%) or without units, on id: "+t;let o=parseFloat(e)/100;if(!o)throw"Invalid expression found for margin-top on id: "+t;let s=t+"_dummy_"+ULID.ulid();"parent"===i?(n.push({view1:s,attr1:"top",relation:"equ",view2:null,attr2:"bottom",constant:0,multiplier:1,priority:1e3}),n.push({view1:s,attr1:"height",relation:"equ",view2:null,attr2:"width",constant:1,multiplier:o,priority:1e3}),n.push({view1:t,attr1:"top",relation:"equ",view2:s,attr2:"bottom",constant:1,multiplier:1,priority:1e3})):(n.push({view1:s,attr1:"top",relation:"equ",view2:i,attr2:"bottom",constant:0,multiplier:1,priority:1e3}),n.push({view1:s,attr1:"height",relation:"equ",view2:null,attr2:"width",constant:1,multiplier:o,priority:1e3}),n.push({view1:t,attr1:"top",relation:"equ",view2:s,attr2:"bottom",constant:1,multiplier:1,priority:1e3}))}},View.prototype.setBottomAlignBB=function(t,e,i,r,n){if("number"==typeof e)n.push({view1:t,attr1:"bottom",relation:"equ",view2:"parent"===i?null:i,attr2:"bottom",constant:-1*e,multiplier:1,priority:r});else if(isNumber(e))n.push({view1:t,attr1:"bottom",relation:"equ",view2:"parent"===i?null:i,attr2:"bottom",constant:-1*parseFloat(e),multiplier:1,priority:r});else if(endsWith(e,"px"))n.push({view1:t,attr1:"bottom",relation:"equ",view2:"parent"===i?null:i,attr2:"bottom",constant:-1*parseFloat(e),multiplier:1,priority:r});else{if(!endsWith(e,"%"))throw"margin-bottom can only be expressed in pixels, in percentage(%) or without units, on id: "+t;let o=parseFloat(e)/100,s=t+"_dummy_"+ULID.ulid();"parent"===i?(n.push({view1:s,attr1:"bottom",relation:"equ",view2:null,attr2:"bottom",constant:0,multiplier:1,priority:1e3}),n.push({view1:s,attr1:"height",relation:"equ",view2:null,attr2:"width",constant:1,multiplier:o,priority:1e3}),n.push({view1:t,attr1:"bottom",relation:"equ",view2:s,attr2:"top",constant:1,multiplier:1,priority:1e3})):(n.push({view1:s,attr1:"bottom",relation:"equ",view2:i,attr2:"bottom",constant:0,multiplier:1,priority:1e3}),n.push({view1:s,attr1:"height",relation:"equ",view2:null,attr2:"width",constant:1,multiplier:o,priority:1e3}),n.push({view1:t,attr1:"bottom",relation:"equ",view2:s,attr2:"top",constant:1,multiplier:1,priority:1e3}))}},View.prototype.setBottomAlignBT=function(t,e,i,r,n){if("number"==typeof(e="0%"===e?0:e))n.push({view1:t,attr1:"bottom",relation:"equ",view2:"parent"===i?null:i,attr2:"top",constant:-1*e,multiplier:1,priority:r});else if(isNumber(e))n.push({view1:t,attr1:"bottom",relation:"equ",view2:"parent"===i?null:i,attr2:"top",constant:-1*parseFloat(e),multiplier:1,priority:r});else if(endsWith(e,"px"))n.push({view1:t,attr1:"bottom",relation:"equ",view2:"parent"===i?null:i,attr2:"top",constant:-1*parseFloat(e),multiplier:1,priority:r});else{if(!endsWith(e,"%"))throw"margin-bottom can only be expressed in pixels, in percentage(%) or without units, on id: "+t;let o=parseFloat(e)/100,s=t+"_dummy_"+ULID.ulid();"parent"===i?(n.push({view1:s,attr1:"bottom",relation:"equ",view2:null,attr2:"top",constant:0,multiplier:1,priority:1e3}),n.push({view1:s,attr1:"height",relation:"equ",view2:null,attr2:"width",constant:1,multiplier:o,priority:1e3}),n.push({view1:t,attr1:"bottom",relation:"equ",view2:s,attr2:"top",constant:1,multiplier:1,priority:1e3})):(n.push({view1:s,attr1:"bottom",relation:"equ",view2:i,attr2:"top",constant:0,multiplier:1,priority:1e3}),n.push({view1:s,attr1:"height",relation:"equ",view2:null,attr2:"width",constant:1,multiplier:o,priority:1e3}),n.push({view1:t,attr1:"bottom",relation:"equ",view2:s,attr2:"top",constant:1,multiplier:1,priority:1e3}))}},View.prototype.setSizeBoundariesConstraints=function(t,e,i,r,n,o,s){if(r){let l=this.getValueAndPriority(r);r=l.id;let u=l.priority,h=-1,c="";if(isNumber(r))e.push({view1:i,attr1:"width",relation:"leq",view2:null,attr2:AutoLayout.Attribute.NOTANATTRIBUTE,constant:parseFloat(r),multiplier:1,priority:u});else if("parent"===r||-1!==this.childrenIds.indexOf(r))e.push({view1:i,attr1:"width",relation:"leq",view2:"parent"===r?null:r,attr2:"width",constant:0,multiplier:1,priority:u});else if(-1!==(h=r.indexOf("."))&&-1!==this.childrenIds.indexOf(c=r.substring(0,h)))"width"===r.substring(h+1)?e.push({view1:i,attr1:"width",relation:"leq",view2:"parent"===c?null:c,attr2:"width",constant:0,multiplier:1,priority:u}):"height"===r.substring(h+1)&&e.push({view1:i,attr1:"width",relation:"leq",view2:"parent"===c?null:c,attr2:"height",constant:0,multiplier:1,priority:u});else{let p=parseNumberAndUnitsNoValidation(r,!0);if(p.number){if("px"===p.units)e.push({view1:i,attr1:"width",relation:"leq",constant:parseFloat(p.number),view2:null,attr2:AutoLayout.Attribute.NOTANATTRIBUTE,multiplier:1,priority:u});else if("%"===p.units)e.push({view1:i,attr1:"width",relation:"leq",view2:null,attr2:"width",constant:0,multiplier:parseFloat(p.number)/100,priority:u});else if("em"===p.units)e.push({view1:i,attr1:"width",relation:"leq",view2:null,attr2:"width",constant:0,multiplier:parseFloat(p.number),priority:u});else throw"Invalid values specified for the max-width units on view.id="+i}else throw"Bad value specified for the max-width units on view.id="+i+", value="+r}}if(n){let d=this.getValueAndPriority(n);n=d.id;let f=d.priority,y=-1,g="";if(isNumber(n))e.push({view1:i,attr1:"width",relation:"geq",view2:null,attr2:AutoLayout.Attribute.NOTANATTRIBUTE,constant:parseFloat(n),multiplier:1,priority:f});else if("parent"===n||-1!==this.childrenIds.indexOf(n))e.push({view1:i,attr1:"width",relation:"geq",view2:"parent"===n?null:n,attr2:"width",constant:0,multiplier:1,priority:f});else if(-1!==(y=n.indexOf("."))&&-1!==this.childrenIds.indexOf(g=n.substring(0,y)))"width"===n.substring(y+1)?e.push({view1:i,attr1:"width",relation:"geq",view2:"parent"===g?null:g,attr2:"width",constant:0,multiplier:1,priority:f}):"height"===n.substring(y+1)&&e.push({view1:i,attr1:"width",relation:"geq",view2:"parent"===g?null:g,attr2:"height",constant:0,multiplier:1,priority:f});else{let m=parseNumberAndUnitsNoValidation(n,!0);if(m.number){if("px"===m.units)e.push({view1:i,attr1:"width",relation:"geq",view2:null,attr2:AutoLayout.Attribute.NOTANATTRIBUTE,constant:parseFloat(m.number),multiplier:1,priority:f});else if("%"===m.units)e.push({view1:i,attr1:"width",relation:"geq",view2:null,attr2:"width",constant:0,multiplier:parseFloat(m.number)/100,priority:f});else if("em"===m.units)e.push({view1:i,attr1:"width",relation:"geq",view2:null,attr2:"width",constant:0,multiplier:parseFloat(m.number),priority:f});else throw"Invalid values specified for the min-width units on view.id="+i}else throw"Bad value specified for the min-width units on view.id="+i+", value="+n}}if(o){let v=this.getValueAndPriority(o);o=v.id;let $=v.priority,_=-1,E="";if(isNumber(o))e.push({view1:i,attr1:"height",relation:"leq",view2:null,attr2:AutoLayout.Attribute.NOTANATTRIBUTE,constant:parseFloat(o),multiplier:1,priority:$});else if("parent"===o||-1!==this.childrenIds.indexOf(o))e.push({view1:i,attr1:"height",relation:"leq",view2:"parent"===o?null:o,attr2:"height",constant:0,multiplier:1,priority:$});else if(-1!==(_=o.indexOf("."))&&-1!==this.childrenIds.indexOf(E=o.substring(0,_)))"width"===o.substring(_+1)?e.push({view1:i,attr1:"height",relation:"leq",view2:"parent"===E?null:E,attr2:"width",constant:0,multiplier:1,priority:$}):"height"===o.substring(_+1)&&e.push({view1:i,attr1:"height",relation:"leq",view2:"parent"===E?null:E,attr2:"height",constant:0,multiplier:1,priority:$});else{let A=parseNumberAndUnitsNoValidation(o,!0);if(A.number){if("px"===A.units)e.push({view1:i,attr1:"height",relation:"leq",view2:null,attr2:AutoLayout.Attribute.NOTANATTRIBUTE,constant:parseFloat(A.number),multiplier:1,priority:$});else if("%"===A.units)e.push({view1:i,attr1:"height",relation:"leq",view2:null,attr2:"height",constant:0,multiplier:parseFloat(A.number)/100,priority:$});else if("em"===A.units)e.push({view1:i,attr1:"height",relation:"leq",view2:null,attr2:"height",constant:0,multiplier:parseFloat(A.number),priority:$});else throw"Invalid values specified for the max-height units on view.id="+i}else throw"Bad value specified for the max-height units on view.id="+i+", value="+o}}if(s){let x=this.getValueAndPriority(s);s=x.id;let S=x.priority,T=-1,C="";if(isNumber(s))e.push({view1:i,attr1:"height",relation:"geq",view2:null,attr2:AutoLayout.Attribute.NOTANATTRIBUTE,constant:parseFloat(s),multiplier:1,priority:S});else if("parent"===s||-1!==this.childrenIds.indexOf(o))e.push({view1:i,attr1:"height",relation:"geq",view2:"parent"===s?null:s,attr2:"height",constant:0,multiplier:1,priority:S});else if(-1!==(T=s.indexOf("."))&&-1!==this.childrenIds.indexOf(C=s.substring(0,T)))"width"===s.substring(T+1)?e.push({view1:i,attr1:"height",relation:"geq",view2:"parent"===C?null:C,attr2:"width",constant:0,multiplier:1,priority:S}):"height"===s.substring(T+1)&&e.push({view1:i,attr1:"height",relation:"geq",view2:"parent"===C?null:C,attr2:"height",constant:0,multiplier:1,priority:S});else{let I=parseNumberAndUnitsNoValidation(s,!0);if(I.number){if("px"===I.units)e.push({view1:i,attr1:"height",relation:"geq",view2:null,attr2:AutoLayout.Attribute.NOTANATTRIBUTE,constant:parseFloat(I.number),multiplier:1,priority:S});else if("%"===I.units)e.push({view1:i,attr1:"height",relation:"geq",view2:null,attr2:"height",constant:0,multiplier:parseFloat(I.number)/100,priority:S});else if("em"===I.units)e.push({view1:i,attr1:"height",relation:"geq",view2:null,attr2:"height",constant:0,multiplier:parseFloat(I.number),priority:S});else throw"Invalid values specified for the min-height units on view.id="+i}else throw"Bad value specified for the min-height units on view.id="+i+", value="+s}}},View.prototype.setWidthConstraints=function(t,e,i,r,n){let o=r.indexOf("*"),s=r.indexOf("+"),l=r.indexOf("-"),u=r.indexOf("."),h,c;if(isNumber(r)){if(0===(r="string"==typeof r?parseFloat(r):r)){let p=t.viewMap.get(i);if(-1!==p.dimRatio){e.push({view1:i,attr1:"width",relation:"equ",view2:i,attr2:AutoLayout.Attribute.HEIGHT,constant:0,multiplier:p.dimRatio,priority:n});return}}e.push({view1:i,attr1:"width",relation:"equ",view2:null,attr2:AutoLayout.Attribute.NOTANATTRIBUTE,constant:r,multiplier:1,priority:n})}else if((h=parseNumberAndUnitsNoValidation(r,!0)).number){let d=parseFloat(h.number);if(0===d){let f=t.viewMap.get(i);if(-1!==f.dimRatio){e.push({view1:i,attr1:"width",relation:"equ",view2:i,attr2:AutoLayout.Attribute.HEIGHT,constant:0,multiplier:f.dimRatio,priority:n});return}}switch(h.units){case CssSizeUnits.PX:e.push({view1:i,attr1:"width",relation:"equ",view2:null,attr2:AutoLayout.Attribute.NOTANATTRIBUTE,constant:d,multiplier:1,priority:n});break;case CssSizeUnits.PCT:e.push({view1:i,attr1:"width",relation:"equ",view2:null,attr2:"width",constant:0,multiplier:d/100,priority:n});break;default:throw"width value is bad on id: "+i+", bad value is: "+r}}else if("height"===r)e.push({view1:i,attr1:"width",relation:"equ",view2:i,attr2:"height",constant:0,multiplier:1,priority:n});else if("parent"===r||-1!==this.childrenIds.indexOf(r))e.push({view1:i,attr1:"width",relation:"equ",view2:"parent"===r?null:r,attr2:"width",constant:0,multiplier:1,priority:n});else if(-1!==o&&-1!==s||-1!==s&&-1!==l||-1!==o&&-1!==l)throw"width can only compare using one of `*` or `+` or `-`";else if(-1!==o||-1!==s||-1!==l){let y=quickScan(r,!0);if(3!==y.length&&5!==y.length)throw"invalid expression for width found on view.id="+i+", expression: "+r;let g=y.indexOf("*"),m=y.indexOf("+"),v=y.indexOf("-");if(-1!==g){let $,_;if(isNumber(_=y[0])){if("width"===($="height"===y[2]?i:y[2]))throw"the width is not yet initialized";if(3===y.length)c="height"!==y[2];else if(5===y.length)c="width"===y[4];else throw"error in value specified for width on view.id="+i+"... expression "+r}else if(isNumber(_=y[y.length-1])){if("width"===($="height"===y[0]?i:y[0]))throw"the width is not yet initialized";if(3===y.length)c="height"!==y[0];else if(5===y.length)c="width"===y[2];else throw"error in value specified for width on view.id="+i+"... expression "+r}e.push({view1:i,attr1:"width",relation:"equ",view2:"parent"===$?null:$,attr2:c?"width":"height",constant:0,multiplier:parseFloat(_),priority:n})}else if(-1!==m){let E,A;if(isNumber(A=y[0])){if("width"===(E="height"===y[2]?i:y[2]))throw"the width is not yet initialized";if(3===y.length)c="height"!==y[2];else if(5===y.length)c="width"===y[4];else throw"error in value specified for width on view.id="+cid+"... expression "+r}else if(isNumber(A=y[y.length-1])){if("width"===(E="height"===y[0]?i:y[0]))throw"the width is not yet initialized";if(3===y.length)c="height"!==y[0];else if(5===y.length)c="width"===y[2];else throw"error in value specified for width on view.id="+i+"... expression "+r}e.push({view1:i,attr1:"width",relation:"equ",view2:"parent"===E?null:E,attr2:c?"width":"height",constant:parseFloat(A),multiplier:1,priority:n})}else if(-1!==v){let x,S;if(isNumber(S=y[0]))throw"`value-elem[.width|height]` is not allowed, but `elem[.width|height]-value is allowed on ` view.id="+cid+"... expression "+r;if(isNumber(S=y[y.length-1])){if("width"===(x="height"===y[0]?i:y[0]))throw"the width is not yet initialized";if(3===y.length)c="height"!==y[0];else if(5===y.length)c="width"===y[2];else throw"error in value specified for width on view.id="+i+"... expression "+r}e.push({view1:i,attr1:"width",relation:"equ",view2:"parent"===x?null:x,attr2:c?"width":"height",constant:-1*parseFloat(S),multiplier:1,priority:n})}}else if(-1===o&&-1===s&&-1===l&&-1!==u){let T=r.substring(0,u),C=r.substring(u+1);if("width"===C)c=!0;else if("height"===C)c=!1;else throw"Strange expression found for width on id: "+i+", expression is: "+r;let I;if("parent"===T||"parent"===C)I=null;else if(-1!==this.childrenIds.indexOf(T))I=T;else throw"Bad expression found for width on id: "+i+", expression is: "+r;e.push({view1:i,attr1:"width",relation:"equ",view2:I,attr2:c?"width":"height",constant:0,multiplier:1,priority:n})}else throw"invalid value for width on id: "+i+", bad value is: "+r},View.prototype.setHeightConstraints=function(t,e,i,r,n){let o=r.indexOf("*"),s=r.indexOf("+"),l=r.indexOf("-"),u=r.indexOf("."),h,c;if(isNumber(r)){if(0===(r="string"==typeof r?parseFloat(r):r)){let p=t.viewMap.get(i);if(-1!==p.dimRatio){e.push({view1:i,attr1:AutoLayout.Attribute.HEIGHT,relation:"equ",view2:i,attr2:AutoLayout.Attribute.WIDTH,constant:0,multiplier:1/p.dimRatio,priority:n});return}}e.push({view1:i,attr1:"height",relation:"equ",view2:null,attr2:AutoLayout.Attribute.NOTANATTRIBUTE,constant:r,multiplier:1,priority:n})}else if((h=parseNumberAndUnitsNoValidation(r,!0)).number){let d=parseFloat(h.number);if(0===d){let f=t.viewMap.get(i);if(-1!==f.dimRatio){e.push({view1:i,attr1:AutoLayout.Attribute.HEIGHT,relation:"equ",view2:i,attr2:AutoLayout.Attribute.WIDTH,constant:0,multiplier:1/f.dimRatio,priority:n});return}}switch(h.units){case CssSizeUnits.PX:e.push({view1:i,attr1:"height",relation:"equ",view2:null,attr2:AutoLayout.Attribute.NOTANATTRIBUTE,constant:d,multiplier:1,priority:n});break;case CssSizeUnits.PCT:e.push({view1:i,attr1:"height",relation:"equ",view2:null,attr2:"height",constant:0,multiplier:d/100,priority:n});break;default:throw"height value is bad on id: "+i+", bad value is: "+r}}else if("width"===r)e.push({view1:i,attr1:"height",relation:"equ",view2:i,attr2:"width",constant:0,multiplier:1,priority:n});else if("parent"===r||-1!==this.childrenIds.indexOf(r))e.push({view1:i,attr1:"height",relation:"equ",view2:"parent"===r?null:r,attr2:"height",constant:0,multiplier:1,priority:n});else if(-1!==o&&-1!==s||-1!==s&&-1!==l||-1!==o&&-1!==l)throw"width can only compare using one of `*` or `+` or `-`";else if(-1!==o||-1!==s||-1!==l){let y=quickScan(r,!0);if(3!==y.length&&5!==y.length)throw"invalid expression for height found on view.id="+i+",... "+y;let g=y.indexOf("*"),m=y.indexOf("+"),v=y.indexOf("-");if(-1!==g){let $,_;if(isNumber(_=y[0])){if("height"===($="width"===y[2]?i:y[2]))throw"the height is not yet initialized";if(3===y.length)c="width"!==y[2];else if(5===y.length)c="height"===y[4];else throw"error in value specified for height on view.id="+i+"... expression "+r}else if(isNumber(_=y[y.length-1])){if("height"===($="width"===y[0]?i:y[0]))throw"the height is not yet initialized";if(3===y.length)c="width"!==y[0];else if(5===y.length)c="height"===y[2];else throw"error in value specified for height on view.id="+i+"... expression "+r}e.push({view1:i,attr1:"height",relation:"equ",view2:"parent"===$?null:$,attr2:c?"height":"width",constant:0,multiplier:parseFloat(_),priority:n})}else if(-1!==m){let E,A;if(isNumber(A=y[0])){if("height"===(E="width"===y[2]?i:y[2]))throw"the height is not yet initialized";if(3===y.length)c="width"!==y[2];else if(5===y.length)c="height"===y[4];else throw"error in value specified for height on view.id="+i+"... expression "+r}else if(isNumber(A=y[y.length-1])){if("height"===(E="width"===y[0]?i:y[0]))throw"the height is not yet initialized";if(3===y.length)c="width"!==y[0];else if(5===y.length)c="height"===y[2];else throw"error in value specified for height on view.id="+i+"... expression "+r}e.push({view1:i,attr1:"height",relation:"equ",view2:"parent"===E?null:E,attr2:c?"height":"width",constant:parseFloat(A),multiplier:1,priority:n})}else if(-1!==v){let x,S;if(isNumber(S=y[0]))throw"`value-elem[.width|height]` is not allowed, but `elem[.width|height]-value is allowed on ` view.id="+cid+"... expression "+w;if(isNumber(S=y[y.length-1])){if("height"===(x="width"===y[0]?i:y[0]))throw"the height is not yet initialized";if(3===y.length)c="width"!==y[0];else if(5===y.length)c="height"===y[2];else throw"error in value specified for height on view.id="+i+"... expression "+r}e.push({view1:i,attr1:"height",relation:"equ",view2:"parent"===x?null:x,attr2:c?"height":"width",constant:-1*parseFloat(S),multiplier:1,priority:n})}}else if(-1===o&&-1===s&&-1!==u){let T=r.substring(0,u),C=r.substring(u+1);if("height"===C)c=!0;else if("width"===C)c=!1;else throw"Strange expression found for height on id: "+i+", expression is: "+r;let I;if("parent"===T||"parent"===C)I=null;else if(-1!==this.childrenIds.indexOf(T))I=T;else throw"Bad expression found for height on id: "+i+", expression is: "+r;e.push({view1:i,attr1:"height",relation:"equ",view2:I,attr2:c?"height":"width",constant:0,multiplier:1,priority:n})}else throw"invalid value for height on id: "+i+", bad value is: "+r},View.prototype.toHTML=function(){let t=null,e=this.htmlNode.nodeName.toLowerCase();if(isHTMLTagName(e))return(t="li"===e?document.createElement("ul"):"tbody"===e||"thead"===e||"tfoot"===e?document.createElement("table"):"tr"===e?document.createElement("table"):"td"===e||"th"===e?document.createElement("tr"):"option"===e?document.createElement("select"):document.createElement("div")).appendChild(this.htmlNode),t.innerHTML;throw"Invalid HTML element!"},View.prototype.calculateWrapContentSizes=function(t){let e=this.refIds.get(attrKeys.layout_width),i=this.refIds.get(attrKeys.layout_height);if(e===sizes.WRAP_CONTENT&&i===sizes.WRAP_CONTENT){let r=t.getBoundingClientRect();this.wrapWidth=.813*r.width+"px",this.wrapHeight=.825*r.height+"px",alert(this.wrapWidth+" , "+this.wrapHeight)}else if(e!==sizes.WRAP_CONTENT&&i===sizes.WRAP_CONTENT){t.style.width=e;let n=t.getBoundingClientRect();this.wrapHeight=.825*n.height+"px"}else if(e===sizes.WRAP_CONTENT&&i!==sizes.WRAP_CONTENT){t.style.height=i;let o=t.getBoundingClientRect();this.wrapWidth=.813*o.width+"px"}},Guideline.prototype=Object.create(View.prototype),Guideline.prototype.constructor=Guideline,IncludedView.prototype=Object.create(View.prototype),IncludedView.prototype.constructor=IncludedView,Guideline.prototype.calculateWrapContentSizes=function(t){let e=this.refIds.get(attrKeys.orientation);if(null==e||""===e)throw"Please specify the orientation of the Guideline whose id is `"+this.id+"`";e===orientations.VERTICAL?(this.wrapWidth="1",this.wrapHeight=sizes.MATCH_PARENT):(this.wrapWidth=sizes.MATCH_PARENT,this.wrapHeight="1")},Guideline.prototype.layoutGuide=function(t){let e=this.refIds.get(attrKeys.orientation);if(!e||""===e)throw"Please specify the orientation of the Guideline whose id is `"+this.id+"`";let i=this.id,r=this.refIds.get(attrKeys.layout_constraintGuide_percent),n=this.refIds.get(attrKeys.layout_constraintGuide_begin),o=this.refIds.get(attrKeys.layout_constraintGuide_end);if(isEmpty(r)&&isEmpty(n)&&isEmpty(o))throw"Please specify either constraint-guide-(percentage|begin|end) for the Guideline whose id is `"+this.id+"`";let s=0;if(!isEmpty(r)){if(!isEmpty(n)||!isEmpty(o))throw"Conflicting guide constraints! only one of guide_percent, guide_begin and guide_end hould be set!";if(endsWith(r,"%")){if(isNaN(s=parseFloat(r)))throw"Please specify a floating point number between 0 and 1 to signify 0 - 100% of width";s=s>1?s/100:s}else if(isNaN(s=parseFloat(r)))throw"Please specify a floating point number between 0 and 1 to signify 0 - 100% of width";else{if(s>1)throw"The guide percentage may not be greater than 1";if(s<0)throw"The guide percentage may not be less than 0"}if(e===orientations.VERTICAL){t.push({view1:i,attr1:"height",relation:"equ",view2:null,attr2:"height",constant:0,multiplier:1,priority:AutoLayout.Priority.REQUIRED}),t.push({view1:i,attr1:"width",relation:"equ",view2:null,attr2:AutoLayout.Attribute.NOTANATTRIBUTE,constant:.1,multiplier:1,priority:AutoLayout.Priority.REQUIRED});let l=i+"_dummy_"+ULID.ulid();t.push({view1:l,attr1:"left",relation:"equ",view2:null,attr2:"left",constant:0,multiplier:1,priority:AutoLayout.Priority.REQUIRED}),t.push({view1:l,attr1:"width",relation:"equ",view2:null,attr2:"width",constant:1,multiplier:s,priority:AutoLayout.Priority.REQUIRED}),t.push({view1:i,attr1:"left",relation:"equ",view2:l,attr2:"right",constant:1,multiplier:1,priority:AutoLayout.Priority.REQUIRED})}else if(e===orientations.HORIZONTAL){t.push({view1:i,attr1:"width",relation:"equ",view2:null,attr2:"width",constant:0,multiplier:1,priority:AutoLayout.Priority.REQUIRED}),t.push({view1:i,attr1:"height",relation:"equ",view2:null,attr2:AutoLayout.Attribute.NOTANATTRIBUTE,constant:.1,multiplier:1,priority:AutoLayout.Priority.REQUIRED});let u=i+"_dummy_"+ULID.ulid();t.push({view1:u,attr1:"top",relation:"equ",view2:null,attr2:"top",constant:0,multiplier:1,priority:AutoLayout.Priority.REQUIRED}),t.push({view1:u,attr1:"height",relation:"equ",view2:null,attr2:"height",constant:1,multiplier:s,priority:AutoLayout.Priority.REQUIRED}),t.push({view1:i,attr1:"top",relation:"equ",view2:u,attr2:"bottom",constant:0,multiplier:1,priority:AutoLayout.Priority.REQUIRED})}}if(!isEmpty(n)){if(!isEmpty(r)||!isEmpty(o))throw"Conflicting guide constraints! only one of `guide_percent`, `guide_begin` and `guide_end` should be set!";if(isNumber(n)||endsWith(n,"px")&&isNumber(parseInt(n)))n=parseFloat(n);else throw"`guide_begin` must be a unitless number or be specified in pixels";if(isNaN(n))throw"please specify a number for `guide_begin`";s=n,e===orientations.VERTICAL?(t.push({view1:i,attr1:"height",relation:"equ",view2:null,attr2:"height",constant:0,multiplier:1,priority:1e3}),t.push({view1:i,attr1:"width",relation:"equ",view2:null,attr2:AutoLayout.Attribute.NOTANATTRIBUTE,constant:.1,multiplier:1,priority:1e3}),t.push({view1:i,attr1:"left",relation:"equ",view2:null,attr2:"left",constant:s,multiplier:1,priority:1e3})):e===orientations.HORIZONTAL&&(t.push({view1:i,attr1:"width",relation:"equ",view2:null,attr2:"width",constant:0,multiplier:1,priority:1e3}),t.push({view1:i,attr1:"height",relation:"equ",view2:null,attr2:AutoLayout.Attribute.NOTANATTRIBUTE,constant:.1,multiplier:1,priority:1e3}),t.push({view1:i,attr1:"top",relation:"equ",view2:null,attr2:"top",constant:s,multiplier:1,priority:1e3}))}if(!isEmpty(o)){if(!isEmpty(r)||!isEmpty(n))throw"Conflicting guide constraints! only one of `guide_percent`, `guide_begin` and `guide_end` should be set!";if(isNumber(o)||endsWith(o,"px")&&isNumber(parseInt(o)))o=parseFloat(o);else throw"`guide_end` must be a unitless number or be specified in pixels";if(isNaN(o))throw"please specify a number for `guide_end`";s=o,e===orientations.VERTICAL?(t.push({view1:i,attr1:"height",relation:"equ",view2:null,attr2:"height",constant:0,multiplier:1,priority:1e3}),t.push({view1:i,attr1:"width",relation:"equ",view2:null,attr2:AutoLayout.Attribute.NOTANATTRIBUTE,constant:.1,multiplier:1,priority:1e3}),t.push({view1:i,attr1:"right",relation:"equ",view2:null,attr2:"right",constant:-s,multiplier:1,priority:1e3})):e===orientations.HORIZONTAL&&(t.push({view1:i,attr1:"width",relation:"equ",view2:null,attr2:"width",constant:0,multiplier:1,priority:1e3}),t.push({view1:i,attr1:"height",relation:"equ",view2:null,attr2:AutoLayout.Attribute.NOTANATTRIBUTE,constant:.1,multiplier:1,priority:1e3}),t.push({view1:i,attr1:"bottom",relation:"equ",view2:null,attr2:"bottom",constant:-s,multiplier:1,priority:1e3}))}},IncludedView.prototype.calculateWrapContentSizes=function(t){this.wrapWidth=300,this.wrapHeight=320},Scanner.prototype.scan=function(){let t=this.input,e=[];this.tokens.sort(function(t,e){return e.length-t.length});for(let i=0;i<t.length;i++)for(let r=0;r<this.tokens.length;r++){let n=this.tokens[r],o=n.length;if(o>0&&i+o<=t.length&&t.substring(i,i+o)===n){0!==i&&(e[e.length]=t.substring(0,i)),this.includeTokensInOutput&&(e[e.length]=n),t=t.substring(i+o),i=-1;break}}return 0!==t.length&&(e[e.length]=t),e},StringBuffer.prototype.append=function(t){return this.dataArray.push(t),this},StringBuffer.prototype.toString=function(){return this.dataArray.join("")},StringBuffer.prototype.length=function(){return this.dataArray.length},StringBuffer.prototype.reset=function(){return this.dataArray.length=0,this};let cloneText=function(t){if(t&&"string"==typeof t)return(" "+t).slice(1);throw Error("Invalid text supplied.")};function startsWith(t,e){if("string"!=typeof t||"string"!=typeof e)return!1;{let i=t.length,r=e.length;return i===r?t===e:!(i<r)&&0===t.indexOf(e,0)}}function endsWith(t,e){if("string"!=typeof t||"string"!=typeof e)return!1;{let i=t.length,r=e.length;return i===r?t===e:!(i<r)&&t.lastIndexOf(e)===i-r}}function contain(t,e){if("string"!=typeof t||"string"!=typeof e)return!1;{let i=t.length,r=e.length;return i===r?t===e:!(i<r)&&-1!==t.indexOf(e,0)}}function endsWithAnyOf(t,e){for(var i=e.length,r=0;r<i;r++)if(endsWith(t,e[r]))return!0;return!1}function indexOfEnder(t,e){for(var i=e.length,r=0;r<i;r++)if(endsWith(t,e[r]))return r;return -1}function startsWithAnyOf(t,e){for(var i=e.length,r=0;r<i;r++)if(startsWith(t,e[r]))return!0;return!1}function indexOfStarter(t,e){for(var i=e.length,r=0;r<i;r++)if(startsWith(t,e[r]))return r;return -1}function containsAnyOf(t,e){let i=e.length;for(let r=0;r<i;r++)if(contain(t,e[r]))return!0;return!1}function reverse(t){for(var e=t.length,i="",r=e-1;r>=0;r--)i+=t.charAt(r);return i}function isWhiteSpacesOnly(t){return null===t||!t||!/\S/.test(t)}function isEmpty(t){return!t||!/\S/.test(t)}let isNumber=function(t){return null!==t&&""!==t&&!1===isNaN(t)};function isOneDimArray(t){return"[object Array]"===Object.prototype.toString.call(t)}function addClass(t,e){t&&e&&t.classList.add(e)}function removeClass(t,e){t&&e&&t.classList.remove(e)}function isDomEntity(t){return"object"==typeof t&&void 0!==t.nodeType}const attrKeys={id:"id",layout:"layout",layout_width:"w",layout_height:"h",layout_maxWidth:"maxW",layout_maxHeight:"maxH",layout_minWidth:"minW",layout_minHeight:"minH",layout_margin:"m",layout_marginStart:"ms",layout_marginEnd:"me",layout_marginTop:"mt",layout_marginBottom:"mb",layout_marginHorizontal:"mh",layout_marginVertical:"mv",layout_constraintTop_toTopOf:"tt",layout_constraintBottom_toBottomOf:"bb",layout_constraintStart_toStartOf:"ss",layout_constraintEnd_toEndOf:"ee",layout_constraintTop_toBottomOf:"tb",layout_constraintStart_toEndOf:"se",layout_constraintEnd_toStartOf:"es",layout_constraintBottom_toTopOf:"bt",layout_constraintCenterXAlign:"cx",layout_constraintCenterYAlign:"cy",layout_constraintStart_toCenterX:"scx",layout_constraintCenterX_toStart:"cxs",layout_constraintEnd_toCenterX:"ecx",layout_constraintCenterX_toEnd:"cxe",layout_constraintTop_toCenterY:"tcy",layout_constraintCenterY_toTop:"cyt",layout_constraintBottom_toCenterY:"bcy",layout_constraintCenterY_toBottom:"cyb",layout_constraint:"data-const",layout_constraintGuide:"data-guide",layout_constraintGuideColor:"data-guide-color",layout_popup:"popup",layout_menuLeft:"menu-left",layout_menuRight:"menu-right",layout_src:"src",layout_constraintGuide_percent:"guide-pct",layout_constraintGuide_begin:"guide-begin",layout_constraintGuide_end:"guide-end",layout_horizontalBias:"hor-bias",layout_verticalBias:"ver-bias",dimension_ratio:"dim-ratio",orientation:"orient"},sizes={MATCH_PARENT:"match_parent",WRAP_CONTENT:"wrap_content"},orientations={VERTICAL:"vertical",HORIZONTAL:"horizontal",GRID:"grid"},CssSizeUnits={VMAX:"vmax",VMIN:"vmin",REM:"rem",EM:"em",PT:"pt",PX:"px",CM:"cm",IN:"in",MM:"mm",VM:"vm",VH:"vh",VW:"vw",PC:"pc",EX:"ex",CH:"ch",GD:"gd",PCT:"%",Q:"q"},CssSizeUnitsValues=getObjectValues(CssSizeUnits).sort(function(t,e){return e.length-t.length});function getObjectValues(t){var e=[];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.push(t[i]);return e}function StyleElement(t,e){if("string"==typeof t&&"string"==typeof e)this.attr=t.trim(),this.value=e.trim();else throw Error("attr or value must be string...`attr` = "+t+", `value` = "+e)}function Style(t,e){if(e||(e=[]),!isOneDimArray(e))throw Error("One dimensional array of style elements expected");this.name=t.trim(),this.styleElements=e}function injectStyleSheets(t,e){if("[object Array]"===Object.prototype.toString.call(e)){let i=new StringBuffer("");i.append(t.innerHTML);for(let r=0;r<e.length;r++){let n=e[r];if("Style"!==n.constructor.name)throw Error("Please put only styles in the supplied array");if(void 0===n.name||null===n.name||""===n.name)throw"Please define the name of this style!... e.g #name or .name";i.append(n.styleSheetEntry(n.name)),i.append("\n")}t.innerHTML=i.toString(),document.getElementsByTagName("head")[0].appendChild(t)}else throw Error("Please supply an array of styles")}function indexOfSelector(t,e){let i=t.innerHTML,r=new Scanner(i,!0,["{","}"]).scan();for(let n=0;n<r.length;n++)if("{"===r[n]&&n-1>=0&&e.trim()===r[n-1].trim())return n-1;return -1}function sheetContainsSelector(t,e){return -1!==indexOfSelector(t.innerHTML,e)}function getAllStyles(t){let e=t.innerHTML,i=new Scanner(e,!0,["{","}",";"]).scan();for(let r=0;r<i.length;r++)";"===i[r]&&r+1<i.length&&!1===startsWith(i[r+1],"\n")&&(i[r-1]=i[r-1]+i[r]+i[r+1],i.splice(r,1),i.splice(r,1));let n=[];for(let o=0;o<i.length;o++){if("{"===i[o]&&o-1>=0){let s=i[o-1].trim(),l=new Style(s,[]);n.push(l)}";"===i[o]&&n[n.length-1].addStyleElementCss(i[o-1]+";")}return n}function getStyle(t,e){if(e)e=e.trim();else throw Error("No selector supplied!");let i=t.innerHTML,r=new Scanner(i,!0,[e,"{","}",";"]).scan(),n=!1,o;for(let s=0;s<r.length;s++){if(r[s].trim()===e&&s+1<r.length){let l=s+1;for(;"{"!==r[l]&&l<r.length;){if(""!==r[l].trim())throw Error("Invalid token found in browser style sheet! File a bug report with browser manufacturer!! Description:\n                  No token like: ``"+r[l]+"`` should exist between ``"+e+"`` and a ``{``");l++}o=new Style(e,[]),n=!0,s=l}if(!0===n){if(";"===r[s])o.addStyleElementCss(r[s-1]+";");else if("}"===r[s])return o}}return null}function editSelectorInStyleSheet(t,e){if("Style"===e.constructor.name){let i=e.name,r=getAllStyles(t),n=!1;for(let o=0;o<r.length;o++){let s=r[o];if(s.name.trim()===i){n=!0;for(let l=0;l<e.styleElements.length;l++){let u=e.styleElements[l];s.addStyleElement(u.attr,u.value,!1)}break}}return n||r.push(e),t.innerHTML="",injectStyleSheets(t,r),!0}throw Error("Invalid style object supplied")}function updateOrCreateSelectorInStyleSheet(t,e){if("Style"===e.constructor.name){let i=e.name,r=getAllStyles(t),n=!1;for(let o=0;o<r.length;o++){let s=r[o];s.name.trim()===i&&(n=!0,s.styleElements=e.styleElements)}return n||r.push(e),t.innerHTML="",injectStyleSheets(t,r),!0}throw Error("Invalid style object supplied")}function updateOrCreateSelectorsInStyleSheet(t,e){if(!isOneDimArray(e))throw Error("A one dimensional array expected for `newStyles`");let i=getAllStyles(t);for(let r=0;r<e.length;r++){let n=e[r];if("Style"===n.constructor.name){let o=n.name,s=!1;for(let l=0;l<i.length;l++){let u=i[l];u.name.trim()===o&&(s=!0,u.styleElements=n.styleElements)}s||i.push(n)}else throw Error("Invalid style object supplied")}t.innerHTML="",injectStyleSheets(t,i)}function getScrollBarWidth(){var t=document.createElement("div");t.style.visibility="hidden",t.style.overflow="scroll",t.style.msOverflowStyle="scrollbar",document.body.appendChild(t);var e=document.createElement("div");t.appendChild(e);var i=t.offsetWidth-e.offsetWidth;return t.parentNode.removeChild(t),i}function parseNumberAndUnitsNoValidation(t,e){if("number"==typeof t&&(t+=""),"string"!=typeof t)return{number:null,units:null};if(isNumber(t))return e&&!0===e?{number:t,units:"px"}:{number:null,units:null};let i="",r=t.length-1;for(;r>=0;r--){let n=t.substring(r,r+1);if("0"!==n&&"1"!==n&&"2"!==n&&"3"!==n&&"4"!==n&&"5"!==n&&"6"!==n&&"7"!==n&&"8"!==n&&"9"!==n);else{i=t.substring(0,r+1);break}}let o=t.substring(r+1);return -1!==CssSizeUnitsValues.indexOf(o)&&isNumber(i)?{number:i,units:o}:{number:null,units:null}}function parseNumberAndUnits(t,e){if("string"!=typeof t)throw Error("parses only string input");if(e&&!0===e&&isNumber(t)&&(t+="px"),isNumber(t)){if(e&&!0===e)return{number:t,units:"px"};throw"No units specified for number: "+t}let i="",r=t.length-1;for(;r>=0;r--){let n=t.substring(r,r+1);if("0"!==n&&"1"!==n&&"2"!==n&&"3"!==n&&"4"!==n&&"5"!==n&&"6"!==n&&"7"!==n&&"8"!==n&&"9"!==n);else{i=t.substring(0,r+1);break}}let o=t.substring(r+1);if(-1===CssSizeUnitsValues.indexOf(o))throw Error("This unit is not a valid css unit.. Use one of:\n "+CssSizeUnitsValues);if(!isNumber(i))throw Error("The number is not a valid number!..."+i);return{number:i,units:o}}function getUrls(){let t=document.getElementsByTagName("script");for(let e=0;e<t.length;e++){let i=t[e].src,r="layman.js",n=i.length,o=r.length;if(i.lastIndexOf(r)===n-o){scriptURL=i.substring(0,n-o),projectURL=window.location.href;let s=0;for(;projectURL.charAt(s)===scriptURL.charAt(s);)s+=1;return[projectURL=projectURL.substring(0,s),scriptURL]}}return null}StyleElement.prototype.setAttr=function(t){this.attr=t},StyleElement.prototype.getAttr=function(){return this.attr},StyleElement.prototype.setValue=function(t){this.value=t},StyleElement.prototype.getValue=function(){return this.value},StyleElement.prototype.getCss=function(){return this.attr+":"+this.value+";"},Style.prototype.setName=function(t){this.name=t},Style.prototype.getName=function(){return this.name},Style.prototype.setStyleElements=function(t){this.styleElements=t},Style.prototype.getStyleElements=function(){return this.styleElements},Style.prototype.isEmpty=function(){return 0===this.styleElements.length},Style.prototype.styleSheetEntry=function(t){this.name=t;let e=new StringBuffer;if(0===this.styleElements.length)return"";e.append(t).append(" { \n");for(let i=0;i<this.styleElements.length;i++){let r=this.styleElements[i];e.append(r.getCss()).append("\n")}return e.append("} \n"),e.toString()},Style.prototype.injectStyleSheet=function(){if(void 0===this.name||null===this.name||""===this.name)throw"Please define the name of this style!... e.g #name or .name";let t=document.createElement("style");this.styleElements.length>0&&(t.setAttribute("type","text/css"),t.innerHTML=this.styleSheetEntry(this.name),document.getElementsByTagName("head")[0].appendChild(t))},Style.prototype.toOptions=function(){let t={};for(let e=0;e<this.styleElements.length;e++){let i=getObjectValues(this.styleElements[e]);t[i[0]]=i[1]}return t},Style.prototype.addFromOptions=function(t){for(let e in t)this.addStyleElement(e,t[e])},Style.prototype.getCss=function(){let t=new StringBuffer;if(0===this.styleElements.length)return"";t.append(" style = '");for(let e=0;e<this.styleElements.length;e++){let i=this.styleElements[e];t.append(i.getCss())}return t.append("' "),t.toString()},Style.prototype.rawCss=function(){let t=new StringBuffer;if(0===this.styleElements.length)return"";t.append(" ");for(let e=0;e<this.styleElements.length;e++){let i=this.styleElements[e];t.append(i.getCss())}return t.append(" "),t.toString()},Style.prototype.applyInline=function(t){if(t){if(isDomEntity(t))for(let e=0;e<this.styleElements.length;e++){let i=this.styleElements[e];t.style[i.attr]=i.value}else throw Error("Invalid html element: "+t)}else throw Error("Please specify an html element.")},Style.prototype.removeStyleElementObj=function(t){if(StyleElement.prototype.isPrototypeOf(t)){let e=t.getAttr();for(let i=0;i<this.styleElements.length;i++)if(this.styleElements[i].getAttr()===e){this.styleElements.splice(i,1);return}}},Style.prototype.removeStyleElementByAttr=function(t){for(let e=0;e<this.styleElements.length;e++)if(this.styleElements[e].getAttr()===t){this.styleElements.splice(e,1);return}},Style.prototype.addStyleElement=function(t,e,i){if(i)this.styleElements.push(new StyleElement(t,e));else{for(let r=0;r<this.styleElements.length;r++)if(this.styleElements[r].getAttr()===t){this.styleElements[r]=new StyleElement(t,e);return}this.styleElements.push(new StyleElement(t,e))}},Style.prototype.addStyleElementsArray=function(t,e){for(let i=0;i<t.length;i++){let r=t[i];this.addStyleElementObj(r,e)}},Style.prototype.addStyleElementObj=function(t,e){if(StyleElement.prototype.isPrototypeOf(t)){if(e)this.styleElements.push(t);else{let i=t.getAttr();for(let r=0;r<this.styleElements.length;r++)if(this.styleElements[r].getAttr()===i){this.styleElements[r]=t;return}this.styleElements.push(t)}}else throw Error("Invalid Style specified.")},Style.prototype.clone=function(t){let e=[];for(let i=0;i<this.styleElements.length;i++){let r=this.styleElements[i];e.push(new StyleElement(r.attr,r.value))}return t||(t=this.name),new Style(t,e)},Style.prototype.addStyleElementCss=function(t,e){if(t){let i=!0===contain(t=t.trim(),"url"),r=t.indexOf(":"),n=i?t.lastIndexOf(";"):t.indexOf(";");if(-1!==n&&n===t.length-1&&-1!==r){let o=t.substring(0,r),s=t.substring(r+1,n);if(-1===o.indexOf(":")&&-1===o.indexOf(";")&&(-1===s.indexOf("url")&&-1===s.indexOf(":")&&-1===s.indexOf(";")||"-1"!==s.indexOf("url"))){let l=new StyleElement(o,s);if(e)this.styleElements.push(l);else{for(let u=0;u<this.styleElements.length;u++)if(this.styleElements[u].getAttr()===o){this.styleElements[u]=l;return}this.styleElements.push(l)}}else throw Error("Weird css line expression____!"+t)}else throw Error("Invalid css line expression!..."+t)}else throw Error("No css line supplied!")},Style.prototype.getValue=function(t){for(let e=0;e<this.styleElements.length;e++){let i=this.styleElements[e];if(i.attr===t)return i.value}return null};const SideMenuTypes={LEFT:"left",RIGHT:"right"};function SideMenuX(t){if(!t)throw Error("Please supply the options for creating the menu.");if(this.id="","string"==typeof t.id)this.id=t.id;else throw Error("Please supply the id of the menu");if(this.width=-1,this.parsedWidth=-1,"number"==typeof t.width)this.width=t.width+"px";else if("string"==typeof t.width){if(isNumber(parseInt(t.width)))this.width=t.width;else throw"invalid value specified for width!"}else throw Error('Please supply the width of the menu.. e.g. `width:"300px"` or `width:"30%"`');if(this.menuType=SideMenuTypes.LEFT,t.menuType){if(t.menuType===SideMenuTypes.LEFT||t.menuType===SideMenuTypes.RIGHT)this.menuType=t.menuType;else throw Error("Invalid menu type specified! Use either of `"+SideMenuTypes.PUSH+"` or `"+SideMenuTypes.OVERLAY+"`")}if(this.layout="","string"==typeof t.layout)this.layout=t.layout;else throw Error("Please supply the name of the xml layout");this.background="#fff",t.background&&(this.background=t.background),this.registry={};var e=document.body,i=document.documentElement;e.scrollWidth,e.offsetWidth,i.clientWidth,i.scrollWidth,i.offsetWidth;let r=Math.max(e.scrollHeight,e.offsetHeight,i.clientHeight,i.scrollHeight,i.offsetHeight);this.overlayStyle=new Style("."+this.overlayClass(),[]),this.frameStyle=new Style("."+this.containerClass(),[]),this.closeBtnStyle=new Style("."+this.closeBtnClass(),[]),this.noScrollStyle=new Style(".noscroll",[]);let n=2e3;this.overlayStyle.addFromOptions({display:"block",visibility:"visible",opacity:"0.8",position:"fixed","background-color":"black",top:"0",left:"0",bottom:"0",right:"0","z-index":n+""}),this.noScrollStyle.addFromOptions({overflow:"hidden"});initFrameCss:{n+=10;let o={width:this.width,height:r+"px",position:"fixed",top:"0",left:"0",padding:"0","z-index":n+"","background-color":this.background,"overflow-x":"hidden","overflow-y":"auto",transition:"0.5s"};o[this.menuType]="0",this.frameStyle.addFromOptions(o)}initCloseBtnStyle:{let s={top:"12px",position:"fixed","font-size":"8em","font-weight":"bold","font-family":"monospace",cursor:"pointer",color:"white","background-color":"transparent",border:"none",padding:"none"};this.menuType===SideMenuTypes.LEFT?s[SideMenuTypes.RIGHT]="18px":s[SideMenuTypes.LEFT]="18px",this.closeBtnStyle.addFromOptions(s)}this.onOpen=function(){},t.onOpen&&"[object Function]"===({}).toString.call(t.onOpen)?this.onOpen=t.onOpen:this.onOpen=function(){},this.onClose=function(){},t.onClose&&"[object Function]"===({}).toString.call(t.onClose)?this.onClose=t.onClose:this.onClose=function(){},this.registerStyle(this.overlayStyle),this.registerStyle(this.noScrollStyle),this.registerStyle(this.frameStyle),this.registerStyle(this.closeBtnStyle),this.rootView=null}SideMenuX.prototype.registerStyle=function(t){this.registry[t.name]=t},SideMenuX.prototype.hide=function(){var t=document.getElementById(this.overlayId()),e=document.getElementById(this.containerId());return t&&(t.style.display="none"),e&&this.closeMenu(),removeClass(document.body,this.noScrollStyle.name.substring(1)),this.onClose(),this},SideMenuX.prototype.open=function(){return this.build(),this},SideMenuX.prototype.build=function(){var t=this;let e=!1;var i=document.getElementById(this.overlayId()),r=document.getElementById(this.containerId());i||(e=!0,(i=document.createElement("div")).setAttribute("id",this.overlayId()),addClass(i,this.overlayClass()),document.body.appendChild(i)),i.style.display="block",i.onclick=function(){t.hide()},r||((r=document.createElement("div")).setAttribute("id",this.containerId()),addClass(r,this.containerClass()),r.innerHTML=this.layout.trim(),document.body.appendChild(r));let n=document.getElementById(this.closeBtnId());if(n||((n=document.createElement("input")).setAttribute("id",this.closeBtnId()),addClass(n,this.closeBtnClass()),n.setAttribute("type","button"),n.value="",i.appendChild(n)),n.onclick=function(){t.hide()},e){let o=document.createElement("style");o.setAttribute("type","text/css");let s=new StringBuffer;for(var l in this.registry)s.append(this.registry[l].styleSheetEntry(l));o.innerHTML=s.toString(),document.getElementsByTagName("head")[0].appendChild(o);let u=new Page(r);u.layout(),page.subPages.set(r.id,u),t.openMenu(),t.rootView=r,t.parsedWidth=parseInt(window.getComputedStyle(r).width)}return this.addDragEvents(i,r),this.openMenu(),this},SideMenuX.prototype.addDragEvents=function(t,e){let i=this,r=!0;e.onmousemove=function(t){},e.onmousedown=function(t){((t=window.event||t).target===this||t.target===i.rootView)&&(r=!0,e.onmousemove=function(t){((t=window.event||t).target===this||t.target===i.rootView)&&!0===r&&t.pageX<i.parsedWidth&&(e.style.width=t.pageX+2+"px",e.style.transition="0.5s")},e.onmouseup=function(t){((t=window.event||t).target===this||t.target===i.rootView)&&(r=!1,e.style.transition="0.5s",e.onmousemove=function(t){},t.pageX<i.parsedWidth/3?i.hide():i.openMenu())})},t.onmouseup=function(t){t.preventDefault(),r=!1},t.onmousemove=function(t){((ev=window.event||ev).target===this||ev.target===i.rootView)&&!0===r&&(ev.pageX<i.parsedWidth?(e.style.width=ev.pageX+2+"px",e.style.transition="0.5s"):ev.pageX>=i.parsedWidth+80&&(e.style.width=i.parsedWidth+"px"))}},SideMenuX.prototype.containerClass=function(){return this.id+"_side_menux_frame_class"},SideMenuX.prototype.overlayClass=function(){return this.id+"_side_menux_overlay_class"},SideMenuX.prototype.overlayId=function(){return this.id+"_side_menux_overlay_id"},SideMenuX.prototype.closeBtnClass=function(){return this.id+"_side_menux_close_btn_class"},SideMenuX.prototype.closeBtnId=function(){return this.id+"_side_menux_close_btn_class"},SideMenuX.prototype.containerId=function(){return this.id},SideMenuX.prototype.openMenu=function(){document.getElementById(this.containerId()).style.width=this.width,addClass(document.body,this.noScrollStyle.name.substring(1)),this.onOpen()},SideMenuX.prototype.closeMenu=function(){document.getElementById(this.containerId()).style.width="0"};var popupZIndex=1e3;function Popup(t){if(!t)throw Error("No options specified for creating this popup");if(!t.id||"string"!=typeof t.id)throw Error("Hi! You have not specified a value for options.layitId! Popup cannot be created");if(this.id=t.id,"string"!=typeof t.width&&(console.log("Hi! options.width must be a valid css dimension! Defaulting to 90%"),t.width="90%"),t.width||(t.width="90%"),"string"!=typeof t.height&&(console.log("Hi! options.height must be a valid css dimension!  Defaulting to 90%"),t.height="90%"),t.height||(t.height="90%"),t.bg&&"string"==typeof t.bg?this.background=t.bg:(console.log("Hi! options.bg must be a valid html color!  defaulting to white"),this.background="#ffffff"),this.layout="","string"==typeof t.layout)this.layout=t.layout;else throw Error("Please supply the name of the xml layout");this.closeOnClickOutside=!0,"boolean"==typeof t.closeOnClickOutside&&(this.closeOnClickOutside=t.closeOnClickOutside),t.onOpen&&"[object Function]"===({}).toString.call(t.onOpen)?this.onOpen=t.onOpen:this.onOpen=function(){},t.onClose&&"[object Function]"===({}).toString.call(t.onClose)?this.onClose=t.onClose:this.onClose=function(){},this.registry={};var e=document.body,i=document.documentElement;let r=Math.max(e.scrollWidth,e.offsetWidth,i.clientWidth,i.scrollWidth,i.offsetWidth),n=Math.max(e.scrollHeight,e.offsetHeight,i.clientHeight,i.scrollHeight,i.offsetHeight);this.opaqueBgStyle=new Style("#"+this.overlayId(),[]),this.containerStyle=new Style("#"+this.containerId(),[]),this.noScrollStyle=new Style(".noscroll",[]),this.closeBtnStyle=new Style("#"+this.closeBtnId(),[]),popupZIndex+=10,this.opaqueBgStyle.addFromOptions({display:"block",visibility:"visible",opacity:"0.8",position:"fixed","background-color":"black",top:"0",left:"0",bottom:"0",right:"0","z-index":popupZIndex+"",width:r+"px",height:n+"px"}),this.noScrollStyle.addFromOptions({overflow:"hidden"}),this.width=t.width,this.height=t.height;var o=this.width,s=this.height,l=this.background;if(this.containerStyle.addFromOptions({position:"absolute",left:"calc(50% - "+o+" / 2 )",top:"calc(50% - "+s+" / 2 )",visibility:"visible",display:"block",padding:"0px",margin:"0px",overflow:"auto",width:o,height:s,"background-color":l,"z-index":popupZIndex+1+"","border-radius":"0.3em"}),"object"==typeof t.containerStyle){var u=t.containerStyle;for(var h in u)this.containerStyle.addStyleElement(h,u[h])}this.closeBtnStyle.addFromOptions({top:"0.1em",right:"0.1em",position:"fixed","font-size":"6rem","font-weight":"bold","font-family":"monospace",cursor:"pointer",color:"white","background-color":"transparent",border:"none",padding:"none"}),this.registerStyle(this.opaqueBgStyle),this.registerStyle(this.containerStyle),this.registerStyle(this.closeBtnStyle),this.registerStyle(this.noScrollStyle)}"use strict";Popup.prototype.registerStyle=function(t){this.registry[t.name]=t},Popup.prototype.hide=function(){var t=document.getElementById(this.overlayId()),e=document.getElementById(this.containerId());return t&&(t.style.display="none"),e&&(e.style.display="none"),removeClass(document.body,this.noScrollStyle.name.substring(1)),this.onClose(),this},Popup.prototype.open=function(){return this.build(),this},Popup.prototype.build=function(){var t=this;let e=!1;var i=document.getElementById(this.overlayId()),r=document.getElementById(this.containerId());i||(e=!0,(i=document.createElement("div")).setAttribute("id",this.overlayId()),addClass(i,this.overlayClass()),document.body.appendChild(i)),i.style.display="block",i.onclick=function(){t.closeOnClickOutside&&t.hide()},r?r.style.display="block":((r=document.createElement("div")).setAttribute("id",this.containerId()),addClass(r,this.containerClass()),r.innerHTML=this.layout,document.body.appendChild(r));let n=document.getElementById(this.closeBtnId());if(n||((n=document.createElement("input")).setAttribute("id",this.closeBtnId()),addClass(n,this.closeBtnClass()),n.type="button",n.value="",i.appendChild(n)),n.onclick=function(){t.hide()},e){var o=document.createElement("style");o.setAttribute("type","text/css");var s=new StringBuffer;for(var l in this.registry)s.append(this.registry[l].styleSheetEntry(l));o.innerHTML=s.toString(),document.getElementsByTagName("head")[0].appendChild(o);let u=new Page(r);u.layout(),page.subPages.set(r.id,u)}return addClass(document.body,this.noScrollStyle.name.substring(1)),t.onOpen(),this},Popup.prototype.overlayId=function(){return this.id+"_main_overlay"},Popup.prototype.overlayClass=function(){return this.id+"_main_overlay_class"},Popup.prototype.containerId=function(){return this.id},Popup.prototype.containerClass=function(){return this.id+"_container_class"},Popup.prototype.closeBtnClass=function(){return this.id+"_close_btn_class"},Popup.prototype.closeBtnId=function(){return this.id+"_close_btn_class"},function(t,e){"function"==typeof define&&define.amd?define(e):"object"==typeof exports?module.exports=e():t.ResizeSensor=e()}("undefined"!=typeof window?window:this,function(){if("undefined"==typeof window)return null;var t="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")(),e=t.requestAnimationFrame||t.mozRequestAnimationFrame||t.webkitRequestAnimationFrame||function(e){return t.setTimeout(e,20)},i=t.cancelAnimationFrame||t.mozCancelAnimationFrame||t.webkitCancelAnimationFrame||function(e){t.clearTimeout(e)};function r(t,e){var i=Object.prototype.toString.call(t),r="[object Array]"===i||"[object NodeList]"===i||"[object HTMLCollection]"===i||"[object Object]"===i||"undefined"!=typeof jQuery&&t instanceof jQuery||"undefined"!=typeof Elements&&t instanceof Elements,n=0,o=t.length;if(r)for(;n<o;n++)e(t[n]);else e(t)}function n(t){if(!t.getBoundingClientRect)return{width:t.offsetWidth,height:t.offsetHeight};var e=t.getBoundingClientRect();return{width:Math.round(e.width),height:Math.round(e.height)}}function o(t,e){Object.keys(e).forEach(function(i){t.style[i]=e[i]})}var s=function(t,l){var u=0;function h(){var t,e,i=[];this.add=function(t){i.push(t)},this.call=function(r){for(t=0,e=i.length;t<e;t++)i[t].call(this,r)},this.remove=function(r){var n=[];for(t=0,e=i.length;t<e;t++)i[t]!==r&&n.push(i[t]);i=n},this.length=function(){return i.length}}r(t,function(t){!function t(i,r){if(i){if(i.resizedAttached){i.resizedAttached.add(r);return}i.resizedAttached=new h,i.resizedAttached.add(r),i.resizeSensor=document.createElement("div"),i.resizeSensor.dir="ltr",i.resizeSensor.className="resize-sensor";var s={pointerEvents:"none",position:"absolute",left:"0px",top:"0px",right:"0px",bottom:"0px",overflow:"hidden",zIndex:"-1",visibility:"hidden",maxWidth:"100%"},l={position:"absolute",left:"0px",top:"0px",transition:"0s"};o(i.resizeSensor,s);var c=document.createElement("div");c.className="resize-sensor-expand",o(c,s);var p=document.createElement("div");o(p,l),c.appendChild(p);var d=document.createElement("div");d.className="resize-sensor-shrink",o(d,s);var f=document.createElement("div");o(f,l),o(f,{width:"200%",height:"200%"}),d.appendChild(f),i.resizeSensor.appendChild(c),i.resizeSensor.appendChild(d),i.appendChild(i.resizeSensor);var y=window.getComputedStyle(i),g=y?y.getPropertyValue("position"):null;"absolute"!==g&&"relative"!==g&&"fixed"!==g&&"sticky"!==g&&(i.style.position="relative");var m=!1,v=0,$=n(i),_=0,E=0,A=!0;u=0;var x=function(){var t=i.offsetWidth,e=i.offsetHeight;p.style.width=t+10+"px",p.style.height=e+10+"px",c.scrollLeft=t+10,c.scrollTop=e+10,d.scrollLeft=t+10,d.scrollTop=e+10},S=function(){if(A){if(0===i.offsetWidth&&0===i.offsetHeight){u||(u=e(function(){u=0,S()}));return}A=!1}x()};i.resizeSensor.resetSensor=S;var T=function(){v=0,m&&(_=$.width,E=$.height,i.resizedAttached&&i.resizedAttached.call($))},C=function(){(m=($=n(i)).width!==_||$.height!==E)&&!v&&(v=e(T)),S()},I=function(t,e,i){t.attachEvent?t.attachEvent("on"+e,i):t.addEventListener(e,i)};I(c,"scroll",C),I(d,"scroll",C),u=e(function(){u=0,S()})}}(t,l)}),this.detach=function(e){u&&(i(u),u=0),s.detach(t,e)},this.reset=function(){t.resizeSensor.resetSensor&&t.resizeSensor.resetSensor()}};if(s.reset=function(t){r(t,function(e){t.resizeSensor.resetSensor&&e.resizeSensor.resetSensor()})},s.detach=function(t,e){r(t,function(t){t&&!(t.resizedAttached&&"function"==typeof e&&(t.resizedAttached.remove(e),t.resizedAttached.length()))&&t.resizeSensor&&(t.contains(t.resizeSensor)&&t.removeChild(t.resizeSensor),delete t.resizeSensor,delete t.resizedAttached)})},"undefined"!=typeof MutationObserver){var l=new MutationObserver(function(t){for(var e in t)if(t.hasOwnProperty(e))for(var i=t[e].addedNodes,r=0;r<i.length;r++)i[r].resizeSensor&&s.reset(i[r])});document.addEventListener("DOMContentLoaded",function(t){l.observe(document.body,{childList:!0,subtree:!0})})}return s}),function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e(t.ULID={})}(this,function(t){"use strict";function e(t){var e=Error(t);return e.source="ulid",e}var i="0123456789ABCDEFGHJKMNPQRSTVWXYZ",r=i.length;function n(t,e,i){return e>t.length-1?t:t.substr(0,e)+i+t.substr(e+1)}function o(t){for(var o=void 0,s=t.length,l=void 0,u=void 0,h=r-1;!o&&s-- >=0;){if(l=t[s],-1===(u=i.indexOf(l)))throw e("incorrectly encoded string");if(u===h){t=n(t,s,i[0]);continue}o=n(t,s,i[u+1])}if("string"==typeof o)return o;throw e("cannot increment this string")}function s(t){var e=Math.floor(t()*r);return e===r&&(e=r-1),i.charAt(e)}function l(t,n){if(isNaN(t))throw Error(t+" must be a number");if(t>0xffffffffffff)throw e("cannot encode time greater than 281474976710655");if(t<0)throw e("time must be positive");if(!1===Number.isInteger(t))throw e("time must be an integer");for(var o=void 0,s="";n>0;n--)o=t%r,s=i.charAt(o)+s,t=(t-o)/r;return s}function u(t,e){for(var i="";t>0;t--)i=s(e)+i;return i}function h(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],i=arguments[1];i||(i="undefined"!=typeof window?window:null);var r=i&&(i.crypto||i.msCrypto);if(r)return function(){var t=new Uint8Array(1);return r.getRandomValues(t),t[0]/255};try{var n=require("crypto");return function(){return n.randomBytes(1).readUInt8()/255}}catch(o){}if(t){try{console.error("secure crypto unusable, falling back to insecure Math.random()!")}catch(s){}return function(){return Math.random()}}throw e("secure crypto unusable, insecure Math.random not allowed")}function c(t){return t||(t=h()),function e(i){return isNaN(i)&&(i=Date.now()),l(i,10)+u(16,t)}}var p=c();t.replaceCharAt=n,t.incrementBase32=o,t.randomChar=s,t.encodeTime=l,t.encodeRandom=u,t.decodeTime=function t(n){if(26!==n.length)throw e("malformed ulid");var o=n.substr(0,10).split("").reverse().reduce(function(t,n,o){var s=i.indexOf(n);if(-1===s)throw e("invalid character found: "+n);return t+s*Math.pow(r,o)},0);if(o>0xffffffffffff)throw e("malformed ulid, timestamp too large");return o},t.detectPrng=h,t.factory=c,t.monotonicFactory=function t(e){e||(e=h());var i=0,r=void 0;return function t(n){if(isNaN(n)&&(n=Date.now()),n<=i){var s=r=o(r);return l(i,10)+s}i=n;var h=r=u(16,e);return l(n,10)+h}},t.ulid=p,Object.defineProperty(t,"__esModule",{value:!0})}),/**
 * AutoLayout.js is licensed under the MIT license. If a copy of the
 * MIT-license was not distributed with this file, You can obtain one at:
 * http://opensource.org/licenses/mit-license.html.
 * @link https://github.com/lume/autolayout
 *
 * @author: Hein Rutjes (IjzerenHein)
 * @license MIT
 * @copyright Gloey Apps, 2017
 *
 * @library autolayout.js
 * @version 0.7.0
 */ function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var e;(e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).AutoLayout=t()}}(function(){return(function t(e,i,r){function n(s,l){if(!i[s]){if(!e[s]){var u="function"==typeof require&&require;if(!l&&u)return u(s,!0);if(o)return o(s,!0);var h=Error("Cannot find module '"+s+"'");throw h.code="MODULE_NOT_FOUND",h}var c=i[s]={exports:{}};e[s][0].call(c.exports,function(t){var i;return n(e[s][1][t]||t)},c,c.exports,t,e,i,r)}return i[s].exports}for(var o="function"==typeof require&&require,s=0;s<r.length;s++)n(r[s]);return n})({1:[function(t,e,i){"use strict";var r=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}();function n(t,e){if(!(t instanceof e))throw TypeError("Cannot call a class as a function")}var o=t("cassowary/bin/c"),s={CONST:"const",NOTANATTRIBUTE:"const",VARIABLE:"var",LEFT:"left",RIGHT:"right",TOP:"top",BOTTOM:"bottom",WIDTH:"width",HEIGHT:"height",CENTERX:"centerX",CENTERY:"centerY",ZINDEX:"zIndex"},l={LEQ:"leq",EQU:"equ",GEQ:"geq"},u=function(){function t(t,e,i,r,n,o){this.message=t,this.expected=e,this.found=i,this.offset=r,this.line=n,this.column=o,this.name="SyntaxError"}return function t(e,i){function r(){this.constructor=e}r.prototype=i.prototype,e.prototype=new r}(t,Error),{SyntaxError:t,parse:function e(i){var r,n=arguments.length>1?arguments[1]:{},o={},s={visualFormatString:X},l=X,u=o,h={type:"literal",value:":",description:'":"'},c={type:"literal",value:"H",description:'"H"'},p={type:"literal",value:"V",description:'"V"'},d={type:"literal",value:"|",description:'"|"'},f={type:"literal",value:"[",description:'"["'},y={type:"literal",value:"]",description:'"]"'},g={type:"literal",value:"-",description:'"-"'},m={type:"literal",value:"(",description:'"("'},v={type:"literal",value:",",description:'","'},$={type:"literal",value:")",description:'")"'},_={type:"literal",value:"@",description:'"@"'},E={type:"literal",value:"==",description:'"=="'},A={type:"literal",value:"<=",description:'"<="'},x={type:"literal",value:">=",description:'">="'},S=/^[0-9]/,T={type:"class",value:"[0-9]",description:"[0-9]"},C=/^[a-zA-Z_]/,I={type:"class",value:"[a-zA-Z_]",description:"[a-zA-Z_]"},O=/^[a-zA-Z0-9_]/,V={type:"class",value:"[a-zA-Z0-9_]",description:"[a-zA-Z0-9_]"},R={type:"literal",value:".",description:'"."'},N=0,q=0,P=0,B={line:1,column:1,seenCR:!1},k=0,H=[];if("startRule"in n){if(!(n.startRule in s))throw Error("Can't start parsing from rule \""+n.startRule+'".');l=s[n.startRule]}function L(){return i.substring(q,N)}function z(){return q}function M(){return F(q).line}function W(){return F(q).column}function U(t){throw K(null,[{type:"other",description:t}],q)}function D(t){throw K(t,null,q)}function F(t){return P!==t&&(P>t&&(P=0,B={line:1,column:1,seenCR:!1}),function t(e,r,n){var o,s;for(o=r;o<n;o++)"\n"===(s=i.charAt(o))?(!e.seenCR&&e.line++,e.column=1,e.seenCR=!1):"\r"===s||"\u2028"===s||"\u2029"===s?(e.line++,e.column=1,e.seenCR=!0):(e.column++,e.seenCR=!1)}(B,P,t),P=t),B}function j(t){!(N<k)&&(N>k&&(k=N,H=[]),H.push(t))}function K(e,r,n){var o=F(n),s=n<i.length?i.charAt(n):null;return null!==r&&function t(e){var i=1;for(e.sort(function(t,e){return t.description<e.description?-1:t.description>e.description?1:0});i<e.length;)e[i-1]===e[i]?e.splice(i,1):i++}(r),new t(null!==e?e:function t(e,i){var r,n,o,s=Array(e.length);for(o=0;o<e.length;o++)s[o]=e[o].description;return"Expected "+(r=e.length>1?s.slice(0,-1).join(", ")+" or "+s[e.length-1]:s[0])+" but "+(n=i?'"'+function t(e){function i(t){return t.charCodeAt(0).toString(16).toUpperCase()}return e.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\x08/g,"\\b").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\f/g,"\\f").replace(/\r/g,"\\r").replace(/[\x00-\x07\x0B\x0E\x0F]/g,function(t){return"\\x0"+i(t)}).replace(/[\x10-\x1F\x80-\xFF]/g,function(t){return"\\x"+i(t)}).replace(/[\u0180-\u0FFF]/g,function(t){return"\\u0"+i(t)}).replace(/[\u1080-\uFFFF]/g,function(t){return"\\u"+i(t)})}(i)+'"':"end of input")+" found."}(r,s),r,s,n,o.line,o.column)}function X(){var t,e,r,n,s,l,d,f,y,g,m,v,$,_,E,A;if(t=N,e=N,(r=(_=N,72===i.charCodeAt(N)?(E="H",N++):(E=o,j(c)),E===o&&(86===i.charCodeAt(N)?(E="V",N++):(E=o,j(p))),E!==o&&(q=_,E="H"==(A=E)?"horizontal":"vertical"),E))!==o?(58===i.charCodeAt(N)?(n=":",N++):(n=o,j(h)),n!==o?e=r=[r,n]:(N=e,e=u)):(N=e,e=u),e===o&&(e=null),e!==o){if(r=N,(n=G())!==o&&(s=Y())!==o?r=n=[n,s]:(N=r,r=u),r===o&&(r=null),r!==o){if((n=Q())!==o){for(s=[],l=N,(d=Y())!==o&&(f=Q())!==o?l=d=[d,f]:(N=l,l=u);l!==o;)s.push(l),l=N,(d=Y())!==o&&(f=Q())!==o?l=d=[d,f]:(N=l,l=u);s!==o&&(l=N,(d=Y())!==o&&(f=G())!==o?l=d=[d,f]:(N=l,l=u),l===o&&(l=null),l!==o)?(q=t,t=e=(y=e,g=r,m=n,v=s,$=l,{orientation:y?y[0]:"horizontal",cascade:(g||[]).concat([m],[].concat.apply([],v),$||[])})):(N=t,t=u)}else N=t,t=u}else N=t,t=u}else N=t,t=u;return t}function G(){var t,e;return t=N,124===i.charCodeAt(N)?(e="|",N++):(e=o,j(d)),e!==o&&(q=t,e={view:null}),t=e}function Q(){var t,e,r,n,s,l,h;return(t=N,91===i.charCodeAt(N)?(e="[",N++):(e=o,j(f)),e!==o&&(r=tt())!==o&&((n=Z())===o&&(n=null),n!==o&&(93===i.charCodeAt(N)?(s="]",N++):(s=o,j(y)),s!==o)))?(q=t,t=e=(l=r,ti(l,(h=n)?{constraints:h}:{}))):(N=t,t=u),t}function Y(){var t,e,r,n,s,l,h,c,p;if(t=N,45===i.charCodeAt(N)?(e="-",N++):(e=o,j(g)),e!==o){if((r=((l=(h=N,(c=te())!==o&&(q=h,c=[{relation:"equ",constant:p=c,$parserOffset:q}]),c))===o&&(l=Z()),l))!==o)(45===i.charCodeAt(N)?(n="-",N++):(n=o,j(g)),n!==o)?(q=t,t=e=s=r):(N=t,t=u);else N=t,t=u}else N=t,t=u;return t===o&&(t=N,45===i.charCodeAt(N)?(e="-",N++):(e=o,j(g)),e!==o&&(e=[{relation:"equ",constant:"default",$parserOffset:q=t}]),(t=e)===o&&(t=N,(e="")!==o&&(e=[{relation:"equ",constant:0,$parserOffset:q=t}]),t=e)),t}function Z(){var t,e,r,n,s,l,h,c,p;if(t=N,40===i.charCodeAt(N)?(e="(",N++):(e=o,j(m)),e!==o){if((r=J())!==o){for(n=[],s=N,44===i.charCodeAt(N)?(l=",",N++):(l=o,j(v)),l!==o&&(h=J())!==o?s=l=[l,h]:(N=s,s=u);s!==o;)n.push(s),s=N,44===i.charCodeAt(N)?(l=",",N++):(l=o,j(v)),l!==o&&(h=J())!==o?s=l=[l,h]:(N=s,s=u);n!==o&&(41===i.charCodeAt(N)?(s=")",N++):(s=o,j($)),s!==o)?(q=t,t=e=(c=r,[c].concat((p=n).map(function(t){return t[1]})))):(N=t,t=u)}else N=t,t=u}else N=t,t=u;return t}function J(){var t,e,r,n,s,l,h,c,p,d,f,y,g,m,v;if(t=N,(e=(d=N,"=="===i.substr(N,2)?(f="==",N+=2):(f=o,j(E)),f!==o&&(f={relation:"equ",$parserOffset:q=d}),(d=f)===o&&(d=N,"<="===i.substr(N,2)?(f="<=",N+=2):(f=o,j(A)),f!==o&&(f={relation:"leq",$parserOffset:q=d}),(d=f)===o&&(d=N,">="===i.substr(N,2)?(f=">=",N+=2):(f=o,j(x)),f!==o&&(f={relation:"geq",$parserOffset:q=d}),d=f)),d))===o&&(e=null),e!==o){if((r=((y=(g=N,(m=te())!==o&&(q=g,m={constant:v=m}),m))===o&&(y=tt()),y))!==o)(n=N,64===i.charCodeAt(N)?(s="@",N++):(s=o,j(_)),s!==o&&(l=function t(){var e,r,n,s;if(e=N,r=[],S.test(i.charAt(N))?(n=i.charAt(N),N++):(n=o,j(T)),n!==o)for(;n!==o;)r.push(n),S.test(i.charAt(N))?(n=i.charAt(N),N++):(n=o,j(T));else r=u;return r!==o&&(q=e,r={priority:parseInt((s=r).join(""),10)}),r}())!==o?n=s=[s,l]:(N=n,n=u),n===o&&(n=null),n!==o)?(q=t,t=e=(h=e,c=r,ti({relation:"equ"},h||{},c,(p=n)?p[1]:{}))):(N=t,t=u);else N=t,t=u}else N=t,t=u;return t}function tt(){var t,e,r,n,s,l,h;if(t=N,e=N,r=[],C.test(i.charAt(N))?(n=i.charAt(N),N++):(n=o,j(I)),n!==o)for(;n!==o;)r.push(n),C.test(i.charAt(N))?(n=i.charAt(N),N++):(n=o,j(I));else r=u;if(r!==o&&(r=i.substring(e,N)),(e=r)!==o){for(r=N,n=[],O.test(i.charAt(N))?(s=i.charAt(N),N++):(s=o,j(V));s!==o;)n.push(s),O.test(i.charAt(N))?(s=i.charAt(N),N++):(s=o,j(V));(n!==o&&(n=i.substring(r,N)),(r=n)!==o)?(q=t,t=e=(l=e,{view:l+(h=r)})):(N=t,t=u)}else N=t,t=u;return t}function te(){var t,e,r,n,s,l,h,c;if(t=N,e=[],S.test(i.charAt(N))?(r=i.charAt(N),N++):(r=o,j(T)),r!==o)for(;r!==o;)e.push(r),S.test(i.charAt(N))?(r=i.charAt(N),N++):(r=o,j(T));else e=u;if(e!==o){if(46===i.charCodeAt(N)?(r=".",N++):(r=o,j(R)),r!==o){if(n=[],S.test(i.charAt(N))?(s=i.charAt(N),N++):(s=o,j(T)),s!==o)for(;s!==o;)n.push(s),S.test(i.charAt(N))?(s=i.charAt(N),N++):(s=o,j(T));else n=u;n!==o?(q=t,t=e=(l=e,h=n,parseFloat(l.concat(".").concat(h).join(""),10))):(N=t,t=u)}else N=t,t=u}else N=t,t=u;if(t===o){if(t=N,e=[],S.test(i.charAt(N))?(r=i.charAt(N),N++):(r=o,j(T)),r!==o)for(;r!==o;)e.push(r),S.test(i.charAt(N))?(r=i.charAt(N),N++):(r=o,j(T));else e=u;e!==o&&(q=t,e=parseInt((c=e).join(""),10)),t=e}return t}function ti(t){for(var e=1;e<arguments.length;e++)for(var i in arguments[e])t[i]=arguments[e][i];return t}if((r=l())!==o&&N===i.length)return r;throw r!==o&&N<i.length&&j({type:"end",description:"end of input"}),K(null,H,k)}}}(),h=function(){function t(t,e,i,r,n,o){this.message=t,this.expected=e,this.found=i,this.offset=r,this.line=n,this.column=o,this.name="SyntaxError"}return function t(e,i){function r(){this.constructor=e}r.prototype=i.prototype,e.prototype=new r}(t,Error),{SyntaxError:t,parse:function e(i){var r,n=arguments.length>1?arguments[1]:{},o={},s={visualFormatStringExt:tN},l=tN,u=o,h={type:"literal",value:"C:",description:'"C:"'},c={type:"literal",value:":",description:'":"'},p={type:"literal",value:"HV",description:'"HV"'},d={type:"literal",value:"H",description:'"H"'},f={type:"literal",value:"V",description:'"V"'},y={type:"literal",value:"Z",description:'"Z"'},g={type:"literal",value:" ",description:'" "'},m={type:"literal",value:"//",description:'"//"'},v={type:"any",description:"any character"},$={type:"literal",value:"|",description:'"|"'},_={type:"literal",value:"[",description:'"["'},E={type:"literal",value:",",description:'","'},A={type:"literal",value:"]",description:'"]"'},x={type:"literal",value:"->",description:'"->"'},S={type:"literal",value:"-",description:'"-"'},T=function t(e){return e},C={type:"literal",value:"~",description:'"~"'},I={type:"literal",value:"(",description:'"("'},O={type:"literal",value:")",description:'")"'},V=function t(e,i){return[e].concat(i.map(function(t){return t[1]}))},R={type:"literal",value:"@",description:'"@"'},N={type:"literal",value:"==",description:'"=="'},q={type:"literal",value:"<=",description:'"<="'},P={type:"literal",value:">=",description:'">="'},B=/^[0-9]/,k={type:"class",value:"[0-9]",description:"[0-9]"},H=function t(e){return{constant:e}},L={type:"literal",value:"+",description:'"+"'},z={type:"literal",value:"%",description:'"%"'},M=function t(e){return{view:null,multiplier:e/100}},W=".left",U={type:"literal",value:".left",description:'".left"'},D=".right",F={type:"literal",value:".right",description:'".right"'},j=".top",K={type:"literal",value:".top",description:'".top"'},X=".bottom",G={type:"literal",value:".bottom",description:'".bottom"'},Q=".width",Y={type:"literal",value:".width",description:'".width"'},Z=".height",J={type:"literal",value:".height",description:'".height"'},tt=".centerX",te={type:"literal",value:".centerX",description:'".centerX"'},ti=".centerY",tr={type:"literal",value:".centerY",description:'".centerY"'},tn={type:"literal",value:"/",description:'"/"'},to=function t(e){return 1/e},ts={type:"literal",value:"/+",description:'"/+"'},ta={type:"literal",value:"/-",description:'"/-"'},tl={type:"literal",value:"*",description:'"*"'},tu=function t(e){return e},th={type:"literal",value:"*+",description:'"*+"'},tc={type:"literal",value:"*-",description:'"*-"'},tp=function t(e){return-e},td=/^[a-zA-Z_]/,tf={type:"class",value:"[a-zA-Z_]",description:"[a-zA-Z_]"},ty=/^[a-zA-Z0-9_]/,tg={type:"class",value:"[a-zA-Z0-9_]",description:"[a-zA-Z0-9_]"},tm=function t(e,i){return{view:e+i,$parserOffset:t_}},tv={type:"literal",value:"..",description:'".."'},tw={type:"literal",value:".",description:'"."'},t$=0,t_=0,tb=0,t8={line:1,column:1,seenCR:!1},tE=0,tA=[];if("startRule"in n){if(!(n.startRule in s))throw Error("Can't start parsing from rule \""+n.startRule+'".');l=s[n.startRule]}function tx(){return i.substring(t_,t$)}function t0(){return t_}function tS(){return tO(t_).line}function tT(){return tO(t_).column}function tC(t){throw tR(null,[{type:"other",description:t}],t_)}function tI(t){throw tR(t,null,t_)}function tO(t){return tb!==t&&(tb>t&&(tb=0,t8={line:1,column:1,seenCR:!1}),function t(e,r,n){var o,s;for(o=r;o<n;o++)"\n"===(s=i.charAt(o))?(!e.seenCR&&e.line++,e.column=1,e.seenCR=!1):"\r"===s||"\u2028"===s||"\u2029"===s?(e.line++,e.column=1,e.seenCR=!0):(e.column++,e.seenCR=!1)}(t8,tb,t),tb=t),t8}function tV(t){!(t$<tE)&&(t$>tE&&(tE=t$,tA=[]),tA.push(t))}function tR(e,r,n){var o=tO(n),s=n<i.length?i.charAt(n):null;return null!==r&&function t(e){var i=1;for(e.sort(function(t,e){return t.description<e.description?-1:t.description>e.description?1:0});i<e.length;)e[i-1]===e[i]?e.splice(i,1):i++}(r),new t(null!==e?e:function t(e,i){var r,n,o,s=Array(e.length);for(o=0;o<e.length;o++)s[o]=e[o].description;return"Expected "+(r=e.length>1?s.slice(0,-1).join(", ")+" or "+s[e.length-1]:s[0])+" but "+(n=i?'"'+function t(e){function i(t){return t.charCodeAt(0).toString(16).toUpperCase()}return e.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\x08/g,"\\b").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\f/g,"\\f").replace(/\r/g,"\\r").replace(/[\x00-\x07\x0B\x0E\x0F]/g,function(t){return"\\x0"+i(t)}).replace(/[\x10-\x1F\x80-\xFF]/g,function(t){return"\\x"+i(t)}).replace(/[\u0180-\u0FFF]/g,function(t){return"\\u0"+i(t)}).replace(/[\u1080-\uFFFF]/g,function(t){return"\\u"+i(t)})}(i)+'"':"end of input")+" found."}(r,s),r,s,n,o.line,o.column)}function tN(){var t;return(t=function t(){var e,r,n,s,l,h,g,m,v,$,_,E,A,x,S,T;if(e=t$,r=t$,(n=(S=t$,"HV"===i.substr(t$,2)?(T="HV",t$+=2):(T=o,tV(p)),T!==o&&(t_=S,T="horzvert"),(S=T)===o&&(S=t$,72===i.charCodeAt(t$)?(T="H",t$++):(T=o,tV(d)),T!==o&&(t_=S,T="horizontal"),(S=T)===o&&(S=t$,86===i.charCodeAt(t$)?(T="V",t$++):(T=o,tV(f)),T!==o&&(t_=S,T="vertical"),(S=T)===o&&(S=t$,90===i.charCodeAt(t$)?(T="Z",t$++):(T=o,tV(y)),T!==o&&(t_=S,T="zIndex"),S=T))),S))!==o?(58===i.charCodeAt(t$)?(s=":",t$++):(s=o,tV(c)),s!==o?r=n=[n,s]:(t$=r,r=u)):(t$=r,r=u),r===o&&(r=null),r!==o){if(n=t$,(s=tB())!==o&&(l=tL())!==o?n=s=[s,l]:(t$=n,n=u),n===o&&(n=null),n!==o){if((s=tk())!==o){for(l=[],h=t$,(g=tL())!==o&&(m=tk())!==o?h=g=[g,m]:(t$=h,h=u);h!==o;)l.push(h),h=t$,(g=tL())!==o&&(m=tk())!==o?h=g=[g,m]:(t$=h,h=u);l!==o&&(h=t$,(g=tL())!==o&&(m=tB())!==o?h=g=[g,m]:(t$=h,h=u),h===o&&(h=null),h!==o&&((g=tP())===o&&(g=null),g!==o))?(t_=e,e=r=(v=r,$=n,_=s,E=l,A=h,{type:"vfl",orientation:v?v[0]:"horizontal",cascade:($||[]).concat(_,[].concat.apply([],E),A||[])})):(t$=e,e=u)}else t$=e,e=u}else t$=e,e=u}else t$=e,e=u;return e}())===o&&(t=function t(){var e,r,n,s,l,c,p,d,f,y;if(e=t$,"C:"===i.substr(t$,2)?(r="C:",t$+=2):(r=o,tV(h)),r!==o){if((n=tX())!==o){if((s=tq())!==o){for(l=[],c=tq();c!==o;)l.push(c),c=tq();l!==o&&((c=tP())===o&&(c=null),c!==o)?(t_=e,e=r=(p=n,d=s,f=l,{type:"attribute",view:p.view,attributes:[d].concat(f)})):(t$=e,e=u)}else t$=e,e=u}else t$=e,e=u}else t$=e,e=u;return e}()),t}function tq(){var t,e,i,r,n;return(t=t$,(e=tK())!==o&&(i=tz())!==o)?(t_=t,t=e=(r=e,{attr:r,predicates:n=i})):(t$=t,t=u),t}function tP(){var t,e,r,n,s;for(t=t$,e=[],32===i.charCodeAt(t$)?(r=" ",t$++):(r=o,tV(g));r!==o;)e.push(r),32===i.charCodeAt(t$)?(r=" ",t$++):(r=o,tV(g));if(e!==o){if("//"===i.substr(t$,2)?(r="//",t$+=2):(r=o,tV(m)),r!==o){for(n=[],i.length>t$?(s=i.charAt(t$),t$++):(s=o,tV(v));s!==o;)n.push(s),i.length>t$?(s=i.charAt(t$),t$++):(s=o,tV(v));n!==o?t=e=[e,r,n]:(t$=t,t=u)}else t$=t,t=u}else t$=t,t=u;return t}function tB(){var t,e;return t=t$,124===i.charCodeAt(t$)?(e="|",t$++):(e=o,tV($)),e!==o&&(t_=t,e={view:null}),t=e}function tk(){var t,e,r,n,s,l,h,c,p;if(t=t$,91===i.charCodeAt(t$)?(e="[",t$++):(e=o,tV(_)),e!==o){if((r=tH())!==o){for(n=[],s=t$,44===i.charCodeAt(t$)?(l=",",t$++):(l=o,tV(E)),l!==o&&(h=tH())!==o?s=l=[l,h]:(t$=s,s=u);s!==o;)n.push(s),s=t$,44===i.charCodeAt(t$)?(l=",",t$++):(l=o,tV(E)),l!==o&&(h=tH())!==o?s=l=[l,h]:(t$=s,s=u);n!==o&&(93===i.charCodeAt(t$)?(s="]",t$++):(s=o,tV(A)),s!==o)?(t_=t,t=e=(c=r,(p=n).length?[c].concat([].concat.apply([],p)):c)):(t$=t,t=u)}else t$=t,t=u}else t$=t,t=u;return t}function tH(){var t,e,r,n,s,l,h;return(t=t$,(e=function t(){var e,r,n,s,l,h,c,p;if(e=t$,r=t$,n=[],td.test(i.charAt(t$))?(s=i.charAt(t$),t$++):(s=o,tV(tf)),s!==o)for(;s!==o;)n.push(s),td.test(i.charAt(t$))?(s=i.charAt(t$),t$++):(s=o,tV(tf));else n=u;if(n!==o&&(n=i.substring(r,t$)),(r=n)!==o){for(n=t$,s=[],ty.test(i.charAt(t$))?(l=i.charAt(t$),t$++):(l=o,tV(tg));l!==o;)s.push(l),ty.test(i.charAt(t$))?(l=i.charAt(t$),t$++):(l=o,tV(tg));(s!==o&&(s=i.substring(n,t$)),(n=s)!==o&&(s=function t(){var e,r,n,s,l;if(e=t$,".."===i.substr(t$,2)?(r="..",t$+=2):(r=o,tV(tv)),r!==o){if(n=[],B.test(i.charAt(t$))?(s=i.charAt(t$),t$++):(s=o,tV(k)),s!==o)for(;s!==o;)n.push(s),B.test(i.charAt(t$))?(s=i.charAt(t$),t$++):(s=o,tV(k));else n=u;n!==o?(t_=e,e=r=parseInt(l=n)):(t$=e,e=u)}else t$=e,e=u;return e}())!==o)?(t_=e,e=r=(h=r,c=n,{view:h+c,range:p=s,$parserOffset:t_})):(t$=e,e=u)}else t$=e,e=u;if(e===o){if(e=t$,r=t$,n=[],td.test(i.charAt(t$))?(s=i.charAt(t$),t$++):(s=o,tV(tf)),s!==o)for(;s!==o;)n.push(s),td.test(i.charAt(t$))?(s=i.charAt(t$),t$++):(s=o,tV(tf));else n=u;if(n!==o&&(n=i.substring(r,t$)),(r=n)!==o){for(n=t$,s=[],ty.test(i.charAt(t$))?(l=i.charAt(t$),t$++):(l=o,tV(tg));l!==o;)s.push(l),ty.test(i.charAt(t$))?(l=i.charAt(t$),t$++):(l=o,tV(tg));s!==o&&(s=i.substring(n,t$)),(n=s)!==o?(t_=e,e=r=tm(r,n)):(t$=e,e=u)}else t$=e,e=u}return e}())!==o&&((r=tz())===o&&(r=null),r!==o&&((n=function t(){var e,r,n,s,l,h,p,d;if(e=t$,58===i.charCodeAt(t$)?(r=":",t$++):(r=o,tV(c)),r!==o){if(n=[],s=t$,(l=tL())!==o&&(h=tk())!==o?s=l=[l,h]:(t$=s,s=u),s!==o)for(;s!==o;)n.push(s),s=t$,(l=tL())!==o&&(h=tk())!==o?s=l=[l,h]:(t$=s,s=u);else n=u;n!==o&&(s=tL())!==o?(t_=e,e=r=(p=n,d=s,[].concat([].concat.apply([],p),[d]))):(t$=e,e=u)}else t$=e,e=u;return e}())===o&&(n=null),n!==o)))?(t_=t,t=e=(s=e,l=r,h=n,t2(t2(s,l?{constraints:l}:{}),h?{cascade:h}:{}))):(t$=t,t=u),t}function tL(){var t,e,r,n,s,l,h,c,p;return t=t$,"->"===i.substr(t$,2)?(e="->",t$+=2):(e=o,tV(x)),e!==o&&(t_=t,e=[{relation:"none"}]),(t=e)===o&&(t=t$,45===i.charCodeAt(t$)?(e="-",t$++):(e=o,tV(S)),e!==o&&(r=((s=(l=t$,(h=tj())!==o&&(t_=l,h=[{relation:"equ",multiplier:(c=h).multiplier}]),(l=h)===o&&(l=t$,(h=tG())!==o&&(t_=l,h=[{relation:"equ",constant:p=h}]),l=h),l))===o&&(s=tz()),s))!==o?(45===i.charCodeAt(t$)?(n="-",t$++):(n=o,tV(S)),n!==o?(t_=t,t=e=T(r)):(t$=t,t=u)):(t$=t,t=u),t===o&&(t=t$,45===i.charCodeAt(t$)?(e="-",t$++):(e=o,tV(S)),e!==o&&(t_=t,e=[{relation:"equ",constant:"default"}]),(t=e)===o&&(t=t$,126===i.charCodeAt(t$)?(e="~",t$++):(e=o,tV(C)),e!==o&&(r=function t(){var e,r,n,s,l,h,c;if(e=t$,40===i.charCodeAt(t$)?(r="(",t$++):(r=o,tV(I)),r!==o){if((n=tW())!==o){for(s=[],l=t$,44===i.charCodeAt(t$)?(h=",",t$++):(h=o,tV(E)),h!==o&&(c=tW())!==o?l=h=[h,c]:(t$=l,l=u);l!==o;)s.push(l),l=t$,44===i.charCodeAt(t$)?(h=",",t$++):(h=o,tV(E)),h!==o&&(c=tW())!==o?l=h=[h,c]:(t$=l,l=u);s!==o?(41===i.charCodeAt(t$)?(l=")",t$++):(l=o,tV(O)),l!==o?(t_=e,e=r=V(n,s)):(t$=e,e=u)):(t$=e,e=u)}else t$=e,e=u}else t$=e,e=u;return e}())!==o?(126===i.charCodeAt(t$)?(n="~",t$++):(n=o,tV(C)),n!==o?(t_=t,t=e=T(r)):(t$=t,t=u)):(t$=t,t=u),t===o&&(t=t$,126===i.charCodeAt(t$)?(e="~",t$++):(e=o,tV(C)),e!==o&&(t_=t,e=[{relation:"equ",equalSpacing:!0}]),(t=e)===o&&(t=t$,(e="")!==o&&(t_=t,e=[{relation:"equ",constant:0}]),t=e))))),t}function tz(){var t,e,r,n,s,l,h;if(t=t$,40===i.charCodeAt(t$)?(e="(",t$++):(e=o,tV(I)),e!==o){if((r=tM())!==o){for(n=[],s=t$,44===i.charCodeAt(t$)?(l=",",t$++):(l=o,tV(E)),l!==o&&(h=tM())!==o?s=l=[l,h]:(t$=s,s=u);s!==o;)n.push(s),s=t$,44===i.charCodeAt(t$)?(l=",",t$++):(l=o,tV(E)),l!==o&&(h=tM())!==o?s=l=[l,h]:(t$=s,s=u);n!==o?(41===i.charCodeAt(t$)?(s=")",t$++):(s=o,tV(O)),s!==o?(t_=t,t=e=V(r,n)):(t$=t,t=u)):(t$=t,t=u)}else t$=t,t=u}else t$=t,t=u;return t}function tM(){var t,e,r,n,s,l,h,c,p;return(t=t$,(e=tU())===o&&(e=null),e!==o&&(r=tD())!==o&&(n=t$,64===i.charCodeAt(t$)?(s="@",t$++):(s=o,tV(R)),s!==o&&(l=tF())!==o?n=s=[s,l]:(t$=n,n=u),n===o&&(n=null),n!==o))?(t_=t,t=e=(h=e,c=r,t2({relation:"equ"},h||{},c,(p=n)?p[1]:{}))):(t$=t,t=u),t}function tW(){var t,e,r,n,s,l,h,c,p;return(t=t$,(e=tU())===o&&(e=null),e!==o&&(r=tD())!==o&&(n=t$,64===i.charCodeAt(t$)?(s="@",t$++):(s=o,tV(R)),s!==o&&(l=tF())!==o?n=s=[s,l]:(t$=n,n=u),n===o&&(n=null),n!==o))?(t_=t,t=e=(h=e,c=r,t2({relation:"equ",equalSpacing:!0},h||{},c,(p=n)?p[1]:{}))):(t$=t,t=u),t}function tU(){var t,e;return t=t$,"=="===i.substr(t$,2)?(e="==",t$+=2):(e=o,tV(N)),e!==o&&(t_=t,e={relation:"equ"}),(t=e)===o&&(t=t$,"<="===i.substr(t$,2)?(e="<=",t$+=2):(e=o,tV(q)),e!==o&&(t_=t,e={relation:"leq"}),(t=e)===o&&(t=t$,">="===i.substr(t$,2)?(e=">=",t$+=2):(e=o,tV(P)),e!==o&&(t_=t,e={relation:"geq"}),t=e)),t}function tD(){var t,e,r,n,s;return(t=tj())===o&&(t=(e=t$,(r=tG())!==o&&(t_=e,r=H(r)),(e=r)===o&&((e=t$,45===i.charCodeAt(t$)?(r="-",t$++):(r=o,tV(S)),r!==o&&(n=tG())!==o)?(t_=e,e=r={constant:-(s=n)}):(t$=e,e=u),e===o&&(e=t$,43===i.charCodeAt(t$)?(r="+",t$++):(r=o,tV(L)),r!==o&&(n=tG())!==o?(t_=e,e=r=H(n)):(t$=e,e=u))),e))===o&&(t=function t(){var e,r,n,s,l,h,c,p,d,f,y,g,m,v,$,_;if(e=t$,(r=tX())!==o){if((n=tK())===o&&(n=null),n!==o){if((s=(f=t$,47===i.charCodeAt(t$)?(y="/",t$++):(y=o,tV(tn)),y!==o&&(g=tG())!==o?(t_=f,f=y=to(g)):(t$=f,f=u),f===o&&(f=t$,"/+"===i.substr(t$,2)?(y="/+",t$+=2):(y=o,tV(ts)),y!==o&&(g=tG())!==o?(t_=f,f=y=to(g)):(t$=f,f=u),f===o)&&((f=t$,"/-"===i.substr(t$,2)?(y="/-",t$+=2):(y=o,tV(ta)),y!==o&&(g=tG())!==o)?(t_=f,f=y=-1/(m=g)):(t$=f,f=u),f===o&&(f=t$,42===i.charCodeAt(t$)?(y="*",t$++):(y=o,tV(tl)),y!==o&&(g=tG())!==o?(t_=f,f=y=tu(g)):(t$=f,f=u),f===o&&(f=t$,"*+"===i.substr(t$,2)?(y="*+",t$+=2):(y=o,tV(th)),y!==o&&(g=tG())!==o?(t_=f,f=y=tu(g)):(t$=f,f=u),f===o&&(f=t$,"*-"===i.substr(t$,2)?(y="*-",t$+=2):(y=o,tV(tc)),y!==o&&(g=tG())!==o?(t_=f,f=y=tp(g)):(t$=f,f=u))))),f))===o&&(s=null),s!==o){if((l=(v=t$,45===i.charCodeAt(t$)?($="-",t$++):($=o,tV(S)),$!==o&&(_=tG())!==o?(t_=v,v=$=tp(_)):(t$=v,v=u),v===o&&(v=t$,43===i.charCodeAt(t$)?($="+",t$++):($=o,tV(L)),$!==o&&(_=tG())!==o?(t_=v,v=$=tu(_)):(t$=v,v=u)),v))===o&&(l=null),l!==o)t_=e,e=r=(h=r,c=n,p=s,d=l,{view:h.view,attribute:c||void 0,multiplier:p||1,constant:d||void 0});else t$=e,e=u}else t$=e,e=u}else t$=e,e=u}else t$=e,e=u;return e}()),t}function tF(){var t,e,r,n;if(t=t$,e=[],B.test(i.charAt(t$))?(r=i.charAt(t$),t$++):(r=o,tV(k)),r!==o)for(;r!==o;)e.push(r),B.test(i.charAt(t$))?(r=i.charAt(t$),t$++):(r=o,tV(k));else e=u;return e!==o&&(t_=t,e={priority:parseInt((n=e).join(""),10)}),e}function tj(){var t,e,r,n,s;return t=t$,(e=tG())!==o?(37===i.charCodeAt(t$)?(r="%",t$++):(r=o,tV(z)),r!==o?(t_=t,t=e=M(e)):(t$=t,t=u)):(t$=t,t=u),t===o&&((t=t$,45===i.charCodeAt(t$)?(e="-",t$++):(e=o,tV(S)),e!==o&&(r=tG())!==o&&(37===i.charCodeAt(t$)?(n="%",t$++):(n=o,tV(z)),n!==o))?(t_=t,t=e={view:null,multiplier:-((s=r)/100)}):(t$=t,t=u),t===o&&(t=t$,43===i.charCodeAt(t$)?(e="+",t$++):(e=o,tV(L)),e!==o&&(r=tG())!==o?(37===i.charCodeAt(t$)?(n="%",t$++):(n=o,tV(z)),n!==o?(t_=t,t=e=M(r)):(t$=t,t=u)):(t$=t,t=u))),t}function tK(){var t,e;return t=t$,i.substr(t$,5)===W?(e=W,t$+=5):(e=o,tV(U)),e!==o&&(t_=t,e="left"),(t=e)===o&&(t=t$,i.substr(t$,6)===D?(e=D,t$+=6):(e=o,tV(F)),e!==o&&(t_=t,e="right"),(t=e)===o&&(t=t$,i.substr(t$,4)===j?(e=j,t$+=4):(e=o,tV(K)),e!==o&&(t_=t,e="top"),(t=e)===o&&(t=t$,i.substr(t$,7)===X?(e=X,t$+=7):(e=o,tV(G)),e!==o&&(t_=t,e="bottom"),(t=e)===o&&(t=t$,i.substr(t$,6)===Q?(e=Q,t$+=6):(e=o,tV(Y)),e!==o&&(t_=t,e="width"),(t=e)===o&&(t=t$,i.substr(t$,7)===Z?(e=Z,t$+=7):(e=o,tV(J)),e!==o&&(t_=t,e="height"),(t=e)===o&&(t=t$,i.substr(t$,8)===tt?(e=tt,t$+=8):(e=o,tV(te)),e!==o&&(t_=t,e="centerX"),(t=e)===o&&(t=t$,i.substr(t$,8)===ti?(e=ti,t$+=8):(e=o,tV(tr)),e!==o&&(t_=t,e="centerY"),t=e))))))),t}function tX(){var t,e,r,n,s;if(t=t$,e=t$,r=[],td.test(i.charAt(t$))?(n=i.charAt(t$),t$++):(n=o,tV(tf)),n!==o)for(;n!==o;)r.push(n),td.test(i.charAt(t$))?(n=i.charAt(t$),t$++):(n=o,tV(tf));else r=u;if(r!==o&&(r=i.substring(e,t$)),(e=r)!==o){for(r=t$,n=[],ty.test(i.charAt(t$))?(s=i.charAt(t$),t$++):(s=o,tV(tg));s!==o;)n.push(s),ty.test(i.charAt(t$))?(s=i.charAt(t$),t$++):(s=o,tV(tg));n!==o&&(n=i.substring(r,t$)),(r=n)!==o?(t_=t,t=e=tm(e,r)):(t$=t,t=u)}else t$=t,t=u;return t}function tG(){var t,e,r,n,s,l,h,c;if(t=t$,e=[],B.test(i.charAt(t$))?(r=i.charAt(t$),t$++):(r=o,tV(k)),r!==o)for(;r!==o;)e.push(r),B.test(i.charAt(t$))?(r=i.charAt(t$),t$++):(r=o,tV(k));else e=u;if(e!==o){if(46===i.charCodeAt(t$)?(r=".",t$++):(r=o,tV(tw)),r!==o){if(n=[],B.test(i.charAt(t$))?(s=i.charAt(t$),t$++):(s=o,tV(k)),s!==o)for(;s!==o;)n.push(s),B.test(i.charAt(t$))?(s=i.charAt(t$),t$++):(s=o,tV(k));else n=u;n!==o?(t_=t,t=e=(l=e,h=n,parseFloat(l.concat(".").concat(h).join(""),10))):(t$=t,t=u)}else t$=t,t=u}else t$=t,t=u;if(t===o){if(t=t$,e=[],B.test(i.charAt(t$))?(r=i.charAt(t$),t$++):(r=o,tV(k)),r!==o)for(;r!==o;)e.push(r),B.test(i.charAt(t$))?(r=i.charAt(t$),t$++):(r=o,tV(k));else e=u;e!==o&&(t_=t,e=parseInt((c=e).join(""),10)),t=e}return t}function t2(t){for(var e=1;e<arguments.length;e++)for(var i in arguments[e])t[i]=arguments[e][i];return t}if((r=l())!==o&&t$===i.length)return r;throw r!==o&&t$<i.length&&tV({type:"end",description:"end of input"}),tR(null,tA,tE)}}}(),c={HORIZONTAL:1,VERTICAL:2,ZINDEX:4};function p(t,e){t.equalSpacerIndex=t.equalSpacerIndex||1;var i="_~"+t.lineIndex+":"+t.equalSpacerIndex+"~";t.equalSpacerIndex>1&&t.constraints.push({view1:"_~"+t.lineIndex+":1~",attr1:t.horizontal?s.WIDTH:s.HEIGHT,relation:t.relation.relation||l.EQU,view2:i,attr2:t.horizontal?s.WIDTH:s.HEIGHT,priority:t.relation.priority}),t.equalSpacerIndex++,t.relation.view||t.relation.multiplier&&1!==t.relation.multiplier?(t.constraints.push({view1:i,attr1:t.horizontal?s.WIDTH:s.HEIGHT,relation:t.relation.relation||l.EQU,view2:t.relation.view,attr2:t.horizontal?s.WIDTH:s.HEIGHT,priority:t.relation.priority,multiplier:t.relation.multiplier}),t.relation.multiplier=void 0):t.relation.constant&&(t.constraints.push({view1:i,attr1:t.horizontal?s.WIDTH:s.HEIGHT,relation:l.EQU,view2:null,attr2:s.CONST,priority:t.relation.priority,constant:t.relation.constant}),t.relation.constant=void 0);for(var r=0;r<t.prevViews.length;r++){var n=t.prevViews[r];switch(t.orientation){case c.HORIZONTAL:t.prevAttr=n!==e?s.RIGHT:s.LEFT,t.curAttr=s.LEFT;break;case c.VERTICAL:t.prevAttr=n!==e?s.BOTTOM:s.TOP,t.curAttr=s.TOP;break;case c.ZINDEX:t.prevAttr=s.ZINDEX,t.curAttr=s.ZINDEX,t.relation.constant=n!==e?"default":0}t.constraints.push({view1:n,attr1:t.prevAttr,relation:t.relation.relation,view2:i,attr2:t.curAttr,priority:t.relation.priority})}t.prevViews=[i]}function d(t,e){t.proportionalSpacerIndex=t.proportionalSpacerIndex||1;var i="_-"+t.lineIndex+":"+t.proportionalSpacerIndex+"-";t.proportionalSpacerIndex++,t.constraints.push({view1:i,attr1:t.horizontal?s.WIDTH:s.HEIGHT,relation:t.relation.relation||l.EQU,view2:t.relation.view,attr2:t.horizontal?s.WIDTH:s.HEIGHT,priority:t.relation.priority,multiplier:t.relation.multiplier}),t.relation.multiplier=void 0;for(var r=0;r<t.prevViews.length;r++){var n=t.prevViews[r];switch(t.orientation){case c.HORIZONTAL:t.prevAttr=n!==e?s.RIGHT:s.LEFT,t.curAttr=s.LEFT;break;case c.VERTICAL:t.prevAttr=n!==e?s.BOTTOM:s.TOP,t.curAttr=s.TOP;break;case c.ZINDEX:t.prevAttr=s.ZINDEX,t.curAttr=s.ZINDEX,t.relation.constant=n!==e?"default":0}t.constraints.push({view1:n,attr1:t.prevAttr,relation:t.relation.relation,view2:i,attr2:t.curAttr,priority:t.relation.priority})}t.prevViews=[i]}function f(t,e,i){for(var r=void 0,n=1;n<=4;n*=2)if(i.orientations&n&&i.stack.orientation!==n&&!(i.stack.processedOrientations&n)){i.stack.processedOrientations=i.stack.processedOrientations|n,r=r||{name:e,type:"stack"};for(var o=0,u=i.stack.subViews.length;o<u;o++)n===c.ZINDEX?t.constraints.push({view1:r,attr1:s.ZINDEX,relation:l.EQU,view2:i.stack.subViews[o],attr2:s.ZINDEX}):(t.constraints.push({view1:r,attr1:n===c.VERTICAL?s.HEIGHT:s.WIDTH,relation:l.EQU,view2:i.stack.subViews[o],attr2:n===c.VERTICAL?s.HEIGHT:s.WIDTH}),t.constraints.push({view1:r,attr1:n===c.VERTICAL?s.TOP:s.LEFT,relation:l.EQU,view2:i.stack.subViews[o],attr2:n===c.VERTICAL?s.TOP:s.LEFT}))}}function y(t,e){if(!0===e&&(e=t.match(/\.\.\d+$/))&&(t=t.substring(0,t.length-e[0].length),e=parseInt(e[0].substring(2))),!e)return[t];var i,r=t.match(/\d+$/),n=[];if(r)for(t=t.substring(0,t.length-r[0].length),i=parseInt(r);i<=e;i++)n.push(t+i);else for(n.push(t),i=2;i<=e;i++)n.push(t+i);return n}function g(t,e,i){var r=i?i.view:null,n=[],o=[],l=void 0;r&&(e.push({view:r}),o.push(r));for(var u=0;u<e.length;u++){var h=e[u];if(!Array.isArray(h)&&h.hasOwnProperty("view")||Array.isArray(h)&&h[0].view&&!h[0].relation)for(var m=Array.isArray(h)?h:[h],v=0;v<m.length;v++)for(var $=","===(h=m[v])?[]:h.view?y(h.view,h.range):[null],_=0;_<$.length;_++){var E=$[_];if(o.push(E),E!==r&&(n.push(E),(l=t.subViews[E])||(l={orientations:0},t.subViews[E]=l),l.orientations=l.orientations|t.orientation,l.stack&&f(t,E,l)),void 0!==t.prevViews&&void 0!==E&&t.relation&&"none"!==t.relation.relation)for(var A=0;A<t.prevViews.length;A++){var x=t.prevViews[A];switch(t.orientation){case c.HORIZONTAL:t.prevAttr=x!==r?s.RIGHT:s.LEFT,t.curAttr=E!==r?s.LEFT:s.RIGHT;break;case c.VERTICAL:t.prevAttr=x!==r?s.BOTTOM:s.TOP,t.curAttr=E!==r?s.TOP:s.BOTTOM;break;case c.ZINDEX:t.prevAttr=s.ZINDEX,t.curAttr=s.ZINDEX,t.relation.constant=x?t.relation.constant||"default":0}t.constraints.push({view1:x,attr1:t.prevAttr,relation:t.relation.relation,view2:E,attr2:t.curAttr,multiplier:t.relation.multiplier,constant:"default"!==t.relation.constant&&t.relation.constant?-t.relation.constant:t.relation.constant,priority:t.relation.priority})}var S=h.constraints;if(S)for(var T=0;T<S.length;T++)t.prevAttr=t.horizontal?s.WIDTH:s.HEIGHT,t.curAttr=S[T].view||S[T].multiplier?S[T].attribute||t.prevAttr:S[T].variable?s.VARIABLE:s.CONST,t.constraints.push({view1:E,attr1:t.prevAttr,relation:S[T].relation,view2:S[T].view,attr2:t.curAttr,multiplier:S[T].multiplier,constant:S[T].constant,priority:S[T].priority});h.cascade&&g(t,h.cascade,h)}else","!==h&&(t.prevViews=o,o=[],t.relation=h[0],void 0!==t.prevViews&&(t.relation.equalSpacing&&p(t,r),t.relation.multiplier&&d(t,r)))}if(r){if(l=t.subViews[r]){if(l.stack){var C=Error('A stack named "'+r+'" has already been created');throw C.column=i.$parserOffset+1,C}}else l={orientations:t.orientation},t.subViews[r]=l;l.stack={orientation:t.orientation,processedOrientations:t.orientation,subViews:n},f(t,r,l)}}var m=["viewport","spacing","colors","shapes","widths","heights"],v=function(){function t(){n(this,t)}return r(t,null,[{key:"parseLine",value:function t(e,i){if(0===e.length||i&&i.extended&&0===e.indexOf("//"))return[];var r=i&&i.extended?h.parse(e):u.parse(e);if(i&&"raw"===i.outFormat)return[r];var n={constraints:[],lineIndex:(i?i.lineIndex:void 0)||1,subViews:(i?i.subViews:void 0)||{}};if("attribute"===r.type)for(var o=0;o<r.attributes.length;o++)for(var s=r.attributes[o],l=0;l<s.predicates.length;l++){var p=s.predicates[l];n.constraints.push({view1:r.view,attr1:s.attr,relation:p.relation,view2:p.view,attr2:p.attribute||s.attr,multiplier:p.multiplier,constant:p.constant,priority:p.priority})}else switch(r.orientation){case"horizontal":n.orientation=c.HORIZONTAL,n.horizontal=!0,g(n,r.cascade,null);break;case"vertical":n.orientation=c.VERTICAL,g(n,r.cascade,null);break;case"horzvert":n.orientation=c.HORIZONTAL,n.horizontal=!0,g(n,r.cascade,null),g(n={constraints:n.constraints,lineIndex:n.lineIndex,subViews:n.subViews,orientation:c.VERTICAL},r.cascade,null);break;case"zIndex":n.orientation=c.ZINDEX,g(n,r.cascade,null)}return n.constraints}},{key:"parse",value:function t(e,i){var r=i&&i.lineSeparator?i.lineSeparator:"\n";if(!Array.isArray(e)&&0>e.indexOf(r))try{return this.parseLine(e,i)}catch(n){throw n.source=e,n}e=Array.isArray(e)?e:[e];var o=void 0,s=[],l=0,u=void 0,h={lineIndex:l,extended:i&&i.extended,strict:!i||void 0===i.strict||i.strict,outFormat:i?i.outFormat:void 0,subViews:{}};try{for(var c=0;c<e.length;c++){o=e[c].split(r);for(var p=0;p<o.length;p++)u=o[p],l++,h.lineIndex=l,h.strict||(u=u.trim()),(h.strict||u.length)&&(s=s.concat(this.parseLine(u,h)))}}catch(d){throw d.source=u,d.line=l,d}return s}},{key:"parseMetaInfo",value:function t(e,i){var r,n=i&&i.lineSeparator?i.lineSeparator:"\n",o=i?i.prefix:void 0;e=Array.isArray(e)?e:[e];for(var s={},l=0;l<e.length;l++)for(var u=e[l].split(n),h=0;h<u.length;h++)for(var c=u[h],p=0;p<m.length;p++)for(var d=0;d<(o?2:1);d++){var f=m[p],g=(0===d?"":o)+f;if(0===c.indexOf("//"+g+" "))for(var v=c.substring(3+g.length).split(" "),$=0;$<v.length;$++){s[f]=s[f]||{};for(var _=v[$].split(":"),E=y(_[0],!0),A=0;A<E.length;A++)s[f][E[A]]=_.length>1?_[1]:""}else 0===c.indexOf("//"+g+":")&&(s[f]=c.substring(3+g.length))}if(s.viewport){var x=s.viewport,S=x["aspect-ratio"];S&&(S=S.split("/"),x["aspect-ratio"]=parseInt(S[0])/parseInt(S[1])),void 0!==x.height&&(x.height="intrinsic"===x.height||parseInt(x.height)),void 0!==x.width&&(x.width="intrinsic"===x.width||parseInt(x.width)),void 0!==x["max-height"]&&(x["max-height"]=parseInt(x["max-height"])),void 0!==x["max-width"]&&(x["max-width"]=parseInt(x["max-width"])),void 0!==x["min-height"]&&(x["min-height"]=parseInt(x["min-height"])),void 0!==x["min-width"]&&(x["min-width"]=parseInt(x["min-width"]))}if(s.widths)for(r in s.widths){var T="intrinsic"===s.widths[r]||parseInt(s.widths[r]);s.widths[r]=T,(void 0===T||isNaN(T))&&delete s.widths[r]}if(s.heights)for(r in s.heights){var C="intrinsic"===s.heights[r]||parseInt(s.heights[r]);s.heights[r]=C,(void 0===C||isNaN(C))&&delete s.heights[r]}if(s.spacing){var I=JSON.parse(s.spacing);if(s.spacing=I,Array.isArray(I)){for(var O=0,V=I.length;O<V;O++)if(isNaN(I[O])){delete s.spacing;break}}else(void 0===I||isNaN(I))&&delete s.spacing}return s}}]),t}(),$=function(){function t(e){n(this,t),this._name=e.name,this._type=e.type,this._solver=e.solver,this._attr={},e.name||(this._attr[s.LEFT]=new o.Variable,this._solver.addConstraint(new o.StayConstraint(this._attr[s.LEFT],o.Strength.required)),this._attr[s.TOP]=new o.Variable,this._solver.addConstraint(new o.StayConstraint(this._attr[s.TOP],o.Strength.required)),this._attr[s.ZINDEX]=new o.Variable,this._solver.addConstraint(new o.StayConstraint(this._attr[s.ZINDEX],o.Strength.required)))}return r(t,[{key:"toJSON",value:function t(){return{name:this.name,left:this.left,top:this.top,width:this.width,height:this.height}}},{key:"toString",value:function t(){JSON.stringify(this.toJSON(),void 0,2)}},{key:"getValue",value:function t(e){return this._attr[e]?this._attr[e].value():void 0}},{key:"_getAttr",value:function t(e){if(this._attr[e])return this._attr[e];switch(this._attr[e]=new o.Variable,e){case s.RIGHT:this._getAttr(s.LEFT),this._getAttr(s.WIDTH),this._solver.addConstraint(new o.Equation(this._attr[e],o.plus(this._attr[s.LEFT],this._attr[s.WIDTH])));break;case s.BOTTOM:this._getAttr(s.TOP),this._getAttr(s.HEIGHT),this._solver.addConstraint(new o.Equation(this._attr[e],o.plus(this._attr[s.TOP],this._attr[s.HEIGHT])));break;case s.CENTERX:this._getAttr(s.LEFT),this._getAttr(s.WIDTH),this._solver.addConstraint(new o.Equation(this._attr[e],o.plus(this._attr[s.LEFT],o.divide(this._attr[s.WIDTH],2))));break;case s.CENTERY:this._getAttr(s.TOP),this._getAttr(s.HEIGHT),this._solver.addConstraint(new o.Equation(this._attr[e],o.plus(this._attr[s.TOP],o.divide(this._attr[s.HEIGHT],2))))}return this._attr[e]}},{key:"_getAttrValue",value:function t(e){return this._getAttr(e).value}},{key:"name",get:function t(){return this._name}},{key:"left",get:function t(){return this._getAttrValue(s.LEFT)}},{key:"right",get:function t(){return this._getAttrValue(s.RIGHT)}},{key:"width",get:function t(){return this._getAttrValue(s.WIDTH)}},{key:"height",get:function t(){return this._getAttrValue(s.HEIGHT)}},{key:"intrinsicWidth",get:function t(){return this._intrinsicWidth},set:function t(e){if(void 0!==e&&e!==this._intrinsicWidth){var i=this._getAttr(s.WIDTH);void 0===this._intrinsicWidth&&this._solver.addEditVar(i,new o.Strength("required",this._name?998:999,1e3,1e3)),this._intrinsicWidth=e,this._solver.suggestValue(i,e),this._solver.resolve()}}},{key:"intrinsicHeight",get:function t(){return this._intrinsicHeight},set:function t(e){if(void 0!==e&&e!==this._intrinsicHeight){var i=this._getAttr(s.HEIGHT);void 0===this._intrinsicHeight&&this._solver.addEditVar(i,new o.Strength("required",this._name?998:999,1e3,1e3)),this._intrinsicHeight=e,this._solver.suggestValue(i,e),this._solver.resolve()}}},{key:"top",get:function t(){return this._getAttrValue(s.TOP)}},{key:"bottom",get:function t(){return this._getAttrValue(s.BOTTOM)}},{key:"centerX",get:function t(){return this._getAttrValue(s.CENTERX)}},{key:"centerY",get:function t(){return this._getAttrValue(s.CENTERY)}},{key:"zIndex",get:function t(){return this._getAttrValue(s.ZINDEX)}},{key:"type",get:function t(){return this._type}}]),t}(),_=new o.Strength("defaultPriority",0,1e3,1e3);function E(t,e){var i=new o.Variable({value:e});return this._solver.addConstraint(new o.StayConstraint(i,o.Strength.required,0)),i}function A(t){return t?t.name?(this._subViews[t.name]=this._subViews[t.name]||new $({name:t.name,solver:this._solver}),this._subViews[t.name]._type=this._subViews[t.name]._type||t.type,this._subViews[t.name]):(this._subViews[t]=this._subViews[t]||new $({name:t,solver:this._solver}),this._subViews[t]):this._parentSubView}function x(t){var e=4;if(t.view1||"left"!==t.attr1){if(t.view1||"top"!==t.attr1){if(t.view2||"right"!==t.attr2){if(t.view2||"bottom"!==t.attr2)switch(t.attr1){case"left":case"right":case"centerX":case"leading":case"trailing":e=4;break;case"zIndex":e=6;break;default:e=5}else e=2}else e=1}else e=0}else e=3;return this._spacingVars=this._spacingVars||Array(7),this._spacingExpr=this._spacingExpr||Array(7),this._spacingVars[e]||(this._spacingVars[e]=new o.Variable,this._solver.addEditVar(this._spacingVars[e]),this._spacingExpr[e]=o.minus(0,this._spacingVars[e]),this._solver.suggestValue(this._spacingVars[e],this._spacing[e])),this._spacingExpr[e]}function S(t){var e=void 0,i=void 0!==t.multiplier?t.multiplier:1,r=void 0!==t.constant?t.constant:0;"default"===r&&(r=x.call(this,t));var n=A.call(this,t.view1)._getAttr(t.attr1),u=void 0;t.attr2===s.CONST?u=E.call(this,void 0,t.constant):(u=A.call(this,t.view2)._getAttr(t.attr2),1!==i&&r?u=o.plus(o.times(u,i),r):r?u=o.plus(u,r):1!==i&&(u=o.times(u,i)));var h=void 0!==t.priority&&t.priority<1e3?new o.Strength("priority",0,t.priority,1e3):_;switch(t.relation){case l.EQU:e=new o.Equation(n,u,h);break;case l.GEQ:e=new o.Inequality(n,o.GEQ,u,h);break;case l.LEQ:e=new o.Inequality(n,o.LEQ,u,h);break;default:throw"Invalid relation specified: "+t.relation}this._solver.addConstraint(e)}var T=function(){function t(e){n(this,t),this._solver=new o.SimplexSolver,this._subViews={},this._parentSubView=new $({solver:this._solver}),this.setSpacing(e&&void 0!==e.spacing?e.spacing:8),e&&((void 0!==e.width||void 0!==e.height)&&this.setSize(e.width,e.height),e.constraints&&this.addConstraints(e.constraints))}return r(t,[{key:"setSize",value:function t(e,i){return this._parentSubView.intrinsicWidth=e,this._parentSubView.intrinsicHeight=i,this}},{key:"setSpacing",value:function t(e){switch(Array.isArray(e)?e.length:-1){case -1:e=[e,e,e,e,e,e,1];break;case 1:e=[e[0],e[0],e[0],e[0],e[0],e[0],1];break;case 2:e=[e[1],e[0],e[1],e[0],e[0],e[1],1];break;case 3:e=[e[1],e[0],e[1],e[0],e[0],e[1],e[2]];break;case 6:e=[e[0],e[1],e[2],e[3],e[4],e[5],1];break;case 7:break;default:throw"Invalid spacing syntax"}if(!function t(e,i){if(e===i)return!0;if(!e||!i)return!1;for(var r=0;r<7;r++)if(e[r]!==i[r])return!1;return!0}(this._spacing,e)&&(this._spacing=e,this._spacingVars)){for(var i=0;i<this._spacingVars.length;i++)this._spacingVars[i]&&this._solver.suggestValue(this._spacingVars[i],this._spacing[i]);this._solver.resolve()}return this}},{key:"addConstraint",value:function t(e){return S.call(this,e),this}},{key:"addConstraints",value:function t(e){for(var i=0;i<e.length;i++)S.call(this,e[i]);return this}},{key:"width",get:function t(){return this._parentSubView.intrinsicWidth}},{key:"height",get:function t(){return this._parentSubView.intrinsicHeight}},{key:"fittingWidth",get:function t(){return this._parentSubView.width}},{key:"fittingHeight",get:function t(){return this._parentSubView.height}},{key:"subViews",get:function t(){return this._subViews}}]),t}();e.exports={Attribute:s,Relation:l,Priority:{REQUIRED:1e3,DEFAULTHIGH:750,DEFAULTLOW:250},VisualFormat:v,View:T,SubView:$}},{"cassowary/bin/c":2}],2:[function(t,e,i){(function(){var i,r,n,o,s,l,u,h,c,p,d,f,y,g,m,v,$,_,E,A,x,S;(function(i){"use strict";try{(function(){}).bind(i)}catch(r){Object.defineProperty(Function.prototype,"bind",{value:function(t){var e=this;return function(){return e.apply(t,arguments)}},enumerable:!1,configurable:!0,writable:!0})}var n=0,o=void 0!==i.HTMLElement,s=function(t){for(var e=null;t&&t!=Object.prototype;){if(t.tagName){e=t.tagName;break}t=t.prototype}return e||"div"},l={},u=function(t,e){if(t&&e){if("function"==typeof t[e])return t[e];var i=t.prototype;if(i&&"function"==typeof i[e])return i[e];if(i!==Object.prototype&&i!==Function.prototype)return"function"==typeof t.__super__?u(t.__super__,e):void 0}},h=i.c={debug:!1,trace:!1,verbose:!1,traceAdded:!1,GC:!1,GEQ:1,LEQ:2,inherit:function(t){var e=null,r=null;t.extends&&(r=t.extends,delete t.extends),t.initialize&&(e=t.initialize,delete t.initialize);var n=e||function(){};Object.defineProperty(n,"__super__",{value:r||Object,enumerable:!1,configurable:!0,writable:!1}),t._t&&(l[t._t]=n);var u=n.prototype=Object.create(r?r.prototype:Object.prototype);if(this.extend(u,t),o&&r&&r.prototype instanceof i.HTMLElement){var h=n,c=s(u),p=function(t){return t.__proto__=u,h.apply(t,arguments),u.created&&t.created(),u.decorate&&t.decorate(),t};this.extend(u,{upgrade:p}),(n=function(){return p(i.document.createElement(c))}).prototype=u,this.extend(n,{ctor:h})}return n},extend:function(t,e){return this.own(e,function(i){var r=Object.getOwnPropertyDescriptor(e,i);try{"function"==typeof r.get||"function"==typeof r.set?Object.defineProperty(t,i,r):"function"==typeof r.value||"_"===i.charAt(0)?(r.writable=!0,r.configurable=!0,r.enumerable=!1,Object.defineProperty(t,i,r)):t[i]=e[i]}catch(n){}}),t},own:function(t,e,r){return Object.getOwnPropertyNames(t).forEach(e,r||i),t},traceprint:function(t){h.verbose&&console.log(t)},fnenterprint:function(t){console.log("* "+t)},fnexitprint:function(t){console.log("- "+t)},assert:function(t,e){if(!t)throw new h.InternalError("Assertion failed: "+e)},plus:function(t,e){return t instanceof h.Expression||(t=new h.Expression(t)),e instanceof h.Expression||(e=new h.Expression(e)),t.plus(e)},minus:function(t,e){return t instanceof h.Expression||(t=new h.Expression(t)),e instanceof h.Expression||(e=new h.Expression(e)),t.minus(e)},times:function(t,e){return("number"==typeof t||t instanceof h.Variable)&&(t=new h.Expression(t)),("number"==typeof e||e instanceof h.Variable)&&(e=new h.Expression(e)),t.times(e)},divide:function(t,e){return("number"==typeof t||t instanceof h.Variable)&&(t=new h.Expression(t)),("number"==typeof e||e instanceof h.Variable)&&(e=new h.Expression(e)),t.divide(e)},approx:function(t,e){var i,r;return t===e||(i=t instanceof h.Variable?t.value:t,r=e instanceof h.Variable?e.value:e,0==i?1e-8>Math.abs(r):0==r?1e-8>Math.abs(i):Math.abs(i-r)<1e-8*Math.abs(i))},_inc:function(){return n++},parseJSON:function(t){return JSON.parse(t,function(t,e){if("object"!=typeof e||"string"!=typeof e._t)return e;var i=e._t,r=l[i];if(i&&r){var n=u(r,"fromJSON");if(n)return n(e,r)}return e})}};"function"==typeof t&&void 0!==e&&"undefined"==typeof load&&(i.exports=h)})(this),i=this.c||e.parent.exports||{},r=function(t){return t.hashCode?t.hashCode:""+t},n=function(t,e){Object.keys(t).forEach(function(i){e[i]=t[i]})},o={},i.HashTable=i.inherit({initialize:function(){this.size=0,this._store={},this._keyStrMap={},this._deleted=0},set:function(t,e){var i=r(t);this._store.hasOwnProperty(i)||this.size++,this._store[i]=e,this._keyStrMap[i]=t},get:function(t){return this.size?(t=r(t),void 0!==this._store[t]?this._store[t]:null):null},clear:function(){this.size=0,this._store={},this._keyStrMap={}},_compact:function(){var t={};n(this._store,t),this._store=t},_compactThreshold:100,_perhapsCompact:function(){this._size>64||this._deleted>this._compactThreshold&&(this._compact(),this._deleted=0)},delete:function(t){t=r(t),this._store.hasOwnProperty(t)&&(this._deleted++,delete this._store[t],this.size>0&&this.size--)},each:function(t,e){if(this.size){this._perhapsCompact();var i=this._store,r=this._keyStrMap;Object.keys(this._store).forEach(function(n){t.call(e||null,r[n],i[n])},this)}},escapingEach:function(t,e){if(this.size){this._perhapsCompact();for(var i,r=this._store,n=this._keyStrMap,s=o,l=Object.keys(r),u=0;l.length>u;u++)if(i=l[u],this._store.hasOwnProperty(i)&&(s=t.call(e||null,n[i],r[i])),s){if(void 0!==s.retval)return s;if(s.brk)break}}},clone:function(){var t=new i.HashTable;return this.size&&(t.size=this.size,n(this._store,t._store),n(this._keyStrMap,t._keyStrMap)),t},equals:function(t){if(t===this)return!0;if(!(t instanceof i.HashTable)||t._size!==this._size)return!1;for(var e=Object.keys(this._store),r=0;e.length>r;r++){var n=e[r];if(this._keyStrMap[n]!==t._keyStrMap[n]||this._store[n]!==t._store[n])return!1}return!0},toString:function(){var t="";return this.each(function(e,i){t+=e+" => "+i+"\n"}),t}}),(s=this.c||e.parent.exports||{}).HashSet=s.inherit({_t:"c.HashSet",initialize:function(){this.storage=[],this.size=0},add:function(t){var e=this.storage;e.indexOf(t),-1==e.indexOf(t)&&e.push(t),this.size=this.storage.length},values:function(){return this.storage},has:function(t){return -1!=this.storage.indexOf(t)},delete:function(t){var e=this.storage.indexOf(t);return -1==e?null:(this.storage.splice(e,1)[0],void(this.size=this.storage.length))},clear:function(){this.storage.length=0},each:function(t,e){this.size&&this.storage.forEach(t,e)},escapingEach:function(t,e){this.size&&this.storage.forEach(t,e)},toString:function(){var t=this.size+" {",e=!0;return this.each(function(i){e?e=!1:t+=", ",t+=i}),t+="}\n"},toJSON:function(){var t=[];return this.each(function(e){t.push(e.toJSON())}),{_t:"c.HashSet",data:t}},fromJSON:function(t){var e=new s.HashSet;return t.data&&(e.size=t.data.length,e.storage=t.data),e}}),(l=this.c||e.parent.exports||{}).Error=l.inherit({initialize:function(t){t&&(this._description=t)},_name:"c.Error",_description:"An error has occured in Cassowary",set description(a){this._description=a},get description(){return"("+this._name+") "+this._description},get message(){return this.description},toString:function(){return this.description}}),u=function(t,e){return l.inherit({extends:l.Error,initialize:function(){l.Error.apply(this,arguments)},_name:t||"",_description:e||""})},l.ConstraintNotFound=u("c.ConstraintNotFound","Tried to remove a constraint never added to the tableu"),l.InternalError=u("c.InternalError"),l.NonExpression=u("c.NonExpression","The resulting expression would be non"),l.NotEnoughStays=u("c.NotEnoughStays","There are not enough stays to give specific values to every variable"),l.RequiredFailure=u("c.RequiredFailure","A required constraint cannot be satisfied"),l.TooDifficult=u("c.TooDifficult","The constraints are too difficult to solve"),(h=this.c||e.parent.exports||{}).SymbolicWeight=h.inherit({_t:"c.SymbolicWeight",initialize:function(){this.value=0;for(var t=1,e=arguments.length-1;e>=0;--e)this.value+=arguments[e]*t,t*=1e3},toJSON:function(){return{_t:this._t,value:this.value}}}),(c=this.c||(void 0!==e?e.parent.exports.c:{})).Strength=c.inherit({initialize:function(t,e,i,r){this.name=t,this.symbolicWeight=e instanceof c.SymbolicWeight?e:new c.SymbolicWeight(e,i,r)},get required(){return this===c.Strength.required},toString:function(){return this.name+(this.isRequired?"":":"+this.symbolicWeight)}}),c.Strength.required=new c.Strength("<Required>",1e3,1e3,1e3),c.Strength.strong=new c.Strength("strong",1,0,0),c.Strength.medium=new c.Strength("medium",0,1,0),c.Strength.weak=new c.Strength("weak",0,0,1),(p=this.c||e.parent.exports||{}).AbstractVariable=p.inherit({isDummy:!1,isExternal:!1,isPivotable:!1,isRestricted:!1,_init:function(t,e){this.hashCode=p._inc(),this.name=(e||"")+this.hashCode,t&&(void 0!==t.name&&(this.name=t.name),void 0!==t.value&&(this.value=t.value),void 0!==t.prefix&&(this._prefix=t.prefix))},_prefix:"",name:"",value:0,toJSON:function(){var t={};return this._t&&(t._t=this._t),this.name&&(t.name=this.name),void 0!==this.value&&(t.value=this.value),this._prefix&&(t._prefix=this._prefix),this._t&&(t._t=this._t),t},fromJSON:function(t,e){var i=new e;return p.extend(i,t),i},toString:function(){return this._prefix+"["+this.name+":"+this.value+"]"}}),p.Variable=p.inherit({_t:"c.Variable",extends:p.AbstractVariable,initialize:function(t){this._init(t,"v");var e=p.Variable._map;e&&(e[this.name]=this)},isExternal:!0}),p.DummyVariable=p.inherit({_t:"c.DummyVariable",extends:p.AbstractVariable,initialize:function(t){this._init(t,"d")},isDummy:!0,isRestricted:!0,value:"dummy"}),p.ObjectiveVariable=p.inherit({_t:"c.ObjectiveVariable",extends:p.AbstractVariable,initialize:function(t){this._init(t,"o")},value:"obj"}),p.SlackVariable=p.inherit({_t:"c.SlackVariable",extends:p.AbstractVariable,initialize:function(t){this._init(t,"s")},isPivotable:!0,isRestricted:!0,value:"slack"}),(d=this.c||e.parent.exports||{}).Point=d.inherit({initialize:function(t,e,i){if(t instanceof d.Variable)this._x=t;else{var r={value:t};i&&(r.name="x"+i),this._x=new d.Variable(r)}if(e instanceof d.Variable)this._y=e;else{var n={value:e};i&&(n.name="y"+i),this._y=new d.Variable(n)}},get x(){return this._x},set x(b){b instanceof d.Variable?this._x=b:this._x.value=b},get y(){return this._y},set y(b){b instanceof d.Variable?this._y=b:this._y.value=b},toString:function(){return"("+this.x+", "+this.y+")"}}),(f=this.c||e.parent.exports||{}).Expression=f.inherit({initialize:function(t,e,i){f.GC&&console.log("new c.Expression"),this.constant="number"!=typeof i||isNaN(i)?0:i,this.terms=new f.HashTable,t instanceof f.AbstractVariable?this.setVariable(t,"number"==typeof e?e:1):"number"==typeof t&&(isNaN(t)?console.trace():this.constant=t)},initializeFromHash:function(t,e){return f.verbose&&(console.log("*******************************"),console.log("clone c.initializeFromHash"),console.log("*******************************")),f.GC&&console.log("clone c.Expression"),this.constant=t,this.terms=e.clone(),this},multiplyMe:function(t){this.constant*=t;var e=this.terms;return e.each(function(i,r){e.set(i,r*t)}),this},clone:function(){f.verbose&&(console.log("*******************************"),console.log("clone c.Expression"),console.log("*******************************"));var t=new f.Expression;return t.initializeFromHash(this.constant,this.terms),t},times:function(t){if("number"==typeof t)return this.clone().multiplyMe(t);if(this.isConstant)return t.times(this.constant);if(t.isConstant)return this.times(t.constant);throw new f.NonExpression},plus:function(t){return t instanceof f.Expression?this.clone().addExpression(t,1):t instanceof f.Variable?this.clone().addVariable(t,1):void 0},minus:function(t){return t instanceof f.Expression?this.clone().addExpression(t,-1):t instanceof f.Variable?this.clone().addVariable(t,-1):void 0},divide:function(t){if("number"==typeof t){if(f.approx(t,0))throw new f.NonExpression;return this.times(1/t)}if(t instanceof f.Expression){if(!t.isConstant)throw new f.NonExpression;return this.times(1/t.constant)}},addExpression:function(t,e,i,r){return t instanceof f.AbstractVariable&&(t=new f.Expression(t),f.trace&&console.log("addExpression: Had to cast a var to an expression")),e=e||1,this.constant+=e*t.constant,t.terms.each(function(t,n){this.addVariable(t,n*e,i,r)},this),this},addVariable:function(t,e,i,r){null==e&&(e=1),f.trace&&console.log("c.Expression::addVariable():",t,e);var n=this.terms.get(t);if(n){var o=n+e;0==o||f.approx(o,0)?(r&&r.noteRemovedVariable(t,i),this.terms.delete(t)):this.setVariable(t,o)}else f.approx(e,0)||(this.setVariable(t,e),r&&r.noteAddedVariable(t,i));return this},setVariable:function(t,e){return this.terms.set(t,e),this},anyPivotableVariable:function(){if(this.isConstant)throw new f.InternalError("anyPivotableVariable called on a constant");var t=this.terms.escapingEach(function(t){return t.isPivotable?{retval:t}:void 0});return t&&void 0!==t.retval?t.retval:null},substituteOut:function(t,e,i,r){f.trace&&(f.fnenterprint("CLE:substituteOut: "+t+", "+e+", "+i+", ..."),f.traceprint("this = "+this));var n=this.setVariable.bind(this),o=this.terms,s=o.get(t);o.delete(t),this.constant+=s*e.constant,e.terms.each(function(t,e){var l=o.get(t);if(l){var u=l+s*e;f.approx(u,0)?(r.noteRemovedVariable(t,i),o.delete(t)):n(t,u)}else n(t,s*e),r&&r.noteAddedVariable(t,i)}),f.trace&&f.traceprint("Now this is "+this)},changeSubject:function(t,e){this.setVariable(t,this.newSubject(e))},newSubject:function(t){f.trace&&f.fnenterprint("newSubject:"+t);var e=1/this.terms.get(t);return this.terms.delete(t),this.multiplyMe(-e),e},coefficientFor:function(t){return this.terms.get(t)||0},get isConstant(){return 0==this.terms.size},toString:function(){var t="",e=!1;if(!f.approx(this.constant,0)||this.isConstant){if(t+=this.constant,this.isConstant)return t;e=!0}return this.terms.each(function(i,r){e&&(t+=" + "),t+=r+"*"+i,e=!0}),t},equals:function(t){return t===this||t instanceof f.Expression&&t.constant===this.constant&&t.terms.equals(this.terms)},Plus:function(t,e){return t.plus(e)},Minus:function(t,e){return t.minus(e)},Times:function(t,e){return t.times(e)},Divide:function(t,e){return t.divide(e)}}),(y=this.c||e.parent.exports||{}).AbstractConstraint=y.inherit({initialize:function(t,e){this.hashCode=y._inc(),this.strength=t||y.Strength.required,this.weight=e||1},isEditConstraint:!1,isInequality:!1,isStayConstraint:!1,get required(){return this.strength===y.Strength.required},toString:function(){return this.strength+" {"+this.weight+"} ("+this.expression+")"}}),g=y.AbstractConstraint.prototype.toString,m=function(t,e,i){y.AbstractConstraint.call(this,e||y.Strength.strong,i),this.variable=t,this.expression=new y.Expression(t,-1,t.value)},y.EditConstraint=y.inherit({extends:y.AbstractConstraint,initialize:function(){m.apply(this,arguments)},isEditConstraint:!0,toString:function(){return"edit:"+g.call(this)}}),y.StayConstraint=y.inherit({extends:y.AbstractConstraint,initialize:function(){m.apply(this,arguments)},isStayConstraint:!0,toString:function(){return"stay:"+g.call(this)}}),v=y.Constraint=y.inherit({extends:y.AbstractConstraint,initialize:function(t,e,i){y.AbstractConstraint.call(this,e,i),this.expression=t}}),y.Inequality=y.inherit({extends:y.Constraint,_cloneOrNewCle:function(t){return t.clone?t.clone():new y.Expression(t)},initialize:function(t,e,i,r,n){var o=t instanceof y.Expression,s=i instanceof y.Expression,l=t instanceof y.AbstractVariable,u=i instanceof y.AbstractVariable,h="number"==typeof t,c="number"==typeof i;if((o||h)&&u){var p=t,d=e,f=i,g=r,m=n;if(v.call(this,this._cloneOrNewCle(p),g,m),d==y.LEQ)this.expression.multiplyMe(-1),this.expression.addVariable(f);else{if(d!=y.GEQ)throw new y.InternalError("Invalid operator in c.Inequality constructor");this.expression.addVariable(f,-1)}}else if(l&&(s||c)){var p=i,d=e,f=t,g=r,m=n;if(v.call(this,this._cloneOrNewCle(p),g,m),d==y.GEQ)this.expression.multiplyMe(-1),this.expression.addVariable(f);else{if(d!=y.LEQ)throw new y.InternalError("Invalid operator in c.Inequality constructor");this.expression.addVariable(f,-1)}}else{if(o&&c){var $=t,d=e,_=i,g=r,m=n;if(v.call(this,this._cloneOrNewCle($),g,m),d==y.LEQ)this.expression.multiplyMe(-1),this.expression.addExpression(this._cloneOrNewCle(_));else{if(d!=y.GEQ)throw new y.InternalError("Invalid operator in c.Inequality constructor");this.expression.addExpression(this._cloneOrNewCle(_),-1)}return this}if(h&&s){var $=i,d=e,_=t,g=r,m=n;if(v.call(this,this._cloneOrNewCle($),g,m),d==y.GEQ)this.expression.multiplyMe(-1),this.expression.addExpression(this._cloneOrNewCle(_));else{if(d!=y.LEQ)throw new y.InternalError("Invalid operator in c.Inequality constructor");this.expression.addExpression(this._cloneOrNewCle(_),-1)}return this}if(o&&s){var $=t,d=e,_=i,g=r,m=n;if(v.call(this,this._cloneOrNewCle(_),g,m),d==y.GEQ)this.expression.multiplyMe(-1),this.expression.addExpression(this._cloneOrNewCle($));else{if(d!=y.LEQ)throw new y.InternalError("Invalid operator in c.Inequality constructor");this.expression.addExpression(this._cloneOrNewCle($),-1)}}else{if(o)return v.call(this,t,e,i);if(e==y.GEQ)v.call(this,new y.Expression(i),r,n),this.expression.multiplyMe(-1),this.expression.addVariable(t);else{if(e!=y.LEQ)throw new y.InternalError("Invalid operator in c.Inequality constructor");v.call(this,new y.Expression(i),r,n),this.expression.addVariable(t,-1)}}}},isInequality:!0,toString:function(){return v.prototype.toString.call(this)+" >= 0) id: "+this.hashCode}}),y.Equation=y.inherit({extends:y.Constraint,initialize:function(t,e,i,r){if(t instanceof y.Expression&&!e||e instanceof y.Strength)v.call(this,t,e,i);else if(t instanceof y.AbstractVariable&&e instanceof y.Expression){var n=t,o=e,s=i,l=r;v.call(this,o.clone(),s,l),this.expression.addVariable(n,-1)}else if(t instanceof y.AbstractVariable&&"number"==typeof e){var n=t,u=e,s=i,l=r;v.call(this,new y.Expression(u),s,l),this.expression.addVariable(n,-1)}else if(t instanceof y.Expression&&e instanceof y.AbstractVariable){var o=t,n=e,s=i,l=r;v.call(this,o.clone(),s,l),this.expression.addVariable(n,-1)}else{if(!(t instanceof y.Expression||t instanceof y.AbstractVariable||"number"==typeof t)||!(e instanceof y.Expression||e instanceof y.AbstractVariable||"number"==typeof e))throw"Bad initializer to c.Equation";t=t instanceof y.Expression?t.clone():new y.Expression(t),e=e instanceof y.Expression?e.clone():new y.Expression(e),v.call(this,t,i,r),this.expression.addExpression(e,-1)}y.assert(this.strength instanceof y.Strength,"_strength not set")},toString:function(){return v.prototype.toString.call(this)+" = 0)"}}),($=this.c||e.parent.exports||{}).EditInfo=$.inherit({initialize:function(t,e,i,r,n){this.constraint=t,this.editPlus=e,this.editMinus=i,this.prevEditConstant=r,this.index=n},toString:function(){return"<cn="+this.constraint+", ep="+this.editPlus+", em="+this.editMinus+", pec="+this.prevEditConstant+", index="+this.index+">"}}),(_=this.c||e.parent.exports||{}).Tableau=_.inherit({initialize:function(){this.columns=new _.HashTable,this.rows=new _.HashTable,this._infeasibleRows=new _.HashSet,this._externalRows=new _.HashSet,this._externalParametricVars=new _.HashSet},noteRemovedVariable:function(t,e){_.trace&&console.log("c.Tableau::noteRemovedVariable: ",t,e);var i=this.columns.get(t);e&&i&&i.delete(e)},noteAddedVariable:function(t,e){e&&this.insertColVar(t,e)},getInternalInfo:function(){var t="Tableau Information:\n";return t+="Rows: "+this.rows.size,t+=" (= "+(this.rows.size-1)+" constraints)",t+="\nColumns: "+this.columns.size,t+="\nInfeasible Rows: "+this._infeasibleRows.size,t+="\nExternal basic variables: "+this._externalRows.size,t+="\nExternal parametric variables: ",t+=this._externalParametricVars.size,t+="\n"},toString:function(){var t="Tableau:\n";return this.rows.each(function(e,i){t+=e,t+=" <==> ",t+=i,t+="\n"}),t+="\nColumns:\n",t+=this.columns,t+="\nInfeasible rows: ",t+=this._infeasibleRows,t+="External basic variables: ",t+=this._externalRows,t+="External parametric variables: ",t+=this._externalParametricVars},insertColVar:function(t,e){var i=this.columns.get(t);i||(i=new _.HashSet,this.columns.set(t,i)),i.add(e)},addRow:function(t,e){_.trace&&_.fnenterprint("addRow: "+t+", "+e),this.rows.set(t,e),e.terms.each(function(e){this.insertColVar(e,t),e.isExternal&&this._externalParametricVars.add(e)},this),t.isExternal&&this._externalRows.add(t),_.trace&&_.traceprint(""+this)},removeColumn:function(t){_.trace&&_.fnenterprint("removeColumn:"+t);var e=this.columns.get(t);e?(this.columns.delete(t),e.each(function(e){this.rows.get(e).terms.delete(t)},this)):_.trace&&console.log("Could not find var",t,"in columns"),t.isExternal&&(this._externalRows.delete(t),this._externalParametricVars.delete(t))},removeRow:function(t){_.trace&&_.fnenterprint("removeRow:"+t);var e=this.rows.get(t);return _.assert(null!=e),e.terms.each(function(e){var i=this.columns.get(e);null!=i&&(_.trace&&console.log("removing from varset:",t),i.delete(t))},this),this._infeasibleRows.delete(t),t.isExternal&&this._externalRows.delete(t),this.rows.delete(t),_.trace&&_.fnexitprint("returning "+e),e},substituteOut:function(t,e){_.trace&&_.fnenterprint("substituteOut:"+t+", "+e),_.trace&&_.traceprint(""+this),this.columns.get(t).each(function(i){var r=this.rows.get(i);r.substituteOut(t,e,i,this),i.isRestricted&&0>r.constant&&this._infeasibleRows.add(i)},this),t.isExternal&&(this._externalRows.add(t),this._externalParametricVars.delete(t)),this.columns.delete(t)},columnsHasKey:function(t){return!!this.columns.get(t)}}),A=(E=this.c||e.parent.exports||{}).Tableau.prototype,x=E.Strength.weak,E.SimplexSolver=E.inherit({extends:E.Tableau,initialize:function(){E.Tableau.call(this),this._stayMinusErrorVars=[],this._stayPlusErrorVars=[],this._errorVars=new E.HashTable,this._markerVars=new E.HashTable,this._objective=new E.ObjectiveVariable({name:"Z"}),this._editVarMap=new E.HashTable,this._editVarList=[],this._slackCounter=0,this._artificialCounter=0,this._dummyCounter=0,this.autoSolve=!0,this._fNeedsSolving=!1,this._optimizeCount=0,this.rows.set(this._objective,new E.Expression),this._stkCedcns=[0],E.trace&&E.traceprint("objective expr == "+this.rows.get(this._objective))},addLowerBound:function(t,e){var i=new E.Inequality(t,E.GEQ,new E.Expression(e));return this.addConstraint(i)},addUpperBound:function(t,e){var i=new E.Inequality(t,E.LEQ,new E.Expression(e));return this.addConstraint(i)},addBounds:function(t,e,i){return this.addLowerBound(t,e),this.addUpperBound(t,i),this},add:function(){for(var t=0;arguments.length>t;t++)this.addConstraint(arguments[t]);return this},addConstraint:function(t){E.trace&&E.fnenterprint("addConstraint: "+t);var e=[,,],i=[,],r=this.newExpression(t,e,i);if(i=i[0],this.tryAddingDirectly(r)||this.addWithArtificialVariable(r),this._fNeedsSolving=!0,t.isEditConstraint){var n=this._editVarMap.size,o=e[0],s=e[1];!o instanceof E.SlackVariable&&console.warn("cvEplus not a slack variable =",o),!s instanceof E.SlackVariable&&console.warn("cvEminus not a slack variable =",s),E.debug&&console.log("new c.EditInfo("+t+", "+o+", "+s+", "+i+", "+n+")");var l=new E.EditInfo(t,o,s,i,n);this._editVarMap.set(t.variable,l),this._editVarList[n]={v:t.variable,info:l}}return this.autoSolve&&(this.optimize(this._objective),this._setExternalVariables()),this},addConstraintNoException:function(t){E.trace&&E.fnenterprint("addConstraintNoException: "+t);try{return this.addConstraint(t),!0}catch(e){return!1}},addEditVar:function(t,e){return E.trace&&E.fnenterprint("addEditVar: "+t+" @ "+e),this.addConstraint(new E.EditConstraint(t,e||E.Strength.strong))},beginEdit:function(){return E.assert(this._editVarMap.size>0,"_editVarMap.size > 0"),this._infeasibleRows.clear(),this._resetStayConstants(),this._stkCedcns.push(this._editVarMap.size),this},endEdit:function(){return E.assert(this._editVarMap.size>0,"_editVarMap.size > 0"),this.resolve(),this._stkCedcns.pop(),this.removeEditVarsTo(this._stkCedcns[this._stkCedcns.length-1]),this},removeAllEditVars:function(){return this.removeEditVarsTo(0)},removeEditVarsTo:function(t){try{for(var e=this._editVarList.length,i=t;e>i;i++)this._editVarList[i]&&this.removeConstraint(this._editVarMap.get(this._editVarList[i].v).constraint);return this._editVarList.length=t,E.assert(this._editVarMap.size==t,"_editVarMap.size == n"),this}catch(r){throw new E.InternalError("Constraint not found in removeEditVarsTo")}},addPointStays:function(t){return E.trace&&console.log("addPointStays",t),t.forEach(function(t,e){this.addStay(t.x,x,Math.pow(2,e)),this.addStay(t.y,x,Math.pow(2,e))},this),this},addStay:function(t,e,i){var r=new E.StayConstraint(t,e||x,i||1);return this.addConstraint(r)},removeConstraint:function(t){return this.removeConstraintInternal(t),this},removeConstraintInternal:function(t){E.trace&&E.fnenterprint("removeConstraintInternal: "+t),E.trace&&E.traceprint(""+this),this._fNeedsSolving=!0,this._resetStayConstants();var e=this.rows.get(this._objective),i=this._errorVars.get(t);E.trace&&E.traceprint("eVars == "+i),null!=i&&i.each(function(r){var n=this.rows.get(r);null==n?e.addVariable(r,-t.weight*t.strength.symbolicWeight.value,this._objective,this):e.addExpression(n,-t.weight*t.strength.symbolicWeight.value,this._objective,this),E.trace&&E.traceprint("now eVars == "+i)},this);var r=this._markerVars.get(t);if(this._markerVars.delete(t),null==r)throw new E.InternalError("Constraint not found in removeConstraintInternal");if(E.trace&&E.traceprint("Looking to remove var "+r),null==this.rows.get(r)){var n=this.columns.get(r);E.trace&&E.traceprint("Must pivot -- columns are "+n);var o=null,s=0;n.each(function(t){if(t.isRestricted){var e=this.rows.get(t),i=e.coefficientFor(r);if(E.trace&&E.traceprint("Marker "+r+"'s coefficient in "+e+" is "+i),0>i){var n=-e.constant/i;(null==o||s>n||E.approx(n,s)&&t.hashCode<o.hashCode)&&(s=n,o=t)}}},this),null==o&&(E.trace&&E.traceprint("exitVar is still null"),n.each(function(t){if(t.isRestricted){var e=this.rows.get(t),i=e.coefficientFor(r),n=e.constant/i;(null==o||s>n)&&(s=n,o=t)}},this)),null==o&&(0==n.size?this.removeColumn(r):n.escapingEach(function(t){return t!=this._objective?(o=t,{brk:!0}):void 0},this)),null!=o&&this.pivot(r,o)}if(null!=this.rows.get(r)&&this.removeRow(r),null!=i&&i.each(function(t){t!=r&&this.removeColumn(t)},this),t.isStayConstraint){if(null!=i)for(var l=0;this._stayPlusErrorVars.length>l;l++)i.delete(this._stayPlusErrorVars[l]),i.delete(this._stayMinusErrorVars[l])}else if(t.isEditConstraint){E.assert(null!=i,"eVars != null");var u=this._editVarMap.get(t.variable);this.removeColumn(u.editMinus),this._editVarMap.delete(t.variable)}return null!=i&&this._errorVars.delete(i),this.autoSolve&&(this.optimize(this._objective),this._setExternalVariables()),this},reset:function(){throw E.trace&&E.fnenterprint("reset"),new E.InternalError("reset not implemented")},resolveArray:function(t){E.trace&&E.fnenterprint("resolveArray"+t);var e=t.length;this._editVarMap.each(function(i,r){var n=r.index;e>n&&this.suggestValue(i,t[n])},this),this.resolve()},resolvePair:function(t,e){this.suggestValue(this._editVarList[0].v,t),this.suggestValue(this._editVarList[1].v,e),this.resolve()},resolve:function(){E.trace&&E.fnenterprint("resolve()"),this.dualOptimize(),this._setExternalVariables(),this._infeasibleRows.clear(),this._resetStayConstants()},suggestValue:function(t,e){E.trace&&console.log("suggestValue("+t+", "+e+")");var i=this._editVarMap.get(t);if(!i)throw new E.Error("suggestValue for variable "+t+", but var is not an edit variable");var r=e-i.prevEditConstant;return i.prevEditConstant=e,this.deltaEditConstant(r,i.editPlus,i.editMinus),this},solve:function(){return this._fNeedsSolving&&(this.optimize(this._objective),this._setExternalVariables()),this},setEditedValue:function(t,e){if(!this.columnsHasKey(t)&&null==this.rows.get(t))return t.value=e,this;if(!E.approx(e,t.value)){this.addEditVar(t),this.beginEdit();try{this.suggestValue(t,e)}catch(i){throw new E.InternalError("Error in setEditedValue")}this.endEdit()}return this},addVar:function(t){if(!this.columnsHasKey(t)&&null==this.rows.get(t)){try{this.addStay(t)}catch(e){throw new E.InternalError("Error in addVar -- required failure is impossible")}E.trace&&E.traceprint("added initial stay on "+t)}return this},getInternalInfo:function(){var t=A.getInternalInfo.call(this);return t+="\nSolver info:\n",t+="Stay Error Variables: ",t+=this._stayPlusErrorVars.length+this._stayMinusErrorVars.length,t+=" ("+this._stayPlusErrorVars.length+" +, ",t+=this._stayMinusErrorVars.length+" -)\n",t+="Edit Variables: "+this._editVarMap.size,t+="\n"},getDebugInfo:function(){return""+this+this.getInternalInfo()+"\n"},toString:function(){var t=A.getInternalInfo.call(this);return t+="\n_stayPlusErrorVars: ",t+="["+this._stayPlusErrorVars+"]",t+="\n_stayMinusErrorVars: ",t+="["+this._stayMinusErrorVars+"]",t+="\n",t+="_editVarMap:\n"+this._editVarMap,t+="\n"},getConstraintMap:function(){return this._markerVars},addWithArtificialVariable:function(t){E.trace&&E.fnenterprint("addWithArtificialVariable: "+t);var e=new E.SlackVariable({value:++this._artificialCounter,prefix:"a"}),i=new E.ObjectiveVariable({name:"az"}),r=t.clone();E.trace&&E.traceprint("before addRows:\n"+this),this.addRow(i,r),this.addRow(e,t),E.trace&&E.traceprint("after addRows:\n"+this),this.optimize(i);var n=this.rows.get(i);if(E.trace&&E.traceprint("azTableauRow.constant == "+n.constant),!E.approx(n.constant,0))throw this.removeRow(i),this.removeColumn(e),new E.RequiredFailure;var o=this.rows.get(e);if(null!=o){if(o.isConstant)return this.removeRow(e),void this.removeRow(i);var s=o.anyPivotableVariable();this.pivot(s,e)}E.assert(null==this.rows.get(e),"rowExpression(av) == null"),this.removeColumn(e),this.removeRow(i)},tryAddingDirectly:function(t){E.trace&&E.fnenterprint("tryAddingDirectly: "+t);var e=this.chooseSubject(t);return null==e?(E.trace&&E.fnexitprint("returning false"),!1):(t.newSubject(e),this.columnsHasKey(e)&&this.substituteOut(e,t),this.addRow(e,t),E.trace&&E.fnexitprint("returning true"),!0)},chooseSubject:function(t){E.trace&&E.fnenterprint("chooseSubject: "+t);var e=null,i=!1,r=!1,n=t.terms,o=n.escapingEach(function(t,n){if(i){if(!t.isRestricted&&!this.columnsHasKey(t))return{retval:t}}else if(t.isRestricted){if(!r&&!t.isDummy&&0>n){var o=this.columns.get(t);(null==o||1==o.size&&this.columnsHasKey(this._objective))&&(e=t,r=!0)}}else e=t,i=!0},this);if(o&&void 0!==o.retval)return o.retval;if(null!=e)return e;var s=0,o=n.escapingEach(function(t,i){return t.isDummy?void(this.columnsHasKey(t)||(e=t,s=i)):{retval:null}},this);if(o&&void 0!==o.retval)return o.retval;if(!E.approx(t.constant,0))throw new E.RequiredFailure;return s>0&&t.multiplyMe(-1),e},deltaEditConstant:function(t,e,i){E.trace&&E.fnenterprint("deltaEditConstant :"+t+", "+e+", "+i);var r=this.rows.get(e);if(null!=r)return r.constant+=t,void(0>r.constant&&this._infeasibleRows.add(e));var n=this.rows.get(i);if(null!=n)return n.constant+=-t,void(0>n.constant&&this._infeasibleRows.add(i));var o=this.columns.get(i);o||console.log("columnVars is null -- tableau is:\n"+this),o.each(function(e){var r=this.rows.get(e),n=r.coefficientFor(i);r.constant+=n*t,e.isRestricted&&0>r.constant&&this._infeasibleRows.add(e)},this)},dualOptimize:function(){E.trace&&E.fnenterprint("dualOptimize:");for(var t=this.rows.get(this._objective);this._infeasibleRows.size;){var e=this._infeasibleRows.values()[0];this._infeasibleRows.delete(e);var i=null,r=this.rows.get(e);if(r&&0>r.constant){var n,o=Number.MAX_VALUE;if(r.terms.each(function(e,r){r>0&&e.isPivotable&&(o>(n=t.coefficientFor(e)/r)||E.approx(n,o)&&e.hashCode<i.hashCode)&&(i=e,o=n)}),o==Number.MAX_VALUE)throw new E.InternalError("ratio == nil (MAX_VALUE) in dualOptimize");this.pivot(i,e)}}},newExpression:function(t,e,i){E.trace&&(E.fnenterprint("newExpression: "+t),E.traceprint("cn.isInequality == "+t.isInequality),E.traceprint("cn.required == "+t.required));var r=t.expression,n=new E.Expression(r.constant),o=new E.SlackVariable,s=new E.DummyVariable,l=new E.SlackVariable,u=new E.SlackVariable;if(r.terms.each(function(t,e){var i=this.rows.get(t);i?n.addExpression(i,e):n.addVariable(t,e)},this),t.isInequality){if(E.trace&&E.traceprint("Inequality, adding slack"),++this._slackCounter,o=new E.SlackVariable({value:this._slackCounter,prefix:"s"}),n.setVariable(o,-1),this._markerVars.set(t,o),!t.required){++this._slackCounter,l=new E.SlackVariable({value:this._slackCounter,prefix:"em"}),n.setVariable(l,1);var h=this.rows.get(this._objective);h.setVariable(l,t.strength.symbolicWeight.value*t.weight),this.insertErrorVar(t,l),this.noteAddedVariable(l,this._objective)}}else if(t.required)E.trace&&E.traceprint("Equality, required"),++this._dummyCounter,s=new E.DummyVariable({value:this._dummyCounter,prefix:"d"}),n.setVariable(s,1),this._markerVars.set(t,s),E.trace&&E.traceprint("Adding dummyVar == d"+this._dummyCounter);else{E.trace&&E.traceprint("Equality, not required"),++this._slackCounter,u=new E.SlackVariable({value:this._slackCounter,prefix:"ep"}),l=new E.SlackVariable({value:this._slackCounter,prefix:"em"}),n.setVariable(u,-1),n.setVariable(l,1),this._markerVars.set(t,u);var h=this.rows.get(this._objective);E.trace&&console.log(h);var c=t.strength.symbolicWeight.value*t.weight;0==c&&(E.trace&&E.traceprint("cn == "+t),E.trace&&E.traceprint("adding "+u+" and "+l+" with swCoeff == "+c)),h.setVariable(u,c),this.noteAddedVariable(u,this._objective),h.setVariable(l,c),this.noteAddedVariable(l,this._objective),this.insertErrorVar(t,l),this.insertErrorVar(t,u),t.isStayConstraint?(this._stayPlusErrorVars.push(u),this._stayMinusErrorVars.push(l)):t.isEditConstraint&&(e[0]=u,e[1]=l,i[0]=r.constant)}return 0>n.constant&&n.multiplyMe(-1),E.trace&&E.fnexitprint("returning "+n),n},optimize:function(t){E.trace&&E.fnenterprint("optimize: "+t),E.trace&&E.traceprint(""+this),this._optimizeCount++;var e=this.rows.get(t);E.assert(null!=e,"zRow != null");for(var i,r,n=null,o=null;;){if(i=0,(r=e.terms).escapingEach(function(t,e){return t.isPivotable&&i>e?(i=e,n=t,{brk:1}):void 0},this),i>=-.00000001)return;E.trace&&console.log("entryVar:",n,"objectiveCoeff:",i);var s=Number.MAX_VALUE,l=this.columns.get(n),u=0;if(l.each(function(t){if(E.trace&&E.traceprint("Checking "+t),t.isPivotable){var e=this.rows.get(t),i=e.coefficientFor(n);E.trace&&E.traceprint("pivotable, coeff = "+i),0>i&&(s>(u=-e.constant/i)||E.approx(u,s)&&t.hashCode<o.hashCode)&&(s=u,o=t)}},this),s==Number.MAX_VALUE)throw new E.InternalError("Objective function is unbounded in optimize");this.pivot(n,o),E.trace&&E.traceprint(""+this)}},pivot:function(t,e){E.trace&&console.log("pivot: ",t,e),null==t&&console.warn("pivot: entryVar == null"),null==e&&console.warn("pivot: exitVar == null");var i=this.removeRow(e);i.changeSubject(e,t),this.substituteOut(t,i),this.addRow(t,i)},_resetStayConstants:function(){E.trace&&console.log("_resetStayConstants");for(var t=0;this._stayPlusErrorVars.length>t;t++){var e=this.rows.get(this._stayPlusErrorVars[t]);null==e&&(e=this.rows.get(this._stayMinusErrorVars[t])),null!=e&&(e.constant=0)}},_setExternalVariables:function(){E.trace&&E.fnenterprint("_setExternalVariables:"),E.trace&&E.traceprint(""+this),this._externalParametricVars.each(function(t){null!=this.rows.get(t)?E.trace&&console.log("Error: variable"+t+" in _externalParametricVars is basic"):t.value=0},this),this._externalRows.each(function(t){var e=this.rows.get(t);t.value!=e.constant&&(t.value=e.constant)},this),this._fNeedsSolving=!1,this.onsolved()},onsolved:function(){},insertErrorVar:function(t,e){E.trace&&E.fnenterprint("insertErrorVar:"+t+", "+e);var i=this._errorVars.get(e);i||(i=new E.HashSet,this._errorVars.set(t,i)),i.add(e)}}),(S=this.c||e.parent.exports||{}).Timer=S.inherit({initialize:function(){this.isRunning=!1,this._elapsedMs=0},start:function(){return this.isRunning=!0,this._startReading=new Date,this},stop:function(){return this.isRunning=!1,this._elapsedMs+=new Date-this._startReading,this},reset:function(){return this.isRunning=!1,this._elapsedMs=0,this},elapsedTime:function(){return this.isRunning?(this._elapsedMs+(new Date-this._startReading))/1e3:this._elapsedMs/1e3}}),__cassowary_parser=function(){function t(t){return'"'+t.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\x08/g,"\\b").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\f/g,"\\f").replace(/\r/g,"\\r").replace(/[\x00-\x07\x0B\x0E-\x1F\x80-\uFFFF]/g,escape)+'"'}var e={parse:function(e,i){function r(t){L>k||(k>L&&(L=k,z=[]),z.push(t))}function n(){var t,e,i,r,n,o;return i=k,r=k,null!==(t=P())&&null!==(e=c())?t=[t,e]:(t=null,k=r),null!==t&&(t=o=t[0]),null===t&&(k=i),t}function o(){var t;return e.length>k?(t=e.charAt(k),k++):(t=null,0===H&&r("any character")),t}function s(){var t;return/^[a-zA-Z]/.test(e.charAt(k))?(t=e.charAt(k),k++):(t=null,0===H&&r("[a-zA-Z]")),null===t&&(36===e.charCodeAt(k)?(t="$",k++):(t=null,0===H&&r('"$"')),null===t&&(95===e.charCodeAt(k)?(t="_",k++):(t=null,0===H&&r('"_"')))),t}function l(){var t;return H++,/^[\t\x0B\f \xA0\uFEFF]/.test(e.charAt(k))?(t=e.charAt(k),k++):(t=null,0===H&&r("[\\t\\x0B\\f \\xA0\\uFEFF]")),0==--H&&null===t&&r("whitespace"),t}function u(){var t;return/^[\n\r\u2028\u2029]/.test(e.charAt(k))?(t=e.charAt(k),k++):(t=null,0===H&&r("[\\n\\r\\u2028\\u2029]")),t}function h(){var t;return H++,10===e.charCodeAt(k)?(t="\n",k++):(t=null,0===H&&r('"\\n"')),null===t&&("\r\n"===e.substr(k,2)?(t="\r\n",k+=2):(t=null,0===H&&r('"\\r\\n"')),null===t&&(13===e.charCodeAt(k)?(t="\r",k++):(t=null,0===H&&r('"\\r"')),null===t&&(8232===e.charCodeAt(k)?(t="\u2028",k++):(t=null,0===H&&r('"\\u2028"')),null===t&&(8233===e.charCodeAt(k)?(t="\u2029",k++):(t=null,0===H&&r('"\\u2029"')))))),0==--H&&null===t&&r("end of line"),t}function c(){var t,i,n;return n=k,null!==(t=v())?(59===e.charCodeAt(k)?(i=";",k++):(i=null,0===H&&r('";"')),null!==i?t=[t,i]:(t=null,k=n)):(t=null,k=n),null===t&&(n=k,null!==(t=m())&&null!==(i=h())?t=[t,i]:(t=null,k=n),null===t&&(n=k,null!==(t=v())&&null!==(i=p())?t=[t,i]:(t=null,k=n))),t}function p(){var t,i;return i=k,H++,e.length>k?(t=e.charAt(k),k++):(t=null,0===H&&r("any character")),H--,null===t?t="":(t=null,k=i),t}function d(){var t;return H++,null===(t=f())&&(t=g()),0==--H&&null===t&&r("comment"),t}function f(){var t,i,n,s,l,u,h;if(l=k,"/*"===e.substr(k,2)?(t="/*",k+=2):(t=null,0===H&&r('"/*"')),null!==t){for(i=[],u=k,h=k,H++,"*/"===e.substr(k,2)?(n="*/",k+=2):(n=null,0===H&&r('"*/"')),H--,null===n?n="":(n=null,k=h),null!==n&&null!==(s=o())?n=[n,s]:(n=null,k=u);null!==n;)i.push(n),u=k,h=k,H++,"*/"===e.substr(k,2)?(n="*/",k+=2):(n=null,0===H&&r('"*/"')),H--,null===n?n="":(n=null,k=h),null!==n&&null!==(s=o())?n=[n,s]:(n=null,k=u);null!==i?("*/"===e.substr(k,2)?(n="*/",k+=2):(n=null,0===H&&r('"*/"')),null!==n?t=[t,i,n]:(t=null,k=l)):(t=null,k=l)}else t=null,k=l;return t}function y(){var t,i,n,s,l,h,c;if(l=k,"/*"===e.substr(k,2)?(t="/*",k+=2):(t=null,0===H&&r('"/*"')),null!==t){for(i=[],h=k,c=k,H++,"*/"===e.substr(k,2)?(n="*/",k+=2):(n=null,0===H&&r('"*/"')),null===n&&(n=u()),H--,null===n?n="":(n=null,k=c),null!==n&&null!==(s=o())?n=[n,s]:(n=null,k=h);null!==n;)i.push(n),h=k,c=k,H++,"*/"===e.substr(k,2)?(n="*/",k+=2):(n=null,0===H&&r('"*/"')),null===n&&(n=u()),H--,null===n?n="":(n=null,k=c),null!==n&&null!==(s=o())?n=[n,s]:(n=null,k=h);null!==i?("*/"===e.substr(k,2)?(n="*/",k+=2):(n=null,0===H&&r('"*/"')),null!==n?t=[t,i,n]:(t=null,k=l)):(t=null,k=l)}else t=null,k=l;return t}function g(){var t,i,n,s,l,h,c;if(l=k,"//"===e.substr(k,2)?(t="//",k+=2):(t=null,0===H&&r('"//"')),null!==t){for(i=[],h=k,c=k,H++,n=u(),H--,null===n?n="":(n=null,k=c),null!==n&&null!==(s=o())?n=[n,s]:(n=null,k=h);null!==n;)i.push(n),h=k,c=k,H++,n=u(),H--,null===n?n="":(n=null,k=c),null!==n&&null!==(s=o())?n=[n,s]:(n=null,k=h);null!==i?t=[t,i]:(t=null,k=l)}else t=null,k=l;return t}function m(){var t,e;for(t=[],null===(e=l())&&null===(e=y())&&(e=g());null!==e;)t.push(e),null===(e=l())&&null===(e=y())&&(e=g());return t}function v(){var t,e;for(t=[],null===(e=l())&&null===(e=h())&&(e=d());null!==e;)t.push(e),null===(e=l())&&null===(e=h())&&(e=d());return t}function $(){var t,e,i,r;return e=k,null===(t=E())&&(t=_()),null!==t&&(t={type:"NumericLiteral",value:r=t}),null===t&&(k=e),t}function _(){var t,i,n,o,s;if(n=k,/^[0-9]/.test(e.charAt(k))?(i=e.charAt(k),k++):(i=null,0===H&&r("[0-9]")),null!==i)for(t=[];null!==i;)t.push(i),/^[0-9]/.test(e.charAt(k))?(i=e.charAt(k),k++):(i=null,0===H&&r("[0-9]"));else t=null;return null!==t&&(t=parseInt((s=t).join(""))),null===t&&(k=n),t}function E(){var t,i,n,o,s,l,u;return o=k,s=k,null!==(t=_())?(46===e.charCodeAt(k)?(i=".",k++):(i=null,0===H&&r('"."')),null!==i&&null!==(n=_())?t=[t,i,n]:(t=null,k=s)):(t=null,k=s),null!==t&&(t=parseFloat((u=t).join(""))),null===t&&(k=o),t}function A(){var t,e,i,n;return H++,e=k,null!==(t=x())&&(t=n=t),null===t&&(k=e),0==--H&&null===t&&r("identifier"),t}function x(){var t,e,i,n,o,l,u,h;if(H++,n=k,o=k,null!==(t=s())){for(e=[],i=s();null!==i;)e.push(i),i=s();null!==e?t=[t,e]:(t=null,k=o)}else t=null,k=o;return null!==t&&(t=(u=t[0],u+(h=t[1]).join(""))),null===t&&(k=n),0==--H&&null===t&&r("identifier"),t}function S(){var t,i,n,o,s,l,u,h,c,p,d;return l=k,null!==(t=A())&&(t={type:"Variable",name:c=t}),null===t&&(k=l),null===t&&null===(t=$())&&(l=k,u=k,40===e.charCodeAt(k)?(t="(",k++):(t=null,0===H&&r('"("')),null!==t&&null!==(i=v())&&null!==(n=P())&&null!==(o=v())?(41===e.charCodeAt(k)?(s=")",k++):(s=null,0===H&&r('")"')),null!==s?t=[t,i,n,o,s]:(t=null,k=u)):(t=null,k=u),null!==t&&(t=d=t[2]),null===t&&(k=l)),t}function T(){var t,e,i,r,n,o,s,l;return null===(t=S())&&(r=k,n=k,null!==(t=C())&&null!==(e=v())&&null!==(i=T())?t=[t,e,i]:(t=null,k=n),null!==t&&(t=(s=t[0],{type:"UnaryExpression",operator:s,expression:l=t[2]})),null===t&&(k=r)),t}function C(){var t;return 43===e.charCodeAt(k)?(t="+",k++):(t=null,0===H&&r('"+"')),null===t&&(45===e.charCodeAt(k)?(t="-",k++):(t=null,0===H&&r('"-"')),null===t&&(33===e.charCodeAt(k)?(t="!",k++):(t=null,0===H&&r('"!"')))),t}function I(){var t,e,i,r,n,o,s,l,u;if(s=k,l=k,null!==(t=T())){for(e=[],u=k,null!==(i=v())&&null!==(r=O())&&null!==(n=v())&&null!==(o=T())?i=[i,r,n,o]:(i=null,k=u);null!==i;)e.push(i),u=k,null!==(i=v())&&null!==(r=O())&&null!==(n=v())&&null!==(o=T())?i=[i,r,n,o]:(i=null,k=u);null!==e?t=[t,e]:(t=null,k=l)}else t=null,k=l;return null!==t&&(t=function(t,e,i){for(var r=e,n=0;i.length>n;n++)r={type:"MultiplicativeExpression",operator:i[n][1],left:r,right:i[n][3]};return r}(s,t[0],t[1])),null===t&&(k=s),t}function O(){var t;return 42===e.charCodeAt(k)?(t="*",k++):(t=null,0===H&&r('"*"')),null===t&&(47===e.charCodeAt(k)?(t="/",k++):(t=null,0===H&&r('"/"'))),t}function V(){var t,e,i,r,n,o,s,l,u;if(s=k,l=k,null!==(t=I())){for(e=[],u=k,null!==(i=v())&&null!==(r=R())&&null!==(n=v())&&null!==(o=I())?i=[i,r,n,o]:(i=null,k=u);null!==i;)e.push(i),u=k,null!==(i=v())&&null!==(r=R())&&null!==(n=v())&&null!==(o=I())?i=[i,r,n,o]:(i=null,k=u);null!==e?t=[t,e]:(t=null,k=l)}else t=null,k=l;return null!==t&&(t=function(t,e,i){for(var r=e,n=0;i.length>n;n++)r={type:"AdditiveExpression",operator:i[n][1],left:r,right:i[n][3]};return r}(s,t[0],t[1])),null===t&&(k=s),t}function R(){var t;return 43===e.charCodeAt(k)?(t="+",k++):(t=null,0===H&&r('"+"')),null===t&&(45===e.charCodeAt(k)?(t="-",k++):(t=null,0===H&&r('"-"'))),t}function N(){var t,e,i,r,n,o,s,l,u;if(s=k,l=k,null!==(t=V())){for(e=[],u=k,null!==(i=v())&&null!==(r=q())&&null!==(n=v())&&null!==(o=V())?i=[i,r,n,o]:(i=null,k=u);null!==i;)e.push(i),u=k,null!==(i=v())&&null!==(r=q())&&null!==(n=v())&&null!==(o=V())?i=[i,r,n,o]:(i=null,k=u);null!==e?t=[t,e]:(t=null,k=l)}else t=null,k=l;return null!==t&&(t=function(t,e,i){for(var r=e,n=0;i.length>n;n++)r={type:"Inequality",operator:i[n][1],left:r,right:i[n][3]};return r}(s,t[0],t[1])),null===t&&(k=s),t}function q(){var t;return"<="===e.substr(k,2)?(t="<=",k+=2):(t=null,0===H&&r('"<="')),null===t&&(">="===e.substr(k,2)?(t=">=",k+=2):(t=null,0===H&&r('">="')),null===t&&(60===e.charCodeAt(k)?(t="<",k++):(t=null,0===H&&r('"<"')),null===t&&(62===e.charCodeAt(k)?(t=">",k++):(t=null,0===H&&r('">"'))))),t}function P(){var t,i,n,o,s,l,u,h,c;if(u=k,h=k,null!==(t=N())){for(i=[],c=k,null!==(n=v())?("=="===e.substr(k,2)?(o="==",k+=2):(o=null,0===H&&r('"=="')),null!==o&&null!==(s=v())&&null!==(l=N())?n=[n,o,s,l]:(n=null,k=c)):(n=null,k=c);null!==n;)i.push(n),c=k,null!==(n=v())?("=="===e.substr(k,2)?(o="==",k+=2):(o=null,0===H&&r('"=="')),null!==o&&null!==(s=v())&&null!==(l=N())?n=[n,o,s,l]:(n=null,k=c)):(n=null,k=c);null!==i?t=[t,i]:(t=null,k=h)}else t=null,k=h;return null!==t&&(t=function(t,e,i){for(var r=e,n=0;i.length>n;n++)r={type:"Equality",operator:i[n][1],left:r,right:i[n][3]};return r}(u,t[0],t[1])),null===t&&(k=u),t}var B={start:function t(){var e,i,r,o,s,l,u;if(o=k,s=k,null!==(e=v())){if(null!==(r=n()))for(i=[];null!==r;)i.push(r),r=n();else i=null;null!==i&&null!==(r=v())?e=[e,i,r]:(e=null,k=s)}else e=null,k=s;return null!==e&&(e=u=e[1]),null===e&&(k=o),e},Statement:n,SourceCharacter:o,IdentifierStart:s,WhiteSpace:l,LineTerminator:u,LineTerminatorSequence:h,EOS:c,EOF:p,Comment:d,MultiLineComment:f,MultiLineCommentNoLineTerminator:y,SingleLineComment:g,_:m,__:v,Literal:$,Integer:_,Real:E,SignedInteger:function t(){var i,n,o,s;if(s=k,/^[\-+]/.test(e.charAt(k))?(i=e.charAt(k),k++):(i=null,0===H&&r("[\\-+]")),null!==(i=null!==i?i:"")){if(/^[0-9]/.test(e.charAt(k))?(o=e.charAt(k),k++):(o=null,0===H&&r("[0-9]")),null!==o)for(n=[];null!==o;)n.push(o),/^[0-9]/.test(e.charAt(k))?(o=e.charAt(k),k++):(o=null,0===H&&r("[0-9]"));else n=null;null!==n?i=[i,n]:(i=null,k=s)}else i=null,k=s;return i},Identifier:A,IdentifierName:x,PrimaryExpression:S,UnaryExpression:T,UnaryOperator:C,MultiplicativeExpression:I,MultiplicativeOperator:O,AdditiveExpression:V,AdditiveOperator:R,InequalityExpression:N,InequalityOperator:q,LinearExpression:P};if(void 0!==i){if(void 0===B[i])throw Error("Invalid rule name: "+t(i)+".")}else i="start";var k=0,H=0,L=0,z=[],M=B[i]();if(null===M||k!==e.length){var W=Math.max(k,L),U=e.length>W?e.charAt(W):null,D=function t(){for(var i=1,r=1,n=!1,o=0;Math.max(k,L)>o;o++){var s=e.charAt(o);"\n"===s?(n||i++,r=1,n=!1):"\r"===s||"\u2028"===s||"\u2029"===s?(i++,r=1,n=!0):(r++,n=!1)}return{line:i,column:r}}();throw new this.SyntaxError(function t(e){e.sort();for(var i=null,r=[],n=0;e.length>n;n++)e[n]!==i&&(r.push(e[n]),i=e[n]);return r}(z),U,W,D.line,D.column)}return M},toSource:function(){return this._source}};return e.SyntaxError=function(e,i,r,n,o){this.name="SyntaxError",this.expected=e,this.found=i,this.message=function e(i,r){var n,o;switch(i.length){case 0:n="end of input";break;case 1:n=i[0];break;default:n=i.slice(0,i.length-1).join(", ")+" or "+i[i.length-1]}return o=r?t(r):"end of input","Expected "+n+" but "+o+" found."}(e,i),this.offset=r,this.line=n,this.column=o},e.SyntaxError.prototype=Error.prototype,e}()}).call(void 0!==e?e.compiled=e:this)},{}]},{},[1])(1)}),function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e():"function"==typeof define&&define.amd?define(e):e()}(0,function(){"use strict";function t(t){var e=this.constructor;return this.then(function(i){return e.resolve(t()).then(function(){return i})},function(i){return e.resolve(t()).then(function(){return e.reject(i)})})}function e(t){return new this(function(e,i){function r(t,i){if(i&&("object"==typeof i||"function"==typeof i)){var s=i.then;if("function"==typeof s)return void s.call(i,function(e){r(t,e)},function(i){n[t]={status:"rejected",reason:i},0==--o&&e(n)})}n[t]={status:"fulfilled",value:i},0==--o&&e(n)}if(!t||void 0===t.length)return i(TypeError(typeof t+" "+t+" is not iterable(cannot read property Symbol(Symbol.iterator))"));var n=Array.prototype.slice.call(t);if(0===n.length)return e([]);for(var o=n.length,s=0;n.length>s;s++)r(s,n[s])})}function i(t){return!(!t||void 0===t.length)}function r(){}function n(t){if(!(this instanceof n))throw TypeError("Promises must be constructed via new");if("function"!=typeof t)throw TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],h(t,this)}function o(t,e){for(;3===t._state;)t=t._value;0!==t._state?(t._handled=!0,n._immediateFn(function(){var i,r=1===t._state?e.onFulfilled:e.onRejected;if(null!==r){try{i=r(t._value)}catch(n){return void l(e.promise,n)}s(e.promise,i)}else(1===t._state?s:l)(e.promise,t._value)})):t._deferreds.push(e)}function s(t,e){try{if(e===t)throw TypeError("A promise cannot be resolved with itself.");if(e&&("object"==typeof e||"function"==typeof e)){var i,r,o=e.then;if(e instanceof n)return t._state=3,t._value=e,void u(t);if("function"==typeof o)return void h((i=o,r=e,function(){i.apply(r,arguments)}),t)}t._state=1,t._value=e,u(t)}catch(s){l(t,s)}}function l(t,e){t._state=2,t._value=e,u(t)}function u(t){2===t._state&&0===t._deferreds.length&&n._immediateFn(function(){t._handled||n._unhandledRejectionFn(t._value)});for(var e=0,i=t._deferreds.length;i>e;e++)o(t,t._deferreds[e]);t._deferreds=null}function h(t,e){var i=!1;try{t(function(t){i||(i=!0,s(e,t))},function(t){i||(i=!0,l(e,t))})}catch(r){if(i)return;i=!0,l(e,r)}}var c=setTimeout;n.prototype.catch=function(t){return this.then(null,t)},n.prototype.then=function(t,e){var i=new this.constructor(r);return o(this,new function(t,e,i){this.onFulfilled="function"==typeof t?t:null,this.onRejected="function"==typeof e?e:null,this.promise=i}(t,e,i)),i},n.prototype.finally=t,n.all=function(t){return new n(function(e,r){function n(t,i){try{if(i&&("object"==typeof i||"function"==typeof i)){var l=i.then;if("function"==typeof l)return void l.call(i,function(e){n(t,e)},r)}o[t]=i,0==--s&&e(o)}catch(u){r(u)}}if(!i(t))return r(TypeError("Promise.all accepts an array"));var o=Array.prototype.slice.call(t);if(0===o.length)return e([]);for(var s=o.length,l=0;o.length>l;l++)n(l,o[l])})},n.allSettled=e,n.resolve=function(t){return t&&"object"==typeof t&&t.constructor===n?t:new n(function(e){e(t)})},n.reject=function(t){return new n(function(e,i){i(t)})},n.race=function(t){return new n(function(e,r){if(!i(t))return r(TypeError("Promise.race accepts an array"));for(var o=0,s=t.length;s>o;o++)n.resolve(t[o]).then(e,r)})},n._immediateFn="function"==typeof setImmediate&&function(t){setImmediate(t)}||function(t){c(t,0)},n._unhandledRejectionFn=function(t){void 0!==console&&console&&console.warn("Possible Unhandled Promise Rejection:",t)};var p=function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if("undefined"!=typeof global)return global;throw Error("unable to locate global object")}();"function"!=typeof p.Promise?p.Promise=n:(p.Promise.prototype.finally||(p.Promise.prototype.finally=t),p.Promise.allSettled||(p.Promise.allSettled=e))}),function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e(t.WHATWGFetch={})}(this,function(t){"use strict";var e="undefined"!=typeof self&&self||void 0!==e&&e,i={searchParams:"URLSearchParams"in e,iterable:"Symbol"in e&&"iterator"in Symbol,blob:"FileReader"in e&&"Blob"in e&&function(){try{return new Blob,!0}catch(t){return!1}}(),formData:"FormData"in e,arrayBuffer:"ArrayBuffer"in e};if(i.arrayBuffer)var r=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],n=ArrayBuffer.isView||function(t){return t&&r.indexOf(Object.prototype.toString.call(t))>-1};function o(t){if("string"!=typeof t&&(t=String(t)),/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(t)||""===t)throw TypeError("Invalid character in header field name");return t.toLowerCase()}function s(t){return"string"!=typeof t&&(t=String(t)),t}function l(t){var e={next:function(){var e=t.shift();return{done:void 0===e,value:e}}};return i.iterable&&(e[Symbol.iterator]=function(){return e}),e}function u(t){this.map={},t instanceof u?t.forEach(function(t,e){this.append(e,t)},this):Array.isArray(t)?t.forEach(function(t){this.append(t[0],t[1])},this):t&&Object.getOwnPropertyNames(t).forEach(function(e){this.append(e,t[e])},this)}function h(t){if(t.bodyUsed)return Promise.reject(TypeError("Already read"));t.bodyUsed=!0}function c(t){return new Promise(function(e,i){t.onload=function(){e(t.result)},t.onerror=function(){i(t.error)}})}function p(t){var e=new FileReader,i=c(e);return e.readAsArrayBuffer(t),i}function d(t){if(t.slice)return t.slice(0);var e=new Uint8Array(t.byteLength);return e.set(new Uint8Array(t)),e.buffer}function f(){return this.bodyUsed=!1,this._initBody=function(t){if(this.bodyUsed=this.bodyUsed,this._bodyInit=t,t){if("string"==typeof t)this._bodyText=t;else if(i.blob&&Blob.prototype.isPrototypeOf(t))this._bodyBlob=t;else if(i.formData&&FormData.prototype.isPrototypeOf(t))this._bodyFormData=t;else if(i.searchParams&&URLSearchParams.prototype.isPrototypeOf(t))this._bodyText=t.toString();else{var e;i.arrayBuffer&&i.blob&&(e=t)&&DataView.prototype.isPrototypeOf(e)?(this._bodyArrayBuffer=d(t.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):i.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(t)||n(t))?this._bodyArrayBuffer=d(t):this._bodyText=t=Object.prototype.toString.call(t)}}else this._bodyText="";!this.headers.get("content-type")&&("string"==typeof t?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):i.searchParams&&URLSearchParams.prototype.isPrototypeOf(t)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},i.blob&&(this.blob=function(){var t=h(this);if(t)return t;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(!this._bodyFormData)return Promise.resolve(new Blob([this._bodyText]));throw Error("could not read FormData body as blob")},this.arrayBuffer=function(){if(!this._bodyArrayBuffer)return this.blob().then(p);var t=h(this);return t||(ArrayBuffer.isView(this._bodyArrayBuffer)?Promise.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset,this._bodyArrayBuffer.byteOffset+this._bodyArrayBuffer.byteLength)):Promise.resolve(this._bodyArrayBuffer))}),this.text=function(){var t,e,i,r=h(this);if(r)return r;if(this._bodyBlob)return t=this._bodyBlob,e=new FileReader,i=c(e),e.readAsText(t),i;if(this._bodyArrayBuffer)return Promise.resolve(function t(e){for(var i=new Uint8Array(e),r=Array(i.length),n=0;n<i.length;n++)r[n]=String.fromCharCode(i[n]);return r.join("")}(this._bodyArrayBuffer));if(!this._bodyFormData)return Promise.resolve(this._bodyText);throw Error("could not read FormData body as text")},i.formData&&(this.formData=function(){return this.text().then(m)}),this.json=function(){return this.text().then(JSON.parse)},this}u.prototype.append=function(t,e){t=o(t),e=s(e);var i=this.map[t];this.map[t]=i?i+", "+e:e},u.prototype.delete=function(t){delete this.map[o(t)]},u.prototype.get=function(t){return t=o(t),this.has(t)?this.map[t]:null},u.prototype.has=function(t){return this.map.hasOwnProperty(o(t))},u.prototype.set=function(t,e){this.map[o(t)]=s(e)},u.prototype.forEach=function(t,e){for(var i in this.map)this.map.hasOwnProperty(i)&&t.call(e,this.map[i],i,this)},u.prototype.keys=function(){var t=[];return this.forEach(function(e,i){t.push(i)}),l(t)},u.prototype.values=function(){var t=[];return this.forEach(function(e){t.push(e)}),l(t)},u.prototype.entries=function(){var t=[];return this.forEach(function(e,i){t.push([i,e])}),l(t)},i.iterable&&(u.prototype[Symbol.iterator]=u.prototype.entries);var y=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function g(t,e){if(!(this instanceof g))throw TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');var i,r,n=(e=e||{}).body;if(t instanceof g){if(t.bodyUsed)throw TypeError("Already read");this.url=t.url,this.credentials=t.credentials,e.headers||(this.headers=new u(t.headers)),this.method=t.method,this.mode=t.mode,this.signal=t.signal,n||null==t._bodyInit||(n=t._bodyInit,t.bodyUsed=!0)}else this.url=String(t);if(this.credentials=e.credentials||this.credentials||"same-origin",(e.headers||!this.headers)&&(this.headers=new u(e.headers)),this.method=(r=(i=e.method||this.method||"GET").toUpperCase(),y.indexOf(r)>-1?r:i),this.mode=e.mode||this.mode||null,this.signal=e.signal||this.signal,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&n)throw TypeError("Body not allowed for GET or HEAD requests");if(this._initBody(n),("GET"===this.method||"HEAD"===this.method)&&("no-store"===e.cache||"no-cache"===e.cache)){var o=/([?&])_=[^&]*/;o.test(this.url)?this.url=this.url.replace(o,"$1_="+new Date().getTime()):this.url+=(/\?/.test(this.url)?"&":"?")+"_="+new Date().getTime()}}function m(t){var e=new FormData;return t.trim().split("&").forEach(function(t){if(t){var i=t.split("="),r=i.shift().replace(/\+/g," "),n=i.join("=").replace(/\+/g," ");e.append(decodeURIComponent(r),decodeURIComponent(n))}}),e}function v(t,e){if(!(this instanceof v))throw TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');e||(e={}),this.type="default",this.status=void 0===e.status?200:e.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in e?e.statusText:"",this.headers=new u(e.headers),this.url=e.url||"",this._initBody(t)}g.prototype.clone=function(){return new g(this,{body:this._bodyInit})},f.call(g.prototype),f.call(v.prototype),v.prototype.clone=function(){return new v(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new u(this.headers),url:this.url})},v.error=function(){var t=new v(null,{status:0,statusText:""});return t.type="error",t};var $=[301,302,303,307,308];v.redirect=function(t,e){if(-1===$.indexOf(e))throw RangeError("Invalid status code");return new v(null,{status:e,headers:{location:t}})},t.DOMException=e.DOMException;try{new t.DOMException}catch(_){t.DOMException=function(t,e){this.message=t,this.name=e;var i=Error(t);this.stack=i.stack},t.DOMException.prototype=Object.create(Error.prototype),t.DOMException.prototype.constructor=t.DOMException}function E(r,n){return new Promise(function(o,l){var h=new g(r,n);if(h.signal&&h.signal.aborted)return l(new t.DOMException("Aborted","AbortError"));var c=new XMLHttpRequest;function p(){c.abort()}c.onload=function(){var t,e,i={status:c.status,statusText:c.statusText,headers:(t=c.getAllResponseHeaders()||"",e=new u,t.replace(/\r?\n[\t ]+/g," ").split(/\r?\n/).forEach(function(t){var i=t.split(":"),r=i.shift().trim();if(r){var n=i.join(":").trim();e.append(r,n)}}),e)};i.url="responseURL"in c?c.responseURL:i.headers.get("X-Request-URL");var r="response"in c?c.response:c.responseText;setTimeout(function(){o(new v(r,i))},0)},c.onerror=function(){setTimeout(function(){l(TypeError("Network request failed"))},0)},c.ontimeout=function(){setTimeout(function(){l(TypeError("Network request failed"))},0)},c.onabort=function(){setTimeout(function(){l(new t.DOMException("Aborted","AbortError"))},0)},c.open(h.method,function t(i){try{return""===i&&e.location.href?e.location.href:i}catch(r){return i}}(h.url),!0),"include"===h.credentials?c.withCredentials=!0:"omit"===h.credentials&&(c.withCredentials=!1),"responseType"in c&&(i.blob?c.responseType="blob":i.arrayBuffer&&h.headers.get("Content-Type")&&-1!==h.headers.get("Content-Type").indexOf("application/octet-stream")&&(c.responseType="arraybuffer")),!n||"object"!=typeof n.headers||n.headers instanceof u?h.headers.forEach(function(t,e){c.setRequestHeader(e,t)}):Object.getOwnPropertyNames(n.headers).forEach(function(t){c.setRequestHeader(t,s(n.headers[t]))}),h.signal&&(h.signal.addEventListener("abort",p),c.onreadystatechange=function(){4===c.readyState&&h.signal.removeEventListener("abort",p)}),c.send(void 0===h._bodyInit?null:h._bodyInit)})}E.polyfill=!0,e.fetch||(e.fetch=E,e.Headers=u,e.Request=g,e.Response=v),t.Headers=u,t.Request=g,t.Response=v,t.fetch=E,Object.defineProperty(t,"__esModule",{value:!0})}),"undefined"!=typeof Map&&Map.prototype.keys&&"undefined"!=typeof Set&&Set.prototype.keys||function(){function t(t,e){if(e==e)return t.indexOf(e);for(i=0,r=t.length;t[i]==t[i]&&++i!==r;);return i}var e,i,r,n,o,s,l={delete:function(i){return!!~(e=t(this.k,i))&&(this.k.splice(e,1),this.v.splice(e,1),--this.size,!0)},get:function(e){return this.v[t(this.k,e)]},set:function(i,r){return~(e=t(this.k,i))||(this.k[e=this.size++]=i),this.v[e]=r,this},has:function(e){return t(this.k,e)>-1},clear:function(){this.k.length=this.v.length=this.size=0},forEach:function(t,e){e&&(t=t.bind(e));for(var i=-1,r=this.size;++i!==r;)t(this.v[i],this.k[i],this)},entries:function(){var t=0,e=this;return{next:function(){return t!==e.size?{value:[e.k[t++],e.v[t]],done:!1}:{done:!0}}}},keys:function(){var t=0,e=this;return{next:function(){return t!==e.size?{value:e.k[t++],done:!1}:{done:!0}}}},values:function(){var t=0,e=this;return{next:function(){return t!==e.size?{value:e.v[t++],done:!1}:{done:!0}}}},toString:function(){return"[object Map]"}};WeakMap=Map=function(e){if(n=this.k=[],o=this.v=[],r=0,null!=e){if((i=+(s=Object(e)).length)!=i)throw TypeError("("+(e.toString||s.toString)()+") is not iterable");for(;i--;){if(!(s[i]instanceof Object))throw TypeError("Iterator value "+s[i]+" is not an entry object");~t(n,s[i][0])||(n[r]=s[i][0],o[r++]=s[i][1])}n.reverse(),o.reverse()}this.size=r},Map.prototype=l,WeakSet=Set=function(e){if(n=this.k=this.v=[],r=0,null!=e){if((i=+(s=Object(e)).length)!=i)throw TypeError("("+(e.toString||s.toString)()+") is not iterable");for(;i--;)~t(n,s[i])||(n[r++]=s[i]);n.reverse()}this.size=r},Set.prototype={delete:function(i){return!!~(e=t(this.k,i))&&(this.k.splice(e,1),--this.size,!0)},add:function(i){return~(e=t(this.k,i))||(e=this.size++),this.k[e]=i,this},has:l.has,clear:l.clear,forEach:l.forEach,entries:l.entries,keys:l.keys,values:l.keys,toString:function(){return"[object Set]"}}}();var BuildBridgedWorker=function(t,e,i,r){var n,o=t.toString().match(/^\s*function\s*\(\s*\)\s*\{(([\s\S](?!\}$))*[\s\S])/)[1],s=[];s.push("var main = {};\n");for(var l=0;l<i.length;l++){var u=i[l];"*"===u.charAt(u.length-1)?(u=u.substr(0,u.length-1),i[l]=u,s.push("main."+u+" = function(/* arguments */){\n var args = Array.prototype.slice.call(arguments); var buffers = args.pop(); \n self.postMessage({foo:'"+u+"', args:args},buffers)\n}; \n")):s.push("main."+u+" = function(/* arguments */){\n var args = Array.prototype.slice.call(arguments); \n self.postMessage({foo:'"+u+"', args:args})\n}; \n")}for(var h=[],l=0;l<e.length;l++){var u=e[l];u="*"===u.charAt(u.length-1)?u.substr(0,u.length-1):u,h.push(u+": "+u)}s.push("var foos={"+h.join(",")+"};\n"),s.push("self.onmessage = function(e){\n"),s.push("if(e.data.foo in foos) \n  foos[e.data.foo].apply(null, e.data.args); \n else \n throw(new Error('Main thread requested function ' + e.data.foo + '. But it is not available.'));\n"),s.push("\n};\n");var c=o+"\n\n/*==== AUTO-GENERATED-CODE ==== */\n\n"+s.join("");try{n=new Blob([c],{type:"text/javascript"})}catch(p){window.BlobBuilder=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder,(n=new BlobBuilder).append(c),n=n.getBlob()}var d=(window.URL?URL:webkitURL).createObjectURL(n),f=new Worker(d);f.onmessage=function(t){var e=i.indexOf(t.data.foo);if(-1!==e)r[e].apply(null,t.data.args);else throw Error("Worker requested function "+t.data.foo+". But it is not available.")};for(var y={blobURL:d},g=function(t,e){return e?function(){var e=Array.prototype.slice.call(arguments),i=e.pop();f.postMessage({foo:t,args:e},i)}:function(){var e=Array.prototype.slice.call(arguments);f.postMessage({foo:t,args:e})}},l=0;l<e.length;l++){var u=e[l];"*"===u.charAt(u.length-1)?y[u=u.substr(0,u.length-1)]=g(u,!0):y[u]=g(u,!1)}return y};