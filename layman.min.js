let BODY_ID="sys_main",GUIDE_CLASS="guideline",MIN_BIAS=1e-10;const styleSheet=document.createElement("style");let page,projectURL,scriptURL;function isScriptLoaded(t){let e=document.getElementsByTagName("script");for(let i=0;i<e.length;i++){if(e[i].src===t)return!0}return null}function docReady(t){"complete"===document.readyState||"interactive"===document.readyState?t():document.addEventListener("DOMContentLoaded",t)}styleSheet.setAttribute("type","text/css"),getUrls(),console.log("projectURL: ",projectURL," , scriptURL: ",scriptURL),Number.isNaN||(Number.isNaN=Number.isNaN||function(t){return"number"==typeof t&&t!=t}),Number.isInteger||(Number.isInteger=function(t){return+t===+t-+t%1}),Object.constructor.prototype.hasOwnProperty("name")||Object.defineProperty(Object.constructor.prototype,"name",{get:function(){return this.toString().trim().replace(/^\S+\s+(\w+)[\S\s]+$/,"$1")}}),[Element.prototype,CharacterData.prototype,DocumentType.prototype].filter(Boolean).forEach(function(t){t.hasOwnProperty("remove")||Object.defineProperty(t,"remove",{configurable:!0,enumerable:!0,writable:!0,value:function(){this.parentNode&&this.parentNode.removeChild(this)}})});let onLayoutComplete=function(){},onSourcesLoaded=function(){},layoutCode=function(){return null};function RemoteLayoutData(t){this.path=t,this.rect=[],this.consumed=!1}function Page(t){if(this.rootElement=t,this.viewMap=new Map,this.hideRoot(),this.layoutObj=layoutCode(),this.sourcesLoaded=!0,this.subPages=new Map,this.sources=new Map,this.srcPaths=[],this.popups=new Map,this.sidemenus=new Map,this.leftMenus=[],this.rightMenus=[],this.includes=new Map,!t){let t=new Style("html,body",[]);t.addFromOptions({width:"100%",height:"100%",padding:"0",margin:"0"});let e=new Style("*",[]);e.addFromOptions({margin:"0",padding:"0","box-sizing":"border-box","-webkit-box-sizing":"border-box","-moz-box-sizing":"border-box","overscroll-behavior":"none"});let i=new Style(".abs",[]);i.addStyleElement("position","absolute"),i.addStyleElement("padding","0"),i.addStyleElement("margin","0"),updateOrCreateSelectorInStyleSheet(styleSheet,t),updateOrCreateSelectorInStyleSheet(styleSheet,e),updateOrCreateSelectorInStyleSheet(styleSheet,i);let r=document.body.getAttribute(attrKeys.layout_constraintGuideColor);r||this.layoutObj&&this.layoutObj.body&&(r=this.layoutObj.body["data-guide-color"]);let n=new Style("."+GUIDE_CLASS,[]);n.addFromOptions({"background-color":r||"transparent",visibility:r?"visible":"hidden"}),updateOrCreateSelectorInStyleSheet(styleSheet,n)}}function shouldIgnoreNonLayoutNode(t){let e=t.nodeName.toLowerCase();return"meta"===e||"title"===e||"head"==e||"script"==e||"link"==e||"style"==e}function isWhiteSpaceOrCommentNode(t){let e=t.nodeName.toLowerCase();return"#text"===e||"#comment"===e}function isWhiteSpaceCommentStyleOrScriptNode(t){let e=t.nodeName.toLowerCase();return"#text"===e||"#comment"===e||"script"===e||"style"===e}function shouldIgnoreSpecialChildElement(t){let e=t.nodeName.toLowerCase();return"li"===e||"tr"===e||"td"===e||"th"===e||"tbody"===e||"thead"===e||"tfoot"===e||"col"===e||"colgroup"===e||"option"===e||"optgroup"===e||"b"===e||"i"===e||"strong"===e||"u"===e||"caption"===e}function enforceIdOnChildElements(t){let e=null;return shouldIgnoreSpecialChildElement(t)&&(e=t.getAttribute(attrKeys.id),e||(e=ULID.ulid(),t.setAttribute(attrKeys.id,e))),e}var loadAll;docReady(function(){page=new Page(null),page.layout()}),Page.prototype.findViewById=function(t){return this.viewMap.get(t)},Page.prototype.layout=function(){if(this===page){layoutCode()?this.layoutFromSheet(this.rootElement):this.layoutFromTags(this.rootElement)}else this.layoutFromTags(this.rootElement)},Page.prototype.layoutFromSheet=function(t){let e=this,i=t||document.body;if(i===document.body&&(i.id=BODY_ID),t){let e=t.nodeName.toLowerCase();if("script"===e)return;if(!t.id&&!shouldIgnoreSpecialChildElement(t))throw"Please supply the id for node: "+e+", around:\n"+t.outerHTML+". The layout engine needs it."}if(!isWhiteSpaceOrCommentNode(i)){let t=i===document.body?this.layoutObj.body:this.layoutObj.elements[i.id];t?i===document.body&&(t.w="match_parent",t.h="match_parent",t.ss="parent",t.ee="parent",t.tt="parent",t.bb="parent"):t=(document.body,{w:"match_parent",h:"match_parent",ss:"parent",ee:"parent",tt:"parent",bb:"parent"});let r,n=new Map;Object.keys(t).forEach(function(r){let o=t[r];if(n.set(r,o),r===attrKeys.layout_src){e.srcPaths.push(o),e.sourcesLoaded=!1;let r=new RemoteLayoutData(o),n=t[attrKeys.layout_popup],s=t[attrKeys.layout_menuLeft],a=t[attrKeys.layout_menuRight];if(!0===s&&!0===a)throw`Each html element can only take one of ${attrKeys.layout_menuLeft} or ${attrKeys.layout_menuRight} at once...`;!0===s||"true"===s?(e.leftMenus.push(i.id),e.sidemenus.set(i.id,r)):!0===a||"true"===a?(e.rightMenus.push(i.id),e.sidemenus.set(i.id,r)):!0===n||"true"===n?e.popups.set(i.id,r):e.includes.set(i.id,r)}if(r===attrKeys.customType&&"canvas"!==i.nodeName.toLowerCase())throw"Error: the `customType` attribute can only be defined on canvas elements"});let o=t[attrKeys.layout_constraintGuide];if(o){if("true"!==o&&!0!==o)throw"Invalid value for guide";n.set(attrKeys.layout_width,sizes.WRAP_CONTENT),n.set(attrKeys.layout_height,sizes.WRAP_CONTENT),r=new Guideline(this,i,n,i.parentNode.id)}else enforceIdOnChildElements(i),r=i===document.body?new View(this,i,n,void 0):new View(this,i,n,i.parentNode.id);if(i.hasChildNodes()){let t=i.children;for(let e=0;e<t.length;e++){let i=t[e];if(!isWhiteSpaceCommentStyleOrScriptNode(i)){if(!shouldIgnoreSpecialChildElement(i)){let t=i.getAttribute(attrKeys.id);r.childrenIds.push(t)}this.layoutFromSheet(i)}}}if(r)if(!0===r.topLevel)if(this.buildUI(r),this.showRoot(),e.srcPaths.length>0)BuildBridgedWorker(workerCode,["loadAll"],["layoutLoaded","layoutError"],[layoutLoaded,layoutError]).loadAll(projectURL,e.srcPaths);else e.sourcesLoaded=!0,onLayoutComplete()}},Page.prototype.layoutFromTags=function(t){let e=this,i=t||document.body;if(i===document.body&&(i.id=BODY_ID),t){let e=t.nodeName.toLowerCase();if("script"===e)return;if(!t.id&&!shouldIgnoreSpecialChildElement(t))throw"Please supply the id for node: "+e+", around:\n"+t.outerHTML+". The layout engine needs it."}if(!isWhiteSpaceOrCommentNode(i)){let t=i.getAttribute(attrKeys.layout_constraint);i.removeAttribute(attrKeys.layout_constraint),t||(t=(document.body,"w:match_parent;h:match_parent;ss:parent;ee:parent;tt:parent;bb:parent")),t=t.trim(),endsWith(t,";")&&(t=t.substring(0,t.length-1)),t=t.replace(/\s*?(;)\s*/g,";"),t=t.replace(/\s*?(:)\s*/g,":"),t=t.split(";");let r,n=new Map,o=!1,s=!1,a=!1,l=null;for(let r=0;r<t.length;r++){let u,h=t[r];if(-1===(u=h.indexOf(":")))throw"invalid constraint definition... no colon found in "+h+" on "+i.id;{let t=h.substring(0,u),r=h.substring(u+1);switch(n.set(t,r),t===attrKeys.layout_src&&(e.srcPaths.push(r),e.sourcesLoaded=!1,l=r),t){case attrKeys.layout_popup:o=!0===r||"true"===r;break;case attrKeys.layout_menuLeft:s=!0===r||"true"===r;break;case attrKeys.layout_menuRight:a=!0===r||"true"===r}if(s&&a)throw`Each html element can only take one of ${attrKeys.layout_menuLeft} or ${attrKeys.layout_menuRight} at once...`;if(t===attrKeys.customType&&"canvas"!==i.nodeName.toLowerCase())throw"Error: the `customType` attribute can only be defined on canvas elements"}}if(l){let t=new RemoteLayoutData(l);!0===o?e.popups.set(i.id,t):!0===s?(e.leftMenus.push(i.id),e.sidemenus.set(i.id,t)):!0===a?(e.rightMenus.push(i.id),e.sidemenus.set(i.id,t)):e.includes.set(i.id,t)}let u=i.getAttribute(attrKeys.layout_constraintGuide);if(u){if("true"!==u)throw"Invalid value for data-guide";n.set(attrKeys.layout_width,sizes.WRAP_CONTENT),n.set(attrKeys.layout_height,sizes.WRAP_CONTENT),r=new Guideline(this,i,n,i.parentNode.id)}else enforceIdOnChildElements(i),r=i===document.body?new View(this,i,n,void 0):new View(this,i,n,i.parentNode.id);if(i.hasChildNodes()){let t=i.children;for(let e=0;e<t.length;e++){let i=t[e];if(!isWhiteSpaceCommentStyleOrScriptNode(i)){if(!shouldIgnoreSpecialChildElement(i)){let t=i.getAttribute(attrKeys.id);r.childrenIds.push(t)}this.layoutFromTags(i)}}}if(r)if(!0===r.topLevel)if(this.buildUI(r),this.showRoot(),e.srcPaths.length>0)BuildBridgedWorker(workerCode,["loadAll"],["layoutLoaded","layoutError"],[layoutLoaded,layoutError]).loadAll(projectURL,e.srcPaths);else e.sourcesLoaded=!0,onLayoutComplete()}},Page.prototype.buildUI=function(t){let e=[],i=[],r=[],n=function(t,o){t.childrenIds.length>0&&(autoLayout(t.htmlNode===document.body?void 0:t.htmlNode,t.layoutChildren(o)),t.childrenIds.forEach(function(t){let s=o.viewMap.get(t);s.isPopup()&&i.push(s),s.isSideMenu()&&r.push(s),s.hasBgImage&&e.push(s),s.childrenIds.length>0&&n(s,o)}))};n(t,this),e.forEach(function(t){t.makeBgImage()});let o=this;i.forEach(function(t){let e=o.popups.get(t.id);e.rect=t.htmlNode.getBoundingClientRect(),o.popups.set(t.id,e),t.htmlNode.remove()}),r.forEach(function(t){let e=o.sidemenus.get(t.id);e.rect=t.htmlNode.getBoundingClientRect(),o.sidemenus.set(t.id,e),t.htmlNode.remove()})},Page.prototype.showRoot=function(){this.rootElement&&this.rootElement!==document.body?this.rootElement.style.visibility="visible":document.body.style.visibility="visible"},Page.prototype.hideRoot=function(){this.rootElement&&this.rootElement!==document.body?this.rootElement.style.visibility="hidden":document.body.style.visibility="hidden"},Page.prototype.openSideMenu=function(t,e,i,r){if(4!==arguments.length)throw"`Page.openSideMenu` function requires 4 arguments";if("string"!=typeof t)throw"`menuId` must be a string";if("boolean"!=typeof e)throw"`closeOnClickOutSide` must be  a boolean";if("function"!=typeof i)throw"onOpen must be a function";if("function"!=typeof r)throw"onClose must be a function";let n=this.sidemenus.get(t),o=-1!==this.leftMenus.indexOf(t),s=-1!==this.rightMenus.indexOf(t),a=o?SideMenuTypes.LEFT:s?SideMenuTypes.RIGHT:null;if(!a)throw"Invalid menutype found";let l=this.sources.get(n.path),u=n.rect;if(!u||!u.width||!u.height)throw"specify width or height on popup: "+popupId;return new SideMenuX({id:t,layout:l,width:u.width,onOpen:i,onClose:r,menuType:a,closeOnClickOutside:"boolean"==typeof e&&e,bg:"#fff"}).open()},Page.prototype.initSideMenu=function(t,e,i,r){if(4!==arguments.length)throw"`Page.openSideMenu` function requires 4 arguments";if("string"!=typeof t)throw"`menuId` must be a string";if("boolean"!=typeof e)throw"`closeOnClickOutSide` must be  a boolean";if("function"!=typeof i)throw"onOpen must be a function";if("function"!=typeof r)throw"onClose must be a function";let n=this.sidemenus.get(t),o=-1!==this.leftMenus.indexOf(t),s=-1!==this.rightMenus.indexOf(t),a=o?SideMenuTypes.LEFT:s?SideMenuTypes.RIGHT:null;if(!a)throw"Invalid menutype found";let l=this.sources.get(n.path),u=n.rect;if(!u||!u.width||!u.height)throw"specify width or height on popup: "+popupId;return new SideMenuX({id:t,layout:l,width:u.width,onOpen:i,onClose:r,menuType:a,closeOnClickOutside:"boolean"==typeof e&&e,bg:"#fff"}).build()},Page.prototype.openPopup=function(t,e,i,r){if(4!==arguments.length)throw"`Page.openPopup` function requires 4 arguments";if("string"!=typeof t)throw"`popupId` must be a string";if("boolean"!=typeof e)throw"`closeOnClickOutSide` must be  a boolean";if("function"!=typeof i)throw"onOpen must be a function";if("function"!=typeof r)throw"onClose must be a function";let n=this.popups.get(t),o=this.sources.get(n.path),s=n.rect;if(!s||!s.width||!s.height)throw"specify width or height on popup: "+t;return new Popup({id:t,layout:o,width:s.width,height:s.height,closeOnClickOutside:"boolean"==typeof e&&e,bg:"#fff",onOpen:i,onClose:r}).open()},Page.prototype.closePopup=function(t){t.hide()},Page.prototype.renderInclude=function(t,e){let i=this.includes.get(t).path,r=e||this.sources.get(i),n=document.getElementById(t);n.innerHTML=r;let o=new Page(n);o.layout(),this.subPages.set(t,o)};var workerCode=function(){function loadFiles(t,e,i){if(Array.isArray(e))if(i<e.length){var r=e[i];!function(t,e,i){const r=new URL(e,t);fetch(r,{credentials:"same-origin"}).then(function(t){return t}).then(function(t){return t.text()}).then(function(t){i(t)}).catch(function(t){setTimeout(function(){throw main.layoutError(t),t})})}(t,r,function(n){main.layoutLoaded(r,n,!1),loadFiles(t,e,i+1)})}else main.layoutLoaded(null,"",!0);else main.layoutError(new Error("Pass an array of filepaths here"))}var t;loadAll=function(t,e){loadFiles(t,e,0)},t=function(){"use strict";function t(t){var e=this.constructor;return this.then(function(i){return e.resolve(t()).then(function(){return i})},function(i){return e.resolve(t()).then(function(){return e.reject(i)})})}function e(t){return new this(function(e,i){function r(t,i){if(i&&("object"==typeof i||"function"==typeof i)){var s=i.then;if("function"==typeof s)return void s.call(i,function(e){r(t,e)},function(i){n[t]={status:"rejected",reason:i},0==--o&&e(n)})}n[t]={status:"fulfilled",value:i},0==--o&&e(n)}if(!t||void 0===t.length)return i(new TypeError(typeof t+" "+t+" is not iterable(cannot read property Symbol(Symbol.iterator))"));var n=Array.prototype.slice.call(t);if(0===n.length)return e([]);for(var o=n.length,s=0;n.length>s;s++)r(s,n[s])})}function i(t){return!(!t||void 0===t.length)}function r(){}function n(t){if(!(this instanceof n))throw new TypeError("Promises must be constructed via new");if("function"!=typeof t)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],u(t,this)}function o(t,e){for(;3===t._state;)t=t._value;0!==t._state?(t._handled=!0,n._immediateFn(function(){var i=1===t._state?e.onFulfilled:e.onRejected;if(null!==i){var r;try{r=i(t._value)}catch(t){return void a(e.promise,t)}s(e.promise,r)}else(1===t._state?s:a)(e.promise,t._value)})):t._deferreds.push(e)}function s(t,e){try{if(e===t)throw new TypeError("A promise cannot be resolved with itself.");if(e&&("object"==typeof e||"function"==typeof e)){var i=e.then;if(e instanceof n)return t._state=3,t._value=e,void l(t);if("function"==typeof i)return void u(function(t,e){return function(){t.apply(e,arguments)}}(i,e),t)}t._state=1,t._value=e,l(t)}catch(e){a(t,e)}}function a(t,e){t._state=2,t._value=e,l(t)}function l(t){2===t._state&&0===t._deferreds.length&&n._immediateFn(function(){t._handled||n._unhandledRejectionFn(t._value)});for(var e=0,i=t._deferreds.length;i>e;e++)o(t,t._deferreds[e]);t._deferreds=null}function u(t,e){var i=!1;try{t(function(t){i||(i=!0,s(e,t))},function(t){i||(i=!0,a(e,t))})}catch(t){if(i)return;i=!0,a(e,t)}}var h=setTimeout;n.prototype.catch=function(t){return this.then(null,t)},n.prototype.then=function(t,e){var i=new this.constructor(r);return o(this,new function(t,e,i){this.onFulfilled="function"==typeof t?t:null,this.onRejected="function"==typeof e?e:null,this.promise=i}(t,e,i)),i},n.prototype.finally=t,n.all=function(t){return new n(function(e,r){function n(t,i){try{if(i&&("object"==typeof i||"function"==typeof i)){var a=i.then;if("function"==typeof a)return void a.call(i,function(e){n(t,e)},r)}o[t]=i,0==--s&&e(o)}catch(t){r(t)}}if(!i(t))return r(new TypeError("Promise.all accepts an array"));var o=Array.prototype.slice.call(t);if(0===o.length)return e([]);for(var s=o.length,a=0;o.length>a;a++)n(a,o[a])})},n.allSettled=e,n.resolve=function(t){return t&&"object"==typeof t&&t.constructor===n?t:new n(function(e){e(t)})},n.reject=function(t){return new n(function(e,i){i(t)})},n.race=function(t){return new n(function(e,r){if(!i(t))return r(new TypeError("Promise.race accepts an array"));for(var o=0,s=t.length;s>o;o++)n.resolve(t[o]).then(e,r)})},n._immediateFn="function"==typeof setImmediate&&function(t){setImmediate(t)}||function(t){h(t,0)},n._unhandledRejectionFn=function(t){void 0!==console&&console&&console.warn("Possible Unhandled Promise Rejection:",t)};var c=function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if("undefined"!=typeof global)return global;throw Error("unable to locate global object")}();"function"!=typeof c.Promise?c.Promise=n:(c.Promise.prototype.finally||(c.Promise.prototype.finally=t),c.Promise.allSettled||(c.Promise.allSettled=e))},"object"==typeof exports&&"undefined"!=typeof module?t():"function"==typeof define&&define.amd?define(t):t(),function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e(t.WHATWGFetch={})}(this,function(t){"use strict";var e="undefined"!=typeof self&&self||void 0!==e&&e,i="URLSearchParams"in e,r="Symbol"in e&&"iterator"in Symbol,n="FileReader"in e&&"Blob"in e&&function(){try{return new Blob,!0}catch(t){return!1}}(),o="FormData"in e,s="ArrayBuffer"in e;if(s)var a=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],l=ArrayBuffer.isView||function(t){return t&&a.indexOf(Object.prototype.toString.call(t))>-1};function u(t){if("string"!=typeof t&&(t=String(t)),/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(t)||""===t)throw new TypeError("Invalid character in header field name");return t.toLowerCase()}function h(t){return"string"!=typeof t&&(t=String(t)),t}function c(t){var e={next:function(){var e=t.shift();return{done:void 0===e,value:e}}};return r&&(e[Symbol.iterator]=function(){return e}),e}function p(t){this.map={},t instanceof p?t.forEach(function(t,e){this.append(e,t)},this):Array.isArray(t)?t.forEach(function(t){this.append(t[0],t[1])},this):t&&Object.getOwnPropertyNames(t).forEach(function(e){this.append(e,t[e])},this)}function d(t){if(t.bodyUsed)return Promise.reject(new TypeError("Already read"));t.bodyUsed=!0}function f(t){return new Promise(function(e,i){t.onload=function(){e(t.result)},t.onerror=function(){i(t.error)}})}function y(t){var e=new FileReader,i=f(e);return e.readAsArrayBuffer(t),i}function m(t){if(t.slice)return t.slice(0);var e=new Uint8Array(t.byteLength);return e.set(new Uint8Array(t)),e.buffer}function g(){return this.bodyUsed=!1,this._initBody=function(t){var e;this.bodyUsed=this.bodyUsed,this._bodyInit=t,t?"string"==typeof t?this._bodyText=t:n&&Blob.prototype.isPrototypeOf(t)?this._bodyBlob=t:o&&FormData.prototype.isPrototypeOf(t)?this._bodyFormData=t:i&&URLSearchParams.prototype.isPrototypeOf(t)?this._bodyText=t.toString():s&&n&&((e=t)&&DataView.prototype.isPrototypeOf(e))?(this._bodyArrayBuffer=m(t.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):s&&(ArrayBuffer.prototype.isPrototypeOf(t)||l(t))?this._bodyArrayBuffer=m(t):this._bodyText=t=Object.prototype.toString.call(t):this._bodyText="",this.headers.get("content-type")||("string"==typeof t?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):i&&URLSearchParams.prototype.isPrototypeOf(t)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},n&&(this.blob=function(){var t=d(this);if(t)return t;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){if(this._bodyArrayBuffer){var t=d(this);return t||(ArrayBuffer.isView(this._bodyArrayBuffer)?Promise.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset,this._bodyArrayBuffer.byteOffset+this._bodyArrayBuffer.byteLength)):Promise.resolve(this._bodyArrayBuffer))}return this.blob().then(y)}),this.text=function(){var t,e,i,r=d(this);if(r)return r;if(this._bodyBlob)return t=this._bodyBlob,e=new FileReader,i=f(e),e.readAsText(t),i;if(this._bodyArrayBuffer)return Promise.resolve(function(t){for(var e=new Uint8Array(t),i=new Array(e.length),r=0;r<e.length;r++)i[r]=String.fromCharCode(e[r]);return i.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},o&&(this.formData=function(){return this.text().then(b)}),this.json=function(){return this.text().then(JSON.parse)},this}p.prototype.append=function(t,e){t=u(t),e=h(e);var i=this.map[t];this.map[t]=i?i+", "+e:e},p.prototype.delete=function(t){delete this.map[u(t)]},p.prototype.get=function(t){return t=u(t),this.has(t)?this.map[t]:null},p.prototype.has=function(t){return this.map.hasOwnProperty(u(t))},p.prototype.set=function(t,e){this.map[u(t)]=h(e)},p.prototype.forEach=function(t,e){for(var i in this.map)this.map.hasOwnProperty(i)&&t.call(e,this.map[i],i,this)},p.prototype.keys=function(){var t=[];return this.forEach(function(e,i){t.push(i)}),c(t)},p.prototype.values=function(){var t=[];return this.forEach(function(e){t.push(e)}),c(t)},p.prototype.entries=function(){var t=[];return this.forEach(function(e,i){t.push([i,e])}),c(t)},r&&(p.prototype[Symbol.iterator]=p.prototype.entries);var w=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function v(t,e){if(!(this instanceof v))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');var i,r,n=(e=e||{}).body;if(t instanceof v){if(t.bodyUsed)throw new TypeError("Already read");this.url=t.url,this.credentials=t.credentials,e.headers||(this.headers=new p(t.headers)),this.method=t.method,this.mode=t.mode,this.signal=t.signal,n||null==t._bodyInit||(n=t._bodyInit,t.bodyUsed=!0)}else this.url=String(t);if(this.credentials=e.credentials||this.credentials||"same-origin",!e.headers&&this.headers||(this.headers=new p(e.headers)),this.method=(i=e.method||this.method||"GET",r=i.toUpperCase(),w.indexOf(r)>-1?r:i),this.mode=e.mode||this.mode||null,this.signal=e.signal||this.signal,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&n)throw new TypeError("Body not allowed for GET or HEAD requests");if(this._initBody(n),!("GET"!==this.method&&"HEAD"!==this.method||"no-store"!==e.cache&&"no-cache"!==e.cache)){var o=/([?&])_=[^&]*/;if(o.test(this.url))this.url=this.url.replace(o,"$1_="+(new Date).getTime());else{this.url+=(/\?/.test(this.url)?"&":"?")+"_="+(new Date).getTime()}}}function b(t){var e=new FormData;return t.trim().split("&").forEach(function(t){if(t){var i=t.split("="),r=i.shift().replace(/\+/g," "),n=i.join("=").replace(/\+/g," ");e.append(decodeURIComponent(r),decodeURIComponent(n))}}),e}function A(t,e){if(!(this instanceof A))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');e||(e={}),this.type="default",this.status=void 0===e.status?200:e.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in e?e.statusText:"",this.headers=new p(e.headers),this.url=e.url||"",this._initBody(t)}v.prototype.clone=function(){return new v(this,{body:this._bodyInit})},g.call(v.prototype),g.call(A.prototype),A.prototype.clone=function(){return new A(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new p(this.headers),url:this.url})},A.error=function(){var t=new A(null,{status:0,statusText:""});return t.type="error",t};var E=[301,302,303,307,308];A.redirect=function(t,e){if(-1===E.indexOf(e))throw new RangeError("Invalid status code");return new A(null,{status:e,headers:{location:t}})},t.DOMException=e.DOMException;try{new t.DOMException}catch(e){t.DOMException=function(t,e){this.message=t,this.name=e;var i=Error(t);this.stack=i.stack},t.DOMException.prototype=Object.create(Error.prototype),t.DOMException.prototype.constructor=t.DOMException}function _(i,r){return new Promise(function(o,a){var l=new v(i,r);if(l.signal&&l.signal.aborted)return a(new t.DOMException("Aborted","AbortError"));var u=new XMLHttpRequest;function c(){u.abort()}u.onload=function(){var t,e,i={status:u.status,statusText:u.statusText,headers:(t=u.getAllResponseHeaders()||"",e=new p,t.replace(/\r?\n[\t ]+/g," ").split(/\r?\n/).forEach(function(t){var i=t.split(":"),r=i.shift().trim();if(r){var n=i.join(":").trim();e.append(r,n)}}),e)};i.url="responseURL"in u?u.responseURL:i.headers.get("X-Request-URL");var r="response"in u?u.response:u.responseText;setTimeout(function(){o(new A(r,i))},0)},u.onerror=function(){setTimeout(function(){a(new TypeError("Network request failed"))},0)},u.ontimeout=function(){setTimeout(function(){a(new TypeError("Network request failed"))},0)},u.onabort=function(){setTimeout(function(){a(new t.DOMException("Aborted","AbortError"))},0)},u.open(l.method,function(t){try{return""===t&&e.location.href?e.location.href:t}catch(e){return t}}(l.url),!0),"include"===l.credentials?u.withCredentials=!0:"omit"===l.credentials&&(u.withCredentials=!1),"responseType"in u&&(n?u.responseType="blob":s&&l.headers.get("Content-Type")&&-1!==l.headers.get("Content-Type").indexOf("application/octet-stream")&&(u.responseType="arraybuffer")),!r||"object"!=typeof r.headers||r.headers instanceof p?l.headers.forEach(function(t,e){u.setRequestHeader(e,t)}):Object.getOwnPropertyNames(r.headers).forEach(function(t){u.setRequestHeader(t,h(r.headers[t]))}),l.signal&&(l.signal.addEventListener("abort",c),u.onreadystatechange=function(){4===u.readyState&&l.signal.removeEventListener("abort",c)}),u.send(void 0===l._bodyInit?null:l._bodyInit)})}_.polyfill=!0,e.fetch||(e.fetch=_,e.Headers=p,e.Request=v,e.Response=A),t.Headers=p,t.Request=v,t.Response=A,t.fetch=_,Object.defineProperty(t,"__esModule",{value:!0})})},layoutLoaded=function(t,e,i){page.sources.set(t,e),i&&(page.sourcesLoaded=i,onSourcesLoaded()),page.includes.forEach(function(i,r){!1===i.consumed&&i.path===t&&(page.renderInclude(r,e),i.consumed=!0)}),i&&onLayoutComplete()},layoutError=function(t){throw t};function layoutRootOnBindingElement(t,e){if("string"!=typeof t&&t)throw"Invalid bindingElemId...bindingElemId: "+t;if("string"!=typeof e||0===e.length)throw"Invalid rootChildId";return[{view1:e,attr1:"centerX",relation:"equ",view2:t,attr2:"centerX",constant:0,multiplier:1,priority:AutoLayout.Priority.REQUIRED},{view1:e,attr1:"centerY",relation:"equ",view2:t,attr2:"centerY",constant:0,multiplier:1,priority:AutoLayout.Priority.REQUIRED},{view1:e,attr1:"width",relation:"equ",view2:t,attr2:"width",constant:0,multiplier:1,priority:AutoLayout.Priority.REQUIRED},{view1:e,attr1:"height",relation:"equ",view2:t,attr2:"height",constant:0,multiplier:1,priority:AutoLayout.Priority.REQUIRED}]}function autoLayout(t,e){let i=e&&isOneDimArray(e)&&e.length>0&&"string"==typeof e[0],r=e&&isOneDimArray(e)&&(e.length>0&&"object"==typeof e[0]||0===e.length),n=window.AutoLayout,o=new n.View;if(!0===i)o.addConstraints(n.VisualFormat.parse(e,{extended:!0}));else{if(!r)throw"Invalid parameters passed to autoLayout! no layout constraints specified";o.addConstraints(e)}let s={};for(let t in o.subViews){let e=document.getElementById(t);e&&(addClass(e,"abs"),s[t]=e)}var a=function(){if(t){let e=t.scrollWidth>t.clientWidth,i=t.scrollHeight>t.clientHeight?window.innerWidth-getScrollBarWidth():window.innerWidth,r=e?window.innerHeight-getScrollBarWidth():window.innerHeight;o.setSize(t?t.clientWidth:i,t?t.clientHeight:r-1)}else o.setSize(t?t.clientWidth:window.innerWidth,t?t.clientHeight:window.innerHeight-1);for(let t in o.subViews){var e=o.subViews[t];let i=s[t];i&&setAbsoluteSizeAndPosition(i,e.left,e.top,e.width,e.height)}};if(window.addEventListener("resize",a),!t){let t=document.body.children;for(let e=0;e<t.length;e++){let i=t[e];new ResizeSensor(i,function(){i&&(i.scrollHeight>i.clientHeight||i.scrollWidth>i.clientWidth)&&a()})}}return a(),a}let transformAttr="transform"in document.documentElement.style?"transform":void 0;function setAbsoluteSizeAndPosition(t,e,i,r,n){t.setAttribute("style","width: "+r+"px; height: "+n+"px; "+transformAttr+": translate3d("+e+"px, "+i+"px, 0px);")}function View(t,e,i,r){const n=e.id;if(null==n||""===n)throw"Please specify the view id properly";if(void 0!==t.findViewById(n))throw"A view with this id(`"+n+"`) exists already";if(this.htmlNode=e,this.topLevel=0===t.viewMap.size||!r,this.id=n,this.parentId=r,this.childrenIds=[],this.hasBgImage=!!i.get(attrKeys.mi_useAutoBg),i&&i.size>0){let t=i.get(attrKeys.layout_margin),e=i.get(attrKeys.layout_marginHorizontal),r=i.get(attrKeys.layout_marginVertical);if(this.margins={top:i.get(attrKeys.layout_marginTop),bottom:i.get(attrKeys.layout_marginBottom),start:i.get(attrKeys.layout_marginStart),end:i.get(attrKeys.layout_marginEnd),horUnitsSame:!0,verUnitsSame:!0,horMarginDiff:function(){let t=parseNumberAndUnitsNoValidation(this.start,!0),e=parseNumberAndUnitsNoValidation(this.end,!0);if(!this.horUnitsSame)throw"start and end margins must be same when using `cx, scx, cxs` etc.";return parseFloat(t.number)-parseFloat(e.number)+t.units},verMarginDiff:function(){let t=parseNumberAndUnitsNoValidation(this.top,!0),e=parseNumberAndUnitsNoValidation(this.bottom,!0);if(!this.verUnitsSame)throw"top and bottom margins must be same when using `cy, tcy, cyt` etc.";return parseFloat(t.number)-parseFloat(e.number)+t.units}},r){if(!isNumber(parseInt(r)))throw new Error("Invalid value specified for the vertical margin on "+this.constructor.name+"("+this.id+")");this.margins.top=r,this.margins.bottom=r}if(e){if(!isNumber(parseInt(e)))throw new Error("Invalid value specified for the horizontal margin on "+this.constructor.name+"("+this.id+")");this.margins.start=e,this.margins.end=e}if(t){if(!isNumber(parseInt(t)))throw new Error("Invalid value specified for the margins on "+this.constructor.name+"("+this.id+")");this.margins.top=t,this.margins.bottom=t,this.margins.start=t,this.margins.end=t}this.margins.top&&startsWith(this.margins.top,"+")&&(this.margins.top=this.margins.top.substr(1)),this.margins.bottom&&startsWith(this.margins.bottom,"+")&&(this.margins.bottom=this.margins.bottom.substr(1)),this.margins.start&&startsWith(this.margins.start,"+")&&(this.margins.start=this.margins.start.substr(1)),this.margins.end&&startsWith(this.margins.end,"+")&&(this.margins.end=this.margins.end.substr(1)),this.margins.start&&"0"!==this.margins.start||(this.margins.start=0),this.margins.end&&"0"!==this.margins.end||(this.margins.end=0),this.margins.top&&"0"!==this.margins.top||(this.margins.top=0),this.margins.bottom&&"0"!==this.margins.bottom||(this.margins.bottom=0);{let t=parseNumberAndUnitsNoValidation(this.margins.start,!0),e=parseNumberAndUnitsNoValidation(this.margins.end,!0),r=parseNumberAndUnitsNoValidation(this.margins.top,!0),n=parseNumberAndUnitsNoValidation(this.margins.bottom,!0),o=i.get(attrKeys.layout_marginStart),s=i.get(attrKeys.layout_marginEnd),a=i.get(attrKeys.layout_marginTop),l=i.get(attrKeys.layout_marginBottom);o&&s&&t.units!==e.units&&0!==parseInt(t.number)&&0!==parseInt(e.number)&&(this.margins.horUnitsSame=!1),a&&l&&r.units!==n.units&&0!==parseInt(r.number)&&0!==parseInt(n.number)&&(this.margins.verUnitsSame=!1),o&&!s&&(this.margins.end="0"+t.units),s&&!o&&(this.margins.start="0"+e.units),a&&!l&&(this.margins.bottom="0"+r.units),l&&!a&&(this.margins.top="0"+n.units)}this.width=i.get(attrKeys.layout_width),this.height=i.get(attrKeys.layout_height),this.width===sizes.MATCH_PARENT&&(this.width="100%"),this.height===sizes.MATCH_PARENT&&(this.height="100%"),endsWith(this.width,"px")&&(this.width=parseFloat(this.width)),endsWith(this.height,"px")&&(this.height=parseFloat(this.height)),this.dimRatio=-1,this.wrapWidth=-1,this.wrapHeight=-1;const n=new Error;if(void 0===this.width||null===this.width||""===this.width)throw n.name="UnspecifiedWidthError",n.message="Please specify the width for '"+this.id+"'",n;if(void 0===this.height||null===this.height||""===this.height)throw n.name="UnspecifiedHeightError",n.message="Please specify the height for '"+this.id+"'",n;let o=this;i.forEach(function(t,e,r){switch(e){case attrKeys.layout:i.set(attrKeys.layout,t);break;case attrKeys.layout_width:isNaN(parseInt(e))&&i.set(attrKeys.layout_width,t);break;case attrKeys.layout_height:isNaN(parseInt(e))&&i.set(attrKeys.layout_height,t);break;case attrKeys.layout_maxWidth:isNaN(parseInt(e))&&i.set(attrKeys.layout_maxWidth,t);break;case attrKeys.layout_maxHeight:isNaN(parseInt(e))&&i.set(attrKeys.layout_maxHeight,t);break;case attrKeys.layout_minWidth:isNaN(parseInt(e))&&i.set(attrKeys.layout_minWidth,t);break;case attrKeys.layout_minHeight:isNaN(parseInt(e))&&i.set(attrKeys.layout_minHeight,t);break;case attrKeys.dimension_ratio:if(isNumber(t))this.dimRatio=parseFloat(t),i.set(attrKeys.dimension_ratio,o.dimRatio);else{if(!0!==isDimensionRatio(t))throw new Error("Invalid dimension ratio specified on view with id: "+o.id);{let e=t.split(":"),r=parseFloat(e[0]),n=parseFloat(e[1]);if(r<=0)throw new Error("Bad ratio specified! LHS can neither be 0 nor less than 0");if(n<=0)throw new Error("Bad ratio specified! RHS can neither be 0 nor less than 0");o.dimRatio=r/n,i.set(attrKeys.dimension_ratio,o.dimRatio)}}}})}if(this.refIds=i,!this.id)throw"Your view must have an id!";if("string"!=typeof this.id)throw"The view id must be a string!";if(0===this.id.trim().length)throw"The view id cannot be an empty string!";let o=e.getBoundingClientRect();this.width===sizes.WRAP_CONTENT&&(this.width=this.wrapWidth=o.width),this.height===sizes.WRAP_CONTENT&&(this.height=this.wrapHeight=o.height),t.viewMap.set(this.id,this)}function isDimensionRatio(t){if(!isNaN(t))return t+=":1",!0;let e=0;for(let i=0;i<t.length;i++)if(":"===t.substring(i,i+1)&&(e++,e>1))return!1;if(0===e||e>1)return!1;let i=t.split(":");return 2===i.length&&!isNaN(i[0])&&!isNaN(i[1])}function quickScan(t,e){let i=t+"";i=i.replace(".width","%width"),i=i.replace(".height","%height");let r=new Scanner(i,!0,["*","+","%","-"]).scan();if(e&&!0===e)return r;let n=r.indexOf("%");return-1!==n&&(r[n]="."),r}function isHTMLTagName(t){if("string"==typeof t){return"a b u i body head header h1 h2 h3 h4 h5 h6 style title div p span button checkbox radio input label textarea select legend ul ol li link table tbody thead tfoot tr td th option optgroup video meta img hr picture pre script section small strong noscript object canvas caption blockquote article audio time var cite code iframe nav noframes menu br".split(" ").indexOf(t.trim().toLowerCase())>-1}return!1}function getSignedValue(t){if(void 0===t)return"+0.0";if("string"==typeof t){let e=parseInt(t);return isNaN(e)?"+0.0":e>=0?"+"+e:""+e}return"number"==typeof t?t>0?"+"+t:"-"+t:void 0}function Guideline(t,e,i,r){View.call(this,t,e,i,r);let n=i.get(attrKeys.layout_width),o=i.get(attrKeys.layout_height);n!==sizes.WRAP_CONTENT&&this.refIds.set(attrKeys.layout_width,sizes.WRAP_CONTENT),o!==sizes.WRAP_CONTENT&&this.refIds.set(attrKeys.layout_height,sizes.WRAP_CONTENT),addClass(e,GUIDE_CLASS)}function IncludedView(t,e,i,r){View.call(this,t,e,i,r);let n=e.getAttribute(attrKeys.layout);if(!n||"string"!=typeof n)throw"An included layout must be the name of a valid xml file in the `"+PATH_TO_LAYOUTS_FOLDER+"` folder";let o=n.length;".xml"!==n.substring(o-4)&&(n+=".xml");new Parser(t,n,this.id)}function is2DArray(t){if("[object Array]"===Object.prototype.toString.call(t)){for(let e=0;e<t.length;e++)if("[object Array]"!==Object.prototype.toString.call(t[e]))return!1;return!0}return!1}function attributeNotEmpty(t){return!!(t&&t.trim().length>0)}function attributeEmpty(t){return!t||0===t.trim().length}function Scanner(t,e,i){this.input=t,this.includeTokensInOutput=e,this.tokens=i.filter(t=>t&&t.length>0).sort((t,e)=>e.length-t.length)}function StringBuffer(t){this.dataArray=new Array(t)}transformAttr=transformAttr||("-webkit-transform"in document.documentElement.style?"-webkit-transform":"undefined"),transformAttr=transformAttr||("-moz-transform"in document.documentElement.style?"-moz-transform":"undefined"),transformAttr=transformAttr||("-ms-transform"in document.documentElement.style?"-ms-transform":"undefined"),transformAttr=transformAttr||("-o-transform"in document.documentElement.style?"-o-transform":"undefined"),View.prototype.isPopup=function(){let t=this.refIds.get(attrKeys.layout_popup);return void 0!==t&&(!0===t||"true"===t)},View.prototype.isLeftSideMenu=function(){let t=this.refIds.get(attrKeys.layout_menuLeft);return void 0!==t&&(!0===t||"true"===t)},View.prototype.isRightSideMenu=function(){let t=this.refIds.get(attrKeys.layout_menuRight);return void 0!==t&&(!0===t||"true"===t)},View.prototype.isSideMenu=function(){return this.isLeftSideMenu()||this.isRightSideMenu()},View.prototype.makeBgImage=function(){let t=this.refIds,e=t.get(attrKeys.mi_useAutoBg);if(!e||"false"===e)return;let i=t.get(attrKeys.mi_fg),r=t.get(attrKeys.mi_bg),n=t.get(attrKeys.mi_strokeWidth),o=t.get(attrKeys.mi_minSize),s=t.get(attrKeys.mi_textArray),a=t.get(attrKeys.mi_fontName),l=t.get(attrKeys.mi_fontWeight),u=t.get(attrKeys.mi_fontStyle),h=t.get(attrKeys.mi_fontSize),c=t.get(attrKeys.mi_numShapes),p=t.get(attrKeys.mi_shapesDensity),d=t.get(attrKeys.mi_opacity),f=t.get(attrKeys.mi_cacheAfterDraw),y=t.get(attrKeys.mi_opaqueBg),m=t.get(attrKeys.mi_mode),g=t.get(attrKeys.mi_textOnly),w=null;if(u?(w=u,l&&(w+=" "+l)):l&&(w=l),s&&"string"==typeof s)try{s=JSON.parse(s)}catch(t){throw t}f=!0===f||"true"===f,g=!0===g||"true"===g,y=!0===y||"true"===y;let v=this.htmlNode.getBoundingClientRect(),b={width:v.width,height:v.height,fontName:a,fontSize:h,fontStyle:w,fgColor:i,bgColor:r,mode:m,numShapes:c,shapesDensity:p,strokeWidth:n,minSize:o,opacity:d,bgOpacityEnabled:y,textArray:s,textOnly:g,cacheAfterDraw:f};b.width=v.width,b.height=v.height;let A=new MysteryImage(b);A.draw();let E=new Style("#"+this.id,[]);E.addFromOptions({"background-image":"url('"+A.getImage()+"')","background-position":"0% 0%"}),updateOrCreateSelectorInStyleSheet(styleSheet,E),A.cleanup()},View.prototype.getValueAndPriority=function(t){if(void 0===t)return t;if(isNumber(t))return{id:t+"",defaultUsed:!0,priority:AutoLayout.Priority.REQUIRED};let e=t.indexOf("@");if(-1===e)return{id:t,defaultUsed:!0,priority:AutoLayout.Priority.REQUIRED};if(0===e)throw"Bad value for id";return{id:t.substring(0,e),defaultUsed:!1,priority:parseInt(t.substring(e+1))}},View.prototype.layoutSelf=function(t){let e=this.width,i=this.height,r=this.id,n=this.refIds.get(attrKeys.layout_maxWidth),o=this.refIds.get(attrKeys.layout_maxHeight),s=this.refIds.get(attrKeys.layout_minWidth),a=this.refIds.get(attrKeys.layout_minHeight),l=this.refIds.get(attrKeys.layout_constraintStart_toStartOf),u=this.refIds.get(attrKeys.layout_constraintEnd_toEndOf),h=this.refIds.get(attrKeys.layout_constraintTop_toTopOf),c=this.refIds.get(attrKeys.layout_constraintBottom_toBottomOf),p=this.refIds.get(attrKeys.layout_constraintCenterXAlign),d=this.refIds.get(attrKeys.layout_constraintCenterYAlign),f=[],y=this.getValueAndPriority(e);e=y.id;let m=y.priority;this.setWidthConstraints(t,f,this.id,e,m);let g=this.getValueAndPriority(i);i=g.id;let w=g.priority;if(this.setHeightConstraints(t,f,this.id,i,w),n){let t=this.getValueAndPriority(n);n=t.id;let e=t.priority;f.push({view1:r,attr1:"width",relation:"leq",constant:parseFloat(n),multiplier:1,priority:e})}if(s){let t=this.getValueAndPriority(s);s=t.id;let e=t.priority;f.push({view1:r,attr1:"width",relation:"geq",constant:parseFloat(s),multiplier:1,priority:e})}if(o){let t=this.getValueAndPriority(o);o=t.id;let e=t.priority;f.push({view1:r,attr1:"height",relation:"leq",constant:parseFloat(o),multiplier:1,priority:e})}if(a){let t=this.getValueAndPriority(a);a=t.id;let e=t.priority;f.push({view1:r,attr1:"height",relation:"geq",constant:parseFloat(a),multiplier:1,priority:e})}let v=this;if(l){let t=this.getValueAndPriority(l);l=t.id;let e=t.priority;this.setLeftAlignSS(r,v.margins.start,"parent",e,f)}if(h){let t=this.getValueAndPriority(h);h=t.id;let e=t.priority;this.setTopAlignTT(r,v.margins.top,"parent",e,f)}if(u){let t=this.getValueAndPriority(u);u=t.id;let e=t.priority;this.setRightAlignEE(r,v.margins.end,"parent",e,f)}if(c){let t=this.getValueAndPriority(c);c=t.id;let e=t.priority;this.setBottomAlignBB(r,v.margins.bottom,"parent",e,f)}if(p){let t=this.getValueAndPriority(p);p=t.id;let e=t.priority;f.push({view1:r,attr1:"centerX",relation:"equ",view2:null,attr2:"centerX",constant:v.margins.start-v.margins.end,multiplier:1,priority:e})}if(d){let t=this.getValueAndPriority(d);d=t.id;let e=t.priority;f.push({view1:r,attr1:"centerY",relation:"equ",view2:null,attr2:"centerY",constant:v.margins.top-v.margins.bottom,multiplier:1,priority:e})}return f},View.prototype.layoutChildren=function(t){this.width,this.height;let e=[];for(let i=0;i<this.childrenIds.length;i++){let r=this.childrenIds[i],n=t.viewMap.get(r),o=n.refIds.get(attrKeys.layout_constraintStart_toStartOf),s=n.refIds.get(attrKeys.layout_constraintStart_toEndOf),a=n.refIds.get(attrKeys.layout_constraintEnd_toStartOf),l=n.refIds.get(attrKeys.layout_constraintEnd_toEndOf),u=n.refIds.get(attrKeys.layout_constraintTop_toTopOf),h=n.refIds.get(attrKeys.layout_constraintTop_toBottomOf),c=n.refIds.get(attrKeys.layout_constraintBottom_toTopOf),p=n.refIds.get(attrKeys.layout_constraintBottom_toBottomOf),d=n.refIds.get(attrKeys.layout_constraintCenterXAlign),f=n.refIds.get(attrKeys.layout_constraintCenterYAlign),y=n.refIds.get(attrKeys.layout_constraintStart_toCenterX),m=n.refIds.get(attrKeys.layout_constraintEnd_toCenterX),g=n.refIds.get(attrKeys.layout_constraintCenterX_toStart),w=n.refIds.get(attrKeys.layout_constraintCenterX_toEnd),v=n.refIds.get(attrKeys.layout_constraintTop_toCenterY),b=n.refIds.get(attrKeys.layout_constraintCenterY_toTop),A=n.refIds.get(attrKeys.layout_constraintBottom_toCenterY),E=n.refIds.get(attrKeys.layout_constraintCenterY_toBottom),_=n.refIds.get(attrKeys.layout_horizontalBias),x=n.refIds.get(attrKeys.layout_verticalBias);if("Guideline"===n.constructor.name){n.layoutGuide(e);continue}if(_){if(!isNumber(_))throw"Invalid type set for horBias... should be a number between 0 and 1 view.id="+r;if(_=2*parseFloat(_),_<0||_>2)throw"Invalid value set for horBias... should be between 0 and 1 on view.id="+r;0===_&&(_=MIN_BIAS)}else _=1;if(x){if(!isNumber(x))throw"Invalid type set for verBias... should be between 0 and 1 view.id="+r;if(x=2*parseFloat(x),x<0||x>2)throw"Invalid value set for verBias... should be between 0 and 1 on view.id="+r;0===x&&(x=MIN_BIAS)}else x=1;let S=n.refIds.get(attrKeys.layout_maxWidth),T=n.refIds.get(attrKeys.layout_maxHeight),C=n.refIds.get(attrKeys.layout_minWidth),I=n.refIds.get(attrKeys.layout_minHeight),O=n.width,V=n.height;O===sizes.WRAP_CONTENT&&(O=n.wrapWidth),V===sizes.WRAP_CONTENT&&(V=n.wrapHeight);let N=this.getValueAndPriority(O);O=N.id;let L,R,q=N.priority;N.defaultUsed&&(o&&l||o&&a||o&&m||s&&l||s&&a||s&&m||y&&l||y&&a||y&&m)&&(0===parseInt(O)?q=AutoLayout.Priority.DEFAULTLOW:(L=r+"_dummywid_"+ULID.ulid(),o?this.setLeftAlignSS(L,n.margins.start,o,AutoLayout.Priority.REQUIRED,e):s?this.setLeftAlignSE(L,n.margins.start,s,AutoLayout.Priority.REQUIRED,e):y&&this.setLeftAlignCX(L,n.margins.start,y,AutoLayout.Priority.REQUIRED,e),l?this.setRightAlignEE(L,n.margins.end,l,AutoLayout.Priority.REQUIRED,e):a?this.setRightAlignES(L,n.margins.end,a,AutoLayout.Priority.REQUIRED,e):m&&this.setRightAlignCX(L,n.margins.end,m,AutoLayout.Priority.REQUIRED,e),e.push({view1:L,attr1:"width",relation:"equ",view2:null,attr2:AutoLayout.Attribute.NOTANATTRIBUTE,constant:0,multiplier:1,priority:249}),e.push({view1:r,attr1:"centerX",relation:"equ",view2:L,attr2:"centerX",constant:n.margins.horMarginDiff(),multiplier:_,priority:AutoLayout.Priority.REQUIRED}))),this.setWidthConstraints(t,e,r,O,q);let P=this.getValueAndPriority(V);V=P.id;let B=P.priority;if(P.defaultUsed&&(u&&p||u&&c||u&&A||h&&p||h&&c||h&&A||v&&p||v&&c||v&&A)&&(0===parseInt(V)?B=AutoLayout.Priority.DEFAULTLOW:(B=AutoLayout.Priority.REQUIRED,R=r+"_dummyhei_"+ULID.ulid(),u?this.setTopAlignTT(R,n.margins.top,u,AutoLayout.Priority.REQUIRED,e):h?this.setTopAlignTB(R,n.margins.top,h,AutoLayout.Priority.REQUIRED,e):v&&this.setTopAlignCY(R,n.margins.top,v,AutoLayout.Priority.REQUIRED,e),p?this.setBottomAlignBB(R,n.margins.bottom,p,AutoLayout.Priority.REQUIRED,e):c?this.setBottomAlignBT(R,n.margins.bottom,c,AutoLayout.Priority.REQUIRED,e):A&&this.setBottomAlignCY(R,n.margins.bottom,A,AutoLayout.Priority.REQUIRED,e),e.push({view1:R,attr1:"height",relation:"equ",view2:null,attr2:AutoLayout.Attribute.NOTANATTRIBUTE,constant:0,multiplier:1,priority:249}),e.push({view1:r,attr1:"centerY",relation:"equ",view2:R,attr2:"centerY",constant:n.margins.verMarginDiff(),multiplier:x,priority:AutoLayout.Priority.REQUIRED}))),this.setHeightConstraints(t,e,r,V,B),this.setSizeBoundariesConstraints(t,e,r,S,C,T,I),o&&!L){let t=this.getValueAndPriority(o);o=t.id;let i=t.priority;this.setLeftAlignSS(r,n.margins.start,o,i,e)}if(u&&!R){let t=this.getValueAndPriority(u);u=t.id;let i=t.priority;this.setTopAlignTT(r,n.margins.top,u,i,e)}if(l&&!L){let t=this.getValueAndPriority(l);l=t.id;let i=t.priority;this.setRightAlignEE(r,n.margins.end,l,i,e)}if(p&&!R){let t=this.getValueAndPriority(p);p=t.id;let i=t.priority;this.setBottomAlignBB(r,n.margins.bottom,p,i,e)}if(s&&!L){let t=this.getValueAndPriority(s);s=t.id;let i=t.priority;this.setLeftAlignSE(r,n.margins.start,s,i,e)}if(a&&!L){let t=this.getValueAndPriority(a);a=t.id;let i=t.priority;this.setRightAlignES(r,n.margins.end,a,i,e)}if(h&&!R){let t=this.getValueAndPriority(h);h=t.id;let i=t.priority;this.setTopAlignTB(r,n.margins.top,h,i,e)}if(c&&!R){let t=this.getValueAndPriority(c);c=t.id;let i=t.priority;this.setBottomAlignBT(r,n.margins.bottom,c,i,e)}if(d){let t=this.getValueAndPriority(d);d=t.id;let i=t.priority;if(!n.margins.horUnitsSame)throw"`cx` needs margin-start and margin-end to have same units!";e.push({view1:r,attr1:"centerX",relation:"equ",view2:"parent"===d?null:d,attr2:"centerX",constant:n.margins.horMarginDiff(),multiplier:_,priority:i})}if(f){let t=this.getValueAndPriority(f);f=t.id;let i=t.priority;if(!n.margins.verUnitsSame)throw"`cy` needs margin-top and margin-bottom to have same units!";e.push({view1:r,attr1:"centerY",relation:"equ",view2:"parent"===f?null:f,attr2:"centerY",constant:n.margins.verMarginDiff(),multiplier:x,priority:i})}if(y&&!L){let t=this.getValueAndPriority(y);y=t.id;let i=t.priority;this.setLeftAlignCX(r,n.margins.start,y,i,e)}if(m&&!L){let t=this.getValueAndPriority(m);m=t.id;let i=t.priority;this.setRightAlignCX(r,n.margins.end,m,i,e)}if(g&&!L){let t=this.getValueAndPriority(g);g=t.id;let i=t.priority;if(!n.margins.horUnitsSame)throw"`cxs` needs margin-start and margin-end to have same units!";this.setCXAlignLeft(r,n.margins.horMarginDiff(),g,i,e)}if(w&&!L){let t=this.getValueAndPriority(w);w=t.id;let i=t.priority;if(!n.margins.horUnitsSame)throw"`cxe` needs margin-start and margin-end to have same units!";this.setCXAlignRight(r,n.margins.horMarginDiff(),w,i,e)}if(v&&!L){let t=this.getValueAndPriority(v);v=t.id;let i=t.priority;this.setTopAlignCY(r,n.margins.top,v,i,e)}if(A&&!L){let t=this.getValueAndPriority(A);A=t.id;let i=t.priority;this.setBottomAlignCY(r,n.margins.bottom,A,i,e)}if(b&&!L){let t=this.getValueAndPriority(b);b=t.id;let i=t.priority;if(!n.margins.verUnitsSame)throw"`bcy` needs margin-top and margin-bottom to have same units!";this.setCYAlignTop(r,n.margins.verMarginDiff(),b,i,e)}if(E&&!L){let t=this.getValueAndPriority(E);E=t.id;let i=t.priority;if(!n.margins.verUnitsSame)throw"`cyb` needs margin-top and margin-bottom to have same units!";this.setCYAlignBottom(r,n.margins.verMarginDiff(),E,i,e)}}return e},View.prototype.setLeftAlignSS=function(t,e,i,r,n){if("number"==typeof(e="0%"===e?0:e))n.push({view1:t,attr1:"left",relation:"equ",view2:"parent"===i?null:i,attr2:"left",constant:e,multiplier:1,priority:r});else if(isNumber(e))n.push({view1:t,attr1:"left",relation:"equ",view2:"parent"===i?null:i,attr2:"left",constant:parseFloat(e),multiplier:1,priority:r});else if(endsWith(e,"px"))n.push({view1:t,attr1:"left",relation:"equ",view2:"parent"===i?null:i,attr2:"left",constant:parseFloat(e),multiplier:1,priority:r});else{if(!endsWith(e,"%"))throw"margin-left can only be expressed in pixels, in percentage(%) or without units, on id: "+t;let r=parseFloat(e)/100,o=t+"_dummy_"+ULID.ulid();"parent"===i?(n.push({view1:o,attr1:"left",relation:"equ",view2:null,attr2:"left",constant:0,multiplier:1,priority:1e3}),n.push({view1:o,attr1:"width",relation:"equ",view2:null,attr2:"width",constant:1,multiplier:r,priority:1e3}),n.push({view1:t,attr1:"left",relation:"equ",view2:o,attr2:"right",constant:1,multiplier:1,priority:1e3})):(n.push({view1:o,attr1:"left",relation:"equ",view2:i,attr2:"left",constant:0,multiplier:1,priority:1e3}),n.push({view1:o,attr1:"width",relation:"equ",view2:null,attr2:"width",constant:1,multiplier:r,priority:1e3}),n.push({view1:t,attr1:"left",relation:"equ",view2:o,attr2:"right",constant:1,multiplier:1,priority:1e3}))}},View.prototype.setLeftAlignSE=function(t,e,i,r,n){if("number"==typeof(e="0%"===e?0:e))n.push({view1:t,attr1:"left",relation:"equ",view2:"parent"===i?null:i,attr2:"right",constant:e,multiplier:1,priority:r});else if(isNumber(e))n.push({view1:t,attr1:"left",relation:"equ",view2:"parent"===i?null:i,attr2:"right",constant:parseFloat(e),multiplier:1,priority:r});else if(endsWith(e,"px"))n.push({view1:t,attr1:"left",relation:"equ",view2:"parent"===i?null:i,attr2:"right",constant:parseFloat(e),multiplier:1,priority:r});else{if(!endsWith(e,"%"))throw"margin-left can only be expressed in pixels, in percentage(%) or without units, on id: "+t;let r=parseFloat(e)/100,o=t+"_dummy_"+ULID.ulid();"parent"===i?(n.push({view1:o,attr1:"left",relation:"equ",view2:null,attr2:"right",constant:0,multiplier:1,priority:1e3}),n.push({view1:o,attr1:"width",relation:"equ",view2:null,attr2:"width",constant:1,multiplier:r,priority:1e3}),n.push({view1:t,attr1:"left",relation:"equ",view2:o,attr2:"right",constant:1,multiplier:1,priority:1e3})):(n.push({view1:o,attr1:"left",relation:"equ",view2:i,attr2:"right",constant:0,multiplier:1,priority:1e3}),n.push({view1:o,attr1:"width",relation:"equ",view2:null,attr2:"width",constant:1,multiplier:r,priority:1e3}),n.push({view1:t,attr1:"left",relation:"equ",view2:o,attr2:"right",constant:1,multiplier:1,priority:1e3}))}},View.prototype.setRightAlignEE=function(t,e,i,r,n){if("number"==typeof(e="0%"===e?0:e))n.push({view1:t,attr1:"right",relation:"equ",view2:"parent"===i?null:i,attr2:"right",constant:-1*e,multiplier:1,priority:r});else if(isNumber(e))n.push({view1:t,attr1:"right",relation:"equ",view2:"parent"===i?null:i,attr2:"right",constant:-1*parseFloat(e),multiplier:1,priority:r});else if(endsWith(e,"px"))n.push({view1:t,attr1:"right",relation:"equ",view2:"parent"===i?null:i,attr2:"right",constant:-1*parseFloat(e),multiplier:1,priority:r});else{if(!endsWith(e,"%"))throw"margin-right can only be expressed in pixels, in percentage(%) or without units, on id: "+t;let r=parseFloat(e)/100,o=t+"_dummy_"+ULID.ulid();"parent"===i?(n.push({view1:o,attr1:"right",relation:"equ",view2:null,attr2:"right",constant:0,multiplier:1,priority:1e3}),n.push({view1:o,attr1:"width",relation:"equ",view2:null,attr2:"width",constant:1,multiplier:r,priority:1e3}),n.push({view1:t,attr1:"right",relation:"equ",view2:o,attr2:"left",constant:1,multiplier:1,priority:1e3})):(n.push({view1:o,attr1:"right",relation:"equ",view2:i,attr2:"right",constant:0,multiplier:1,priority:1e3}),n.push({view1:o,attr1:"width",relation:"equ",view2:null,attr2:"width",constant:1,multiplier:r,priority:1e3}),n.push({view1:t,attr1:"right",relation:"equ",view2:o,attr2:"left",constant:1,multiplier:1,priority:1e3}))}},View.prototype.setRightAlignES=function(t,e,i,r,n){if("number"==typeof(e="0%"===e?0:e))n.push({view1:t,attr1:"right",relation:"equ",view2:"parent"===i?null:i,attr2:"left",constant:-1*e,multiplier:1,priority:r});else if(isNumber(e))n.push({view1:t,attr1:"right",relation:"equ",view2:"parent"===i?null:i,attr2:"left",constant:-1*parseFloat(e),multiplier:1,priority:r});else if(endsWith(e,"px"))n.push({view1:t,attr1:"right",relation:"equ",view2:"parent"===i?null:i,attr2:"left",constant:-1*parseFloat(e),multiplier:1,priority:r});else{if(!endsWith(e,"%"))throw"margin-right can only be expressed in pixels, in percentage(%) or without units, on id: "+t;let r=parseFloat(e)/100,o=t+"_dummy_"+ULID.ulid();"parent"===i?(n.push({view1:o,attr1:"right",relation:"equ",view2:null,attr2:"left",constant:0,multiplier:1,priority:1e3}),n.push({view1:o,attr1:"width",relation:"equ",view2:null,attr2:"width",constant:1,multiplier:r,priority:1e3}),n.push({view1:t,attr1:"right",relation:"equ",view2:o,attr2:"left",constant:1,multiplier:1,priority:1e3})):(n.push({view1:o,attr1:"right",relation:"equ",view2:i,attr2:"left",constant:0,multiplier:1,priority:1e3}),n.push({view1:o,attr1:"width",relation:"equ",view2:null,attr2:"width",constant:1,multiplier:r,priority:1e3}),n.push({view1:t,attr1:"right",relation:"equ",view2:o,attr2:"left",constant:1,multiplier:1,priority:1e3}))}},View.prototype.setLeftAlignCX=function(t,e,i,r,n){if("number"==typeof(e="0%"===e?0:e))n.push({view1:t,attr1:AutoLayout.Attribute.LEFT,relation:"equ",view2:"parent"===i?null:i,attr2:AutoLayout.Attribute.CENTERX,constant:e,multiplier:1,priority:r});else if(isNumber(e))n.push({view1:t,attr1:AutoLayout.Attribute.LEFT,relation:"equ",view2:"parent"===i?null:i,attr2:AutoLayout.Attribute.CENTERX,constant:parseFloat(e),multiplier:1,priority:r});else if(endsWith(e,"px"))n.push({view1:t,attr1:AutoLayout.Attribute.LEFT,relation:"equ",view2:"parent"===i?null:i,attr2:AutoLayout.Attribute.CENTERX,constant:parseFloat(e),multiplier:1,priority:r});else{if(!endsWith(e,"%"))throw"margin-left can only be expressed in pixels, in percentage(%) or without units, on id: "+t;let r=parseFloat(e)/100,o=t+"_dummy_"+ULID.ulid();"parent"===i?(n.push({view1:o,attr1:AutoLayout.Attribute.LEFT,relation:"equ",view2:null,attr2:AutoLayout.Attribute.CENTERX,constant:0,multiplier:1,priority:1e3}),n.push({view1:o,attr1:"width",relation:"equ",view2:null,attr2:"width",constant:1,multiplier:r,priority:1e3}),n.push({view1:t,attr1:"left",relation:"equ",view2:o,attr2:"right",constant:1,multiplier:1,priority:1e3})):(n.push({view1:o,attr1:AutoLayout.Attribute.LEFT,relation:"equ",view2:i,attr2:AutoLayout.Attribute.CENTERX,constant:0,multiplier:1,priority:1e3}),n.push({view1:o,attr1:"width",relation:"equ",view2:null,attr2:"width",constant:1,multiplier:r,priority:1e3}),n.push({view1:t,attr1:"left",relation:"equ",view2:o,attr2:"right",constant:1,multiplier:1,priority:1e3}))}},View.prototype.setCXAlignLeft=function(t,e,i,r,n){if("number"==typeof(e="0%"===e?0:e))n.push({view1:t,attr1:AutoLayout.Attribute.CENTERX,relation:"equ",view2:"parent"===i?null:i,attr2:AutoLayout.Attribute.LEFT,constant:e,multiplier:1,priority:r});else if(isNumber(e))n.push({view1:t,attr1:AutoLayout.Attribute.CENTERX,relation:"equ",view2:"parent"===i?null:i,attr2:AutoLayout.Attribute.LEFT,constant:parseFloat(e),multiplier:1,priority:r});else if(endsWith(e,"px"))n.push({view1:t,attr1:AutoLayout.Attribute.CENTERX,relation:"equ",view2:"parent"===i?null:i,attr2:AutoLayout.Attribute.LEFT,constant:parseFloat(e),multiplier:1,priority:r});else{if(!endsWith(e,"%"))throw"margin-left can only be expressed in pixels, in percentage(%) or without units, on id: "+t;let r=parseFloat(e)/100,o=t+"_dummy_"+ULID.ulid();"parent"===i?(n.push({view1:o,attr1:AutoLayout.Attribute.LEFT,relation:"equ",view2:null,attr2:AutoLayout.Attribute.LEFT,constant:0,multiplier:1,priority:1e3}),n.push({view1:o,attr1:"width",relation:"equ",view2:null,attr2:"width",constant:1,multiplier:r,priority:1e3}),n.push({view1:t,attr1:AutoLayout.Attribute.CENTERX,relation:"equ",view2:o,attr2:AutoLayout.Attribute.RIGHT,constant:1,multiplier:1,priority:1e3})):(n.push({view1:o,attr1:AutoLayout.Attribute.LEFT,relation:"equ",view2:i,attr2:AutoLayout.Attribute.LEFT,constant:0,multiplier:1,priority:1e3}),n.push({view1:o,attr1:"width",relation:"equ",view2:null,attr2:"width",constant:1,multiplier:r,priority:1e3}),n.push({view1:t,attr1:AutoLayout.Attribute.CENTERX,relation:"equ",view2:o,attr2:AutoLayout.Attribute.RIGHT,constant:1,multiplier:1,priority:1e3}))}},View.prototype.setCXAlignRight=function(t,e,i,r,n){if("number"==typeof(e="0%"===e?0:e))n.push({view1:t,attr1:AutoLayout.Attribute.CENTERX,relation:"equ",view2:"parent"===i?null:i,attr2:AutoLayout.Attribute.RIGHT,constant:e,multiplier:1,priority:r});else if(isNumber(e))n.push({view1:t,attr1:AutoLayout.Attribute.CENTERX,relation:"equ",view2:"parent"===i?null:i,attr2:AutoLayout.Attribute.RIGHT,constant:parseFloat(e),multiplier:1,priority:r});else if(endsWith(e,"px"))n.push({view1:t,attr1:AutoLayout.Attribute.CENTERX,relation:"equ",view2:"parent"===i?null:i,attr2:AutoLayout.Attribute.RIGHT,constant:parseFloat(e),multiplier:1,priority:r});else{if(!endsWith(e,"%"))throw"margins can only be expressed in pixels, in percentage(%) or without units, on id: "+t;let r=parseFloat(e)/100,o=t+"_dummy_"+ULID.ulid();"parent"===i?(n.push({view1:o,attr1:AutoLayout.Attribute.LEFT,relation:"equ",view2:null,attr2:AutoLayout.Attribute.RIGHT,constant:0,multiplier:1,priority:1e3}),n.push({view1:o,attr1:"width",relation:"equ",view2:null,attr2:"width",constant:1,multiplier:r,priority:1e3}),n.push({view1:t,attr1:AutoLayout.Attribute.CENTERX,relation:"equ",view2:o,attr2:AutoLayout.Attribute.RIGHT,constant:1,multiplier:1,priority:1e3})):(n.push({view1:o,attr1:AutoLayout.Attribute.LEFT,relation:"equ",view2:i,attr2:AutoLayout.Attribute.RIGHT,constant:1,multiplier:1,priority:1e3}),n.push({view1:o,attr1:"width",relation:"equ",view2:null,attr2:"width",constant:1,multiplier:r,priority:1e3}),n.push({view1:t,attr1:AutoLayout.Attribute.CENTERX,relation:"equ",view2:o,attr2:AutoLayout.Attribute.RIGHT,constant:1,multiplier:1,priority:1e3}))}},View.prototype.setRightAlignCX=function(t,e,i,r,n){if("number"==typeof(e="0%"===e?0:e))n.push({view1:t,attr1:AutoLayout.Attribute.RIGHT,relation:"equ",view2:"parent"===i?null:i,attr2:AutoLayout.Attribute.CENTERX,constant:-e,multiplier:1,priority:r});else if(isNumber(e))n.push({view1:t,attr1:AutoLayout.Attribute.RIGHT,relation:"equ",view2:"parent"===i?null:i,attr2:AutoLayout.Attribute.CENTERX,constant:-parseFloat(e),multiplier:1,priority:r});else if(endsWith(e,"px"))n.push({view1:t,attr1:AutoLayout.Attribute.RIGHT,relation:"equ",view2:"parent"===i?null:i,attr2:AutoLayout.Attribute.CENTERX,constant:-parseFloat(e),multiplier:1,priority:r});else{if(!endsWith(e,"%"))throw"margin-left can only be expressed in pixels, in percentage(%) or without units, on id: "+t;let r=parseFloat(e)/100,o=t+"_dummy_"+ULID.ulid();"parent"===i?(n.push({view1:o,attr1:AutoLayout.Attribute.RIGHT,relation:"equ",view2:null,attr2:AutoLayout.Attribute.CENTERX,constant:0,multiplier:1,priority:1e3}),n.push({view1:o,attr1:"width",relation:"equ",view2:null,attr2:"width",constant:1,multiplier:r,priority:1e3}),n.push({view1:t,attr1:"left",relation:"equ",view2:o,attr2:"left",constant:1,multiplier:1,priority:1e3})):(n.push({view1:o,attr1:AutoLayout.Attribute.RIGHT,relation:"equ",view2:i,attr2:AutoLayout.Attribute.CENTERX,constant:0,multiplier:1,priority:1e3}),n.push({view1:o,attr1:"width",relation:"equ",view2:null,attr2:"width",constant:1,multiplier:r,priority:1e3}),n.push({view1:t,attr1:"left",relation:"equ",view2:o,attr2:"left",constant:1,multiplier:1,priority:1e3}))}},View.prototype.setTopAlignCY=function(t,e,i,r,n){if("number"==typeof(e="0%"===e?0:e))n.push({view1:t,attr1:AutoLayout.Attribute.TOP,relation:"equ",view2:"parent"===i?null:i,attr2:AutoLayout.Attribute.CENTERY,constant:e,multiplier:1,priority:r});else if(isNumber(e))n.push({view1:t,attr1:AutoLayout.Attribute.TOP,relation:"equ",view2:"parent"===i?null:i,attr2:AutoLayout.Attribute.CENTERY,constant:parseFloat(e),multiplier:1,priority:r});else if(endsWith(e,"px"))n.push({view1:t,attr1:AutoLayout.Attribute.TOP,relation:"equ",view2:"parent"===i?null:i,attr2:AutoLayout.Attribute.CENTERY,constant:parseFloat(e),multiplier:1,priority:r});else{if(!endsWith(e,"%"))throw"margin-left can only be expressed in pixels, in percentage(%) or without units, on id: "+t;let r=parseFloat(e)/100,o=t+"_dummy_"+ULID.ulid();"parent"===i?(n.push({view1:o,attr1:AutoLayout.Attribute.TOP,relation:"equ",view2:null,attr2:AutoLayout.Attribute.CENTERY,constant:0,multiplier:1,priority:1e3}),n.push({view1:o,attr1:"height",relation:"equ",view2:null,attr2:"height",constant:1,multiplier:r,priority:1e3}),n.push({view1:t,attr1:"top",relation:"equ",view2:o,attr2:"bottom",constant:1,multiplier:1,priority:1e3})):(n.push({view1:o,attr1:AutoLayout.Attribute.TOP,relation:"equ",view2:i,attr2:AutoLayout.Attribute.CENTERY,constant:0,multiplier:1,priority:1e3}),n.push({view1:o,attr1:"height",relation:"equ",view2:null,attr2:"width",constant:1,multiplier:r,priority:1e3}),n.push({view1:t,attr1:"top",relation:"equ",view2:o,attr2:"bottom",constant:1,multiplier:1,priority:1e3}))}},View.prototype.setCYAlignTop=function(t,e,i,r,n){if("number"==typeof(e="0%"===e?0:e))n.push({view1:t,attr1:AutoLayout.Attribute.CENTERY,relation:"equ",view2:"parent"===i?null:i,attr2:AutoLayout.Attribute.TOP,constant:e,multiplier:1,priority:r});else if(isNumber(e))n.push({view1:t,attr1:AutoLayout.Attribute.CENTERY,relation:"equ",view2:"parent"===i?null:i,attr2:AutoLayout.Attribute.TOP,constant:parseFloat(e),multiplier:1,priority:r});else if(endsWith(e,"px"))n.push({view1:t,attr1:AutoLayout.Attribute.CENTERY,relation:"equ",view2:"parent"===i?null:i,attr2:AutoLayout.Attribute.TOP,constant:parseFloat(e),multiplier:1,priority:r});else{if(!endsWith(e,"%"))throw"margin-left can only be expressed in pixels, in percentage(%) or without units, on id: "+t;let r=parseFloat(e)/100,o=t+"_dummy_"+ULID.ulid();"parent"===i?(n.push({view1:o,attr1:AutoLayout.Attribute.TOP,relation:"equ",view2:null,attr2:AutoLayout.Attribute.TOP,constant:0,multiplier:1,priority:1e3}),n.push({view1:o,attr1:"height",relation:"equ",view2:null,attr2:"width",constant:1,multiplier:r,priority:1e3}),n.push({view1:t,attr1:AutoLayout.Attribute.CENTERY,relation:"equ",view2:o,attr2:AutoLayout.Attribute.BOTTOM,constant:1,multiplier:1,priority:1e3})):(n.push({view1:o,attr1:AutoLayout.Attribute.TOP,relation:"equ",view2:i,attr2:AutoLayout.Attribute.TOP,constant:0,multiplier:1,priority:1e3}),n.push({view1:o,attr1:"height",relation:"equ",view2:null,attr2:"width",constant:1,multiplier:r,priority:1e3}),n.push({view1:t,attr1:AutoLayout.Attribute.CENTERY,relation:"equ",view2:o,attr2:AutoLayout.Attribute.BOTTOM,constant:1,multiplier:1,priority:1e3}))}},View.prototype.setCYAlignBottom=function(t,e,i,r,n){if("number"==typeof(e="0%"===e?0:e))n.push({view1:t,attr1:AutoLayout.Attribute.CENTERY,relation:"equ",view2:"parent"===i?null:i,attr2:AutoLayout.Attribute.BOTTOM,constant:e,multiplier:1,priority:r});else if(isNumber(e))n.push({view1:t,attr1:AutoLayout.Attribute.CENTERY,relation:"equ",view2:"parent"===i?null:i,attr2:AutoLayout.Attribute.BOTTOM,constant:parseFloat(e),multiplier:1,priority:r});else if(endsWith(e,"px"))n.push({view1:t,attr1:AutoLayout.Attribute.CENTERY,relation:"equ",view2:"parent"===i?null:i,attr2:AutoLayout.Attribute.BOTTOM,constant:parseFloat(e),multiplier:1,priority:r});else{if(!endsWith(e,"%"))throw"margins can only be expressed in pixels, in percentage(%) or without units, on id: "+t;let r=parseFloat(e)/100,o=t+"_dummy_"+ULID.ulid();"parent"===i?(n.push({view1:o,attr1:AutoLayout.Attribute.TOP,relation:"equ",view2:null,attr2:AutoLayout.Attribute.BOTTOM,constant:0,multiplier:1,priority:1e3}),n.push({view1:o,attr1:"height",relation:"equ",view2:null,attr2:"width",constant:1,multiplier:r,priority:1e3}),n.push({view1:t,attr1:AutoLayout.Attribute.CENTERY,relation:"equ",view2:o,attr2:AutoLayout.Attribute.BOTTOM,constant:1,multiplier:1,priority:1e3})):(n.push({view1:o,attr1:AutoLayout.Attribute.TOP,relation:"equ",view2:i,attr2:AutoLayout.Attribute.BOTTOM,constant:1,multiplier:1,priority:1e3}),n.push({view1:o,attr1:"height",relation:"equ",view2:null,attr2:"width",constant:1,multiplier:r,priority:1e3}),n.push({view1:t,attr1:AutoLayout.Attribute.CENTERY,relation:"equ",view2:o,attr2:AutoLayout.Attribute.BOTTOM,constant:1,multiplier:1,priority:1e3}))}},View.prototype.setBottomAlignCY=function(t,e,i,r,n){if("number"==typeof(e="0%"===e?0:e))n.push({view1:t,attr1:AutoLayout.Attribute.BOTTOM,relation:"equ",view2:"parent"===i?null:i,attr2:AutoLayout.Attribute.CENTERY,constant:-e,multiplier:1,priority:r});else if(isNumber(e))n.push({view1:t,attr1:AutoLayout.Attribute.BOTTOM,relation:"equ",view2:"parent"===i?null:i,attr2:AutoLayout.Attribute.CENTERY,constant:-parseFloat(e),multiplier:1,priority:r});else if(endsWith(e,"px"))n.push({view1:t,attr1:AutoLayout.Attribute.BOTTOM,relation:"equ",view2:"parent"===i?null:i,attr2:AutoLayout.Attribute.CENTERY,constant:-parseFloat(e),multiplier:1,priority:r});else{if(!endsWith(e,"%"))throw"margin-left can only be expressed in pixels, in percentage(%) or without units, on id: "+t;let r=parseFloat(e)/100,o=t+"_dummy_"+ULID.ulid();"parent"===i?(n.push({view1:o,attr1:AutoLayout.Attribute.BOTTOM,relation:"equ",view2:null,attr2:AutoLayout.Attribute.CENTERY,constant:0,multiplier:1,priority:1e3}),n.push({view1:o,attr1:"height",relation:"equ",view2:null,attr2:"width",constant:1,multiplier:r,priority:1e3}),n.push({view1:t,attr1:"top",relation:"equ",view2:o,attr2:"top",constant:1,multiplier:1,priority:1e3})):(n.push({view1:o,attr1:AutoLayout.Attribute.BOTTOM,relation:"equ",view2:i,attr2:AutoLayout.Attribute.CENTERY,constant:0,multiplier:1,priority:1e3}),n.push({view1:o,attr1:"height",relation:"equ",view2:null,attr2:"width",constant:1,multiplier:r,priority:1e3}),n.push({view1:t,attr1:"top",relation:"equ",view2:o,attr2:"top",constant:1,multiplier:1,priority:1e3}))}},View.prototype.setTopAlignTT=function(t,e,i,r,n){if("number"==typeof(e="0%"===e?0:e))n.push({view1:t,attr1:"top",relation:"equ",view2:"parent"===i?null:i,attr2:"top",constant:e,multiplier:1,priority:r});else if(isNumber(e))n.push({view1:t,attr1:"top",relation:"equ",view2:"parent"===i?null:i,attr2:"top",constant:parseFloat(e),multiplier:1,priority:r});else if(endsWith(e,"px"))n.push({view1:t,attr1:"top",relation:"equ",view2:"parent"===i?null:i,attr2:"top",constant:parseFloat(e),multiplier:1,priority:r});else{if(!endsWith(e,"%"))throw"margin-top can only be expressed in pixels, in percentage(%) or without units, on id: "+t;let r=parseFloat(e)/100;if(!r)throw"Invalid expression found for margin-top on id: "+t;let o=t+"_dummy_"+ULID.ulid();"parent"===i?(n.push({view1:o,attr1:"top",relation:"equ",view2:null,attr2:"top",constant:0,multiplier:1,priority:1e3}),n.push({view1:o,attr1:"height",relation:"equ",view2:null,attr2:"width",constant:1,multiplier:r,priority:1e3}),n.push({view1:t,attr1:"top",relation:"equ",view2:o,attr2:"bottom",constant:1,multiplier:1,priority:1e3})):(n.push({view1:o,attr1:"top",relation:"equ",view2:i,attr2:"top",constant:0,multiplier:1,priority:1e3}),n.push({view1:o,attr1:"height",relation:"equ",view2:null,attr2:"width",constant:1,multiplier:r,priority:1e3}),n.push({view1:t,attr1:"top",relation:"equ",view2:o,attr2:"bottom",constant:1,multiplier:1,priority:1e3}))}},View.prototype.setTopAlignTB=function(t,e,i,r,n){if("number"==typeof(e="0%"===e?0:e))n.push({view1:t,attr1:"top",relation:"equ",view2:"parent"===i?null:i,attr2:"bottom",constant:e,multiplier:1,priority:r});else if(isNumber(e))n.push({view1:t,attr1:"top",relation:"equ",view2:"parent"===i?null:i,attr2:"bottom",constant:parseFloat(e),multiplier:1,priority:r});else if(endsWith(e,"px"))n.push({view1:t,attr1:"top",relation:"equ",view2:"parent"===i?null:i,attr2:"bottom",constant:parseFloat(e),multiplier:1,priority:r});else{if(!endsWith(e,"%"))throw"margin-top can only be expressed in pixels, in percentage(%) or without units, on id: "+t;let r=parseFloat(e)/100;if(!r)throw"Invalid expression found for margin-top on id: "+t;let o=t+"_dummy_"+ULID.ulid();"parent"===i?(n.push({view1:o,attr1:"top",relation:"equ",view2:null,attr2:"bottom",constant:0,multiplier:1,priority:1e3}),n.push({view1:o,attr1:"height",relation:"equ",view2:null,attr2:"width",constant:1,multiplier:r,priority:1e3}),n.push({view1:t,attr1:"top",relation:"equ",view2:o,attr2:"bottom",constant:1,multiplier:1,priority:1e3})):(n.push({view1:o,attr1:"top",relation:"equ",view2:i,attr2:"bottom",constant:0,multiplier:1,priority:1e3}),n.push({view1:o,attr1:"height",relation:"equ",view2:null,attr2:"width",constant:1,multiplier:r,priority:1e3}),n.push({view1:t,attr1:"top",relation:"equ",view2:o,attr2:"bottom",constant:1,multiplier:1,priority:1e3}))}},View.prototype.setBottomAlignBB=function(t,e,i,r,n){if("number"==typeof e)n.push({view1:t,attr1:"bottom",relation:"equ",view2:"parent"===i?null:i,attr2:"bottom",constant:-1*e,multiplier:1,priority:r});else if(isNumber(e))n.push({view1:t,attr1:"bottom",relation:"equ",view2:"parent"===i?null:i,attr2:"bottom",constant:-1*parseFloat(e),multiplier:1,priority:r});else if(endsWith(e,"px"))n.push({view1:t,attr1:"bottom",relation:"equ",view2:"parent"===i?null:i,attr2:"bottom",constant:-1*parseFloat(e),multiplier:1,priority:r});else{if(!endsWith(e,"%"))throw"margin-bottom can only be expressed in pixels, in percentage(%) or without units, on id: "+t;let r=parseFloat(e)/100,o=t+"_dummy_"+ULID.ulid();"parent"===i?(n.push({view1:o,attr1:"bottom",relation:"equ",view2:null,attr2:"bottom",constant:0,multiplier:1,priority:1e3}),n.push({view1:o,attr1:"height",relation:"equ",view2:null,attr2:"width",constant:1,multiplier:r,priority:1e3}),n.push({view1:t,attr1:"bottom",relation:"equ",view2:o,attr2:"top",constant:1,multiplier:1,priority:1e3})):(n.push({view1:o,attr1:"bottom",relation:"equ",view2:i,attr2:"bottom",constant:0,multiplier:1,priority:1e3}),n.push({view1:o,attr1:"height",relation:"equ",view2:null,attr2:"width",constant:1,multiplier:r,priority:1e3}),n.push({view1:t,attr1:"bottom",relation:"equ",view2:o,attr2:"top",constant:1,multiplier:1,priority:1e3}))}},View.prototype.setBottomAlignBT=function(t,e,i,r,n){if("number"==typeof(e="0%"===e?0:e))n.push({view1:t,attr1:"bottom",relation:"equ",view2:"parent"===i?null:i,attr2:"top",constant:-1*e,multiplier:1,priority:r});else if(isNumber(e))n.push({view1:t,attr1:"bottom",relation:"equ",view2:"parent"===i?null:i,attr2:"top",constant:-1*parseFloat(e),multiplier:1,priority:r});else if(endsWith(e,"px"))n.push({view1:t,attr1:"bottom",relation:"equ",view2:"parent"===i?null:i,attr2:"top",constant:-1*parseFloat(e),multiplier:1,priority:r});else{if(!endsWith(e,"%"))throw"margin-bottom can only be expressed in pixels, in percentage(%) or without units, on id: "+t;let r=parseFloat(e)/100,o=t+"_dummy_"+ULID.ulid();"parent"===i?(n.push({view1:o,attr1:"bottom",relation:"equ",view2:null,attr2:"top",constant:0,multiplier:1,priority:1e3}),n.push({view1:o,attr1:"height",relation:"equ",view2:null,attr2:"width",constant:1,multiplier:r,priority:1e3}),n.push({view1:t,attr1:"bottom",relation:"equ",view2:o,attr2:"top",constant:1,multiplier:1,priority:1e3})):(n.push({view1:o,attr1:"bottom",relation:"equ",view2:i,attr2:"top",constant:0,multiplier:1,priority:1e3}),n.push({view1:o,attr1:"height",relation:"equ",view2:null,attr2:"width",constant:1,multiplier:r,priority:1e3}),n.push({view1:t,attr1:"bottom",relation:"equ",view2:o,attr2:"top",constant:1,multiplier:1,priority:1e3}))}},View.prototype.setSizeBoundariesConstraints=function(t,e,i,r,n,o,s){if(r){let t=this.getValueAndPriority(r);r=t.id;let n=t.priority,o=-1,s="";if(isNumber(r))e.push({view1:i,attr1:"width",relation:"leq",view2:null,attr2:AutoLayout.Attribute.NOTANATTRIBUTE,constant:parseFloat(r),multiplier:1,priority:n});else if("parent"===r||-1!==this.childrenIds.indexOf(r))e.push({view1:i,attr1:"width",relation:"leq",view2:"parent"===r?null:r,attr2:"width",constant:0,multiplier:1,priority:n});else if(-1!==(o=r.indexOf("."))&&-1!==this.childrenIds.indexOf(s=r.substring(0,o)))"width"===r.substring(o+1)?e.push({view1:i,attr1:"width",relation:"leq",view2:"parent"===s?null:s,attr2:"width",constant:0,multiplier:1,priority:n}):"height"===r.substring(o+1)&&e.push({view1:i,attr1:"width",relation:"leq",view2:"parent"===s?null:s,attr2:"height",constant:0,multiplier:1,priority:n});else{let t=parseNumberAndUnitsNoValidation(r,!0);if(!t.number)throw"Bad value specified for the max-width units on view.id="+i+", value="+r;if("px"===t.units)e.push({view1:i,attr1:"width",relation:"leq",constant:parseFloat(t.number),view2:null,attr2:AutoLayout.Attribute.NOTANATTRIBUTE,multiplier:1,priority:n});else if("%"===t.units)e.push({view1:i,attr1:"width",relation:"leq",view2:null,attr2:"width",constant:0,multiplier:parseFloat(t.number)/100,priority:n});else{if("em"!==t.units)throw"Invalid values specified for the max-width units on view.id="+i;e.push({view1:i,attr1:"width",relation:"leq",view2:null,attr2:"width",constant:0,multiplier:parseFloat(t.number),priority:n})}}}if(n){let t=this.getValueAndPriority(n);n=t.id;let r=t.priority,o=-1,s="";if(isNumber(n))e.push({view1:i,attr1:"width",relation:"geq",view2:null,attr2:AutoLayout.Attribute.NOTANATTRIBUTE,constant:parseFloat(n),multiplier:1,priority:r});else if("parent"===n||-1!==this.childrenIds.indexOf(n))e.push({view1:i,attr1:"width",relation:"geq",view2:"parent"===n?null:n,attr2:"width",constant:0,multiplier:1,priority:r});else if(-1!==(o=n.indexOf("."))&&-1!==this.childrenIds.indexOf(s=n.substring(0,o)))"width"===n.substring(o+1)?e.push({view1:i,attr1:"width",relation:"geq",view2:"parent"===s?null:s,attr2:"width",constant:0,multiplier:1,priority:r}):"height"===n.substring(o+1)&&e.push({view1:i,attr1:"width",relation:"geq",view2:"parent"===s?null:s,attr2:"height",constant:0,multiplier:1,priority:r});else{let t=parseNumberAndUnitsNoValidation(n,!0);if(!t.number)throw"Bad value specified for the min-width units on view.id="+i+", value="+n;if("px"===t.units)e.push({view1:i,attr1:"width",relation:"geq",view2:null,attr2:AutoLayout.Attribute.NOTANATTRIBUTE,constant:parseFloat(t.number),multiplier:1,priority:r});else if("%"===t.units)e.push({view1:i,attr1:"width",relation:"geq",view2:null,attr2:"width",constant:0,multiplier:parseFloat(t.number)/100,priority:r});else{if("em"!==t.units)throw"Invalid values specified for the min-width units on view.id="+i;e.push({view1:i,attr1:"width",relation:"geq",view2:null,attr2:"width",constant:0,multiplier:parseFloat(t.number),priority:r})}}}if(o){let t=this.getValueAndPriority(o);o=t.id;let r=t.priority,n=-1,s="";if(isNumber(o))e.push({view1:i,attr1:"height",relation:"leq",view2:null,attr2:AutoLayout.Attribute.NOTANATTRIBUTE,constant:parseFloat(o),multiplier:1,priority:r});else if("parent"===o||-1!==this.childrenIds.indexOf(o))e.push({view1:i,attr1:"height",relation:"leq",view2:"parent"===o?null:o,attr2:"height",constant:0,multiplier:1,priority:r});else if(-1!==(n=o.indexOf("."))&&-1!==this.childrenIds.indexOf(s=o.substring(0,n)))"width"===o.substring(n+1)?e.push({view1:i,attr1:"height",relation:"leq",view2:"parent"===s?null:s,attr2:"width",constant:0,multiplier:1,priority:r}):"height"===o.substring(n+1)&&e.push({view1:i,attr1:"height",relation:"leq",view2:"parent"===s?null:s,attr2:"height",constant:0,multiplier:1,priority:r});else{let t=parseNumberAndUnitsNoValidation(o,!0);if(!t.number)throw"Bad value specified for the max-height units on view.id="+i+", value="+o;if("px"===t.units)e.push({view1:i,attr1:"height",relation:"leq",view2:null,attr2:AutoLayout.Attribute.NOTANATTRIBUTE,constant:parseFloat(t.number),multiplier:1,priority:r});else if("%"===t.units)e.push({view1:i,attr1:"height",relation:"leq",view2:null,attr2:"height",constant:0,multiplier:parseFloat(t.number)/100,priority:r});else{if("em"!==t.units)throw"Invalid values specified for the max-height units on view.id="+i;e.push({view1:i,attr1:"height",relation:"leq",view2:null,attr2:"height",constant:0,multiplier:parseFloat(t.number),priority:r})}}}if(s){let t=this.getValueAndPriority(s);s=t.id;let r=t.priority,n=-1,a="";if(isNumber(s))e.push({view1:i,attr1:"height",relation:"geq",view2:null,attr2:AutoLayout.Attribute.NOTANATTRIBUTE,constant:parseFloat(s),multiplier:1,priority:r});else if("parent"===s||-1!==this.childrenIds.indexOf(o))e.push({view1:i,attr1:"height",relation:"geq",view2:"parent"===s?null:s,attr2:"height",constant:0,multiplier:1,priority:r});else if(-1!==(n=s.indexOf("."))&&-1!==this.childrenIds.indexOf(a=s.substring(0,n)))"width"===s.substring(n+1)?e.push({view1:i,attr1:"height",relation:"geq",view2:"parent"===a?null:a,attr2:"width",constant:0,multiplier:1,priority:r}):"height"===s.substring(n+1)&&e.push({view1:i,attr1:"height",relation:"geq",view2:"parent"===a?null:a,attr2:"height",constant:0,multiplier:1,priority:r});else{let t=parseNumberAndUnitsNoValidation(s,!0);if(!t.number)throw"Bad value specified for the min-height units on view.id="+i+", value="+s;if("px"===t.units)e.push({view1:i,attr1:"height",relation:"geq",view2:null,attr2:AutoLayout.Attribute.NOTANATTRIBUTE,constant:parseFloat(t.number),multiplier:1,priority:r});else if("%"===t.units)e.push({view1:i,attr1:"height",relation:"geq",view2:null,attr2:"height",constant:0,multiplier:parseFloat(t.number)/100,priority:r});else{if("em"!==t.units)throw"Invalid values specified for the min-height units on view.id="+i;e.push({view1:i,attr1:"height",relation:"geq",view2:null,attr2:"height",constant:0,multiplier:parseFloat(t.number),priority:r})}}}},View.prototype.setWidthConstraints=function(t,e,i,r,n){let o,s,a=r.indexOf("*"),l=r.indexOf("+"),u=r.indexOf("-"),h=r.indexOf(".");if(isNumber(r)){if(0===(r="string"==typeof r?parseFloat(r):r)){let r=t.viewMap.get(i);if(-1!==r.dimRatio)return void e.push({view1:i,attr1:"width",relation:"equ",view2:i,attr2:AutoLayout.Attribute.HEIGHT,constant:0,multiplier:r.dimRatio,priority:n})}e.push({view1:i,attr1:"width",relation:"equ",view2:null,attr2:AutoLayout.Attribute.NOTANATTRIBUTE,constant:r,multiplier:1,priority:n})}else if((o=parseNumberAndUnitsNoValidation(r,!0)).number){let s=parseFloat(o.number);if(0===s){let r=t.viewMap.get(i);if(-1!==r.dimRatio)return void e.push({view1:i,attr1:"width",relation:"equ",view2:i,attr2:AutoLayout.Attribute.HEIGHT,constant:0,multiplier:r.dimRatio,priority:n})}switch(o.units){case CssSizeUnits.PX:e.push({view1:i,attr1:"width",relation:"equ",view2:null,attr2:AutoLayout.Attribute.NOTANATTRIBUTE,constant:s,multiplier:1,priority:n});break;case CssSizeUnits.PCT:e.push({view1:i,attr1:"width",relation:"equ",view2:null,attr2:"width",constant:0,multiplier:s/100,priority:n});break;default:throw"width value is bad on id: "+i+", bad value is: "+r}}else if("height"===r)e.push({view1:i,attr1:"width",relation:"equ",view2:i,attr2:"height",constant:0,multiplier:1,priority:n});else if("parent"===r||-1!==this.childrenIds.indexOf(r))e.push({view1:i,attr1:"width",relation:"equ",view2:"parent"===r?null:r,attr2:"width",constant:0,multiplier:1,priority:n});else{if(-1!==a&&-1!==l||-1!==l&&-1!==u||-1!==a&&-1!==u)throw"width can only compare using one of `*` or `+` or `-`";if(-1!==a||-1!==l||-1!==u){let t=quickScan(r,!0);if(3!==t.length&&5!==t.length)throw"invalid expression for width found on view.id="+i+", expression: "+r;let o=t.indexOf("*"),a=t.indexOf("+"),l=t.indexOf("-");if(-1!==o){let o,a;if(isNumber(a=t[0])){if(o="height"===t[2]?i:t[2],"width"===o)throw"the width is not yet initialized";if(3===t.length)s="height"!==t[2];else{if(5!==t.length)throw"error in value specified for width on view.id="+i+"... expression "+r;s="width"===t[4]}}else if(isNumber(a=t[t.length-1])){if(o="height"===t[0]?i:t[0],"width"===o)throw"the width is not yet initialized";if(3===t.length)s="height"!==t[0];else{if(5!==t.length)throw"error in value specified for width on view.id="+i+"... expression "+r;s="width"===t[2]}}e.push({view1:i,attr1:"width",relation:"equ",view2:"parent"===o?null:o,attr2:s?"width":"height",constant:0,multiplier:parseFloat(a),priority:n})}else if(-1!==a){let o,a;if(isNumber(a=t[0])){if(o="height"===t[2]?i:t[2],"width"===o)throw"the width is not yet initialized";if(3===t.length)s="height"!==t[2];else{if(5!==t.length)throw"error in value specified for width on view.id="+cid+"... expression "+r;s="width"===t[4]}}else if(isNumber(a=t[t.length-1])){if(o="height"===t[0]?i:t[0],"width"===o)throw"the width is not yet initialized";if(3===t.length)s="height"!==t[0];else{if(5!==t.length)throw"error in value specified for width on view.id="+i+"... expression "+r;s="width"===t[2]}}e.push({view1:i,attr1:"width",relation:"equ",view2:"parent"===o?null:o,attr2:s?"width":"height",constant:parseFloat(a),multiplier:1,priority:n})}else if(-1!==l){let o,a;if(isNumber(a=t[0]))throw"`value-elem[.width|height]` is not allowed, but `elem[.width|height]-value is allowed on ` view.id="+cid+"... expression "+r;if(isNumber(a=t[t.length-1])){if(o="height"===t[0]?i:t[0],"width"===o)throw"the width is not yet initialized";if(3===t.length)s="height"!==t[0];else{if(5!==t.length)throw"error in value specified for width on view.id="+i+"... expression "+r;s="width"===t[2]}}e.push({view1:i,attr1:"width",relation:"equ",view2:"parent"===o?null:o,attr2:s?"width":"height",constant:-1*parseFloat(a),multiplier:1,priority:n})}}else{if(-1!==a||-1!==l||-1!==u||-1===h)throw"invalid value for width on id: "+i+", bad value is: "+r;{let t,o=r.substring(0,h),a=r.substring(h+1);if("width"===a)s=!0;else{if("height"!==a)throw"Strange expression found for width on id: "+i+", expression is: "+r;s=!1}if("parent"===o||"parent"===a)t=null;else{if(-1===this.childrenIds.indexOf(o))throw"Bad expression found for width on id: "+i+", expression is: "+r;t=o}e.push({view1:i,attr1:"width",relation:"equ",view2:t,attr2:s?"width":"height",constant:0,multiplier:1,priority:n})}}}},View.prototype.setHeightConstraints=function(t,e,i,r,n){let o,s,a=r.indexOf("*"),l=r.indexOf("+"),u=r.indexOf("-"),h=r.indexOf(".");if(isNumber(r)){if(0===(r="string"==typeof r?parseFloat(r):r)){let r=t.viewMap.get(i);if(-1!==r.dimRatio)return void e.push({view1:i,attr1:AutoLayout.Attribute.HEIGHT,relation:"equ",view2:i,attr2:AutoLayout.Attribute.WIDTH,constant:0,multiplier:1/r.dimRatio,priority:n})}e.push({view1:i,attr1:"height",relation:"equ",view2:null,attr2:AutoLayout.Attribute.NOTANATTRIBUTE,constant:r,multiplier:1,priority:n})}else if((o=parseNumberAndUnitsNoValidation(r,!0)).number){let s=parseFloat(o.number);if(0===s){let r=t.viewMap.get(i);if(-1!==r.dimRatio)return void e.push({view1:i,attr1:AutoLayout.Attribute.HEIGHT,relation:"equ",view2:i,attr2:AutoLayout.Attribute.WIDTH,constant:0,multiplier:1/r.dimRatio,priority:n})}switch(o.units){case CssSizeUnits.PX:e.push({view1:i,attr1:"height",relation:"equ",view2:null,attr2:AutoLayout.Attribute.NOTANATTRIBUTE,constant:s,multiplier:1,priority:n});break;case CssSizeUnits.PCT:e.push({view1:i,attr1:"height",relation:"equ",view2:null,attr2:"height",constant:0,multiplier:s/100,priority:n});break;default:throw"height value is bad on id: "+i+", bad value is: "+r}}else if("width"===r)e.push({view1:i,attr1:"height",relation:"equ",view2:i,attr2:"width",constant:0,multiplier:1,priority:n});else if("parent"===r||-1!==this.childrenIds.indexOf(r))e.push({view1:i,attr1:"height",relation:"equ",view2:"parent"===r?null:r,attr2:"height",constant:0,multiplier:1,priority:n});else{if(-1!==a&&-1!==l||-1!==l&&-1!==u||-1!==a&&-1!==u)throw"width can only compare using one of `*` or `+` or `-`";if(-1!==a||-1!==l||-1!==u){let t=quickScan(r,!0);if(3!==t.length&&5!==t.length)throw"invalid expression for height found on view.id="+i+",... "+t;let o=t.indexOf("*"),a=t.indexOf("+"),l=t.indexOf("-");if(-1!==o){let o,a;if(isNumber(a=t[0])){if(o="width"===t[2]?i:t[2],"height"===o)throw"the height is not yet initialized";if(3===t.length)s="width"!==t[2];else{if(5!==t.length)throw"error in value specified for height on view.id="+i+"... expression "+r;s="height"===t[4]}}else if(isNumber(a=t[t.length-1])){if(o="width"===t[0]?i:t[0],"height"===o)throw"the height is not yet initialized";if(3===t.length)s="width"!==t[0];else{if(5!==t.length)throw"error in value specified for height on view.id="+i+"... expression "+r;s="height"===t[2]}}e.push({view1:i,attr1:"height",relation:"equ",view2:"parent"===o?null:o,attr2:s?"height":"width",constant:0,multiplier:parseFloat(a),priority:n})}else if(-1!==a){let o,a;if(isNumber(a=t[0])){if(o="width"===t[2]?i:t[2],"height"===o)throw"the height is not yet initialized";if(3===t.length)s="width"!==t[2];else{if(5!==t.length)throw"error in value specified for height on view.id="+i+"... expression "+r;s="height"===t[4]}}else if(isNumber(a=t[t.length-1])){if(o="width"===t[0]?i:t[0],"height"===o)throw"the height is not yet initialized";if(3===t.length)s="width"!==t[0];else{if(5!==t.length)throw"error in value specified for height on view.id="+i+"... expression "+r;s="height"===t[2]}}e.push({view1:i,attr1:"height",relation:"equ",view2:"parent"===o?null:o,attr2:s?"height":"width",constant:parseFloat(a),multiplier:1,priority:n})}else if(-1!==l){let o,a;if(isNumber(a=t[0]))throw"`value-elem[.width|height]` is not allowed, but `elem[.width|height]-value is allowed on ` view.id="+cid+"... expression "+w;if(isNumber(a=t[t.length-1])){if(o="width"===t[0]?i:t[0],"height"===o)throw"the height is not yet initialized";if(3===t.length)s="width"!==t[0];else{if(5!==t.length)throw"error in value specified for height on view.id="+i+"... expression "+r;s="height"===t[2]}}e.push({view1:i,attr1:"height",relation:"equ",view2:"parent"===o?null:o,attr2:s?"height":"width",constant:-1*parseFloat(a),multiplier:1,priority:n})}}else{if(-1!==a||-1!==l||-1===h)throw"invalid value for height on id: "+i+", bad value is: "+r;{let t,o=r.substring(0,h),a=r.substring(h+1);if("height"===a)s=!0;else{if("width"!==a)throw"Strange expression found for height on id: "+i+", expression is: "+r;s=!1}if("parent"===o||"parent"===a)t=null;else{if(-1===this.childrenIds.indexOf(o))throw"Bad expression found for height on id: "+i+", expression is: "+r;t=o}e.push({view1:i,attr1:"height",relation:"equ",view2:t,attr2:s?"height":"width",constant:0,multiplier:1,priority:n})}}}},View.prototype.toHTML=function(){let t=null;const e=this.htmlNode.nodeName.toLowerCase();if(isHTMLTagName(e))return t="li"===e?document.createElement("ul"):"tbody"===e||"thead"===e||"tfoot"===e||"tr"===e?document.createElement("table"):"td"===e||"th"===e?document.createElement("tr"):"option"===e?document.createElement("select"):document.createElement("div"),t.appendChild(this.htmlNode),t.innerHTML;throw"Invalid HTML element!"},View.prototype.calculateWrapContentSizes=function(t){let e=this.refIds.get(attrKeys.layout_width),i=this.refIds.get(attrKeys.layout_height);if(e===sizes.WRAP_CONTENT&&i===sizes.WRAP_CONTENT){let e=t.getBoundingClientRect();this.wrapWidth=.813*e.width+"px",this.wrapHeight=.825*e.height+"px",alert(this.wrapWidth+" , "+this.wrapHeight)}else if(e!==sizes.WRAP_CONTENT&&i===sizes.WRAP_CONTENT){t.style.width=e;let i=t.getBoundingClientRect();this.wrapHeight=.825*i.height+"px"}else if(e===sizes.WRAP_CONTENT&&i!==sizes.WRAP_CONTENT){t.style.height=i;let e=t.getBoundingClientRect();this.wrapWidth=.813*e.width+"px"}},Guideline.prototype=Object.create(View.prototype),Guideline.prototype.constructor=Guideline,IncludedView.prototype=Object.create(View.prototype),IncludedView.prototype.constructor=IncludedView,Guideline.prototype.calculateWrapContentSizes=function(t){const e=this.refIds.get(attrKeys.orientation);if(null==e||""===e)throw"Please specify the orientation of the Guideline whose id is `"+this.id+"`";e===orientations.VERTICAL?(this.wrapWidth="1",this.wrapHeight=sizes.MATCH_PARENT):(this.wrapWidth=sizes.MATCH_PARENT,this.wrapHeight="1")},Guideline.prototype.layoutGuide=function(t){const e=this.refIds.get(attrKeys.orientation);if(!e||""===e)throw"Please specify the orientation of the Guideline whose id is `"+this.id+"`";let i=this.id,r=this.refIds.get(attrKeys.layout_constraintGuide_percent),n=this.refIds.get(attrKeys.layout_constraintGuide_begin),o=this.refIds.get(attrKeys.layout_constraintGuide_end);if(isEmpty(r)&&isEmpty(n)&&isEmpty(o))throw"Please specify either constraint-guide-(percentage|begin|end) for the Guideline whose id is `"+this.id+"`";let s=0;if(!isEmpty(r)){if(!isEmpty(n)||!isEmpty(o))throw"Conflicting guide constraints! only one of guide_percent, guide_begin and guide_end hould be set!";if(endsWith(r,"%")){if(isNaN(s=parseFloat(r)))throw"Please specify a floating point number between 0 and 1 to signify 0 - 100% of width";s=s>1?s/100:s}else{if(isNaN(s=parseFloat(r)))throw"Please specify a floating point number between 0 and 1 to signify 0 - 100% of width";if(s>1)throw"The guide percentage may not be greater than 1";if(s<0)throw"The guide percentage may not be less than 0"}if(e===orientations.VERTICAL){t.push({view1:i,attr1:"height",relation:"equ",view2:null,attr2:"height",constant:0,multiplier:1,priority:AutoLayout.Priority.REQUIRED}),t.push({view1:i,attr1:"width",relation:"equ",view2:null,attr2:AutoLayout.Attribute.NOTANATTRIBUTE,constant:.1,multiplier:1,priority:AutoLayout.Priority.REQUIRED});let e=i+"_dummy_"+ULID.ulid();t.push({view1:e,attr1:"left",relation:"equ",view2:null,attr2:"left",constant:0,multiplier:1,priority:AutoLayout.Priority.REQUIRED}),t.push({view1:e,attr1:"width",relation:"equ",view2:null,attr2:"width",constant:1,multiplier:s,priority:AutoLayout.Priority.REQUIRED}),t.push({view1:i,attr1:"left",relation:"equ",view2:e,attr2:"right",constant:1,multiplier:1,priority:AutoLayout.Priority.REQUIRED})}else if(e===orientations.HORIZONTAL){t.push({view1:i,attr1:"width",relation:"equ",view2:null,attr2:"width",constant:0,multiplier:1,priority:AutoLayout.Priority.REQUIRED}),t.push({view1:i,attr1:"height",relation:"equ",view2:null,attr2:AutoLayout.Attribute.NOTANATTRIBUTE,constant:.1,multiplier:1,priority:AutoLayout.Priority.REQUIRED});let e=i+"_dummy_"+ULID.ulid();t.push({view1:e,attr1:"top",relation:"equ",view2:null,attr2:"top",constant:0,multiplier:1,priority:AutoLayout.Priority.REQUIRED}),t.push({view1:e,attr1:"height",relation:"equ",view2:null,attr2:"height",constant:1,multiplier:s,priority:AutoLayout.Priority.REQUIRED}),t.push({view1:i,attr1:"top",relation:"equ",view2:e,attr2:"bottom",constant:0,multiplier:1,priority:AutoLayout.Priority.REQUIRED})}}if(!isEmpty(n)){if(!isEmpty(r)||!isEmpty(o))throw"Conflicting guide constraints! only one of `guide_percent`, `guide_begin` and `guide_end` should be set!";if(!(isNumber(n)||endsWith(n,"px")&&isNumber(parseInt(n))))throw"`guide_begin` must be a unitless number or be specified in pixels";if(n=parseFloat(n),isNaN(n))throw"please specify a number for `guide_begin`";s=n,e===orientations.VERTICAL?(t.push({view1:i,attr1:"height",relation:"equ",view2:null,attr2:"height",constant:0,multiplier:1,priority:1e3}),t.push({view1:i,attr1:"width",relation:"equ",view2:null,attr2:AutoLayout.Attribute.NOTANATTRIBUTE,constant:.1,multiplier:1,priority:1e3}),t.push({view1:i,attr1:"left",relation:"equ",view2:null,attr2:"left",constant:s,multiplier:1,priority:1e3})):e===orientations.HORIZONTAL&&(t.push({view1:i,attr1:"width",relation:"equ",view2:null,attr2:"width",constant:0,multiplier:1,priority:1e3}),t.push({view1:i,attr1:"height",relation:"equ",view2:null,attr2:AutoLayout.Attribute.NOTANATTRIBUTE,constant:.1,multiplier:1,priority:1e3}),t.push({view1:i,attr1:"top",relation:"equ",view2:null,attr2:"top",constant:s,multiplier:1,priority:1e3}))}if(!isEmpty(o)){if(!isEmpty(r)||!isEmpty(n))throw"Conflicting guide constraints! only one of `guide_percent`, `guide_begin` and `guide_end` should be set!";if(!(isNumber(o)||endsWith(o,"px")&&isNumber(parseInt(o))))throw"`guide_end` must be a unitless number or be specified in pixels";if(o=parseFloat(o),isNaN(o))throw"please specify a number for `guide_end`";s=o,e===orientations.VERTICAL?(t.push({view1:i,attr1:"height",relation:"equ",view2:null,attr2:"height",constant:0,multiplier:1,priority:1e3}),t.push({view1:i,attr1:"width",relation:"equ",view2:null,attr2:AutoLayout.Attribute.NOTANATTRIBUTE,constant:.1,multiplier:1,priority:1e3}),t.push({view1:i,attr1:"right",relation:"equ",view2:null,attr2:"right",constant:-s,multiplier:1,priority:1e3})):e===orientations.HORIZONTAL&&(t.push({view1:i,attr1:"width",relation:"equ",view2:null,attr2:"width",constant:0,multiplier:1,priority:1e3}),t.push({view1:i,attr1:"height",relation:"equ",view2:null,attr2:AutoLayout.Attribute.NOTANATTRIBUTE,constant:.1,multiplier:1,priority:1e3}),t.push({view1:i,attr1:"bottom",relation:"equ",view2:null,attr2:"bottom",constant:-s,multiplier:1,priority:1e3}))}},IncludedView.prototype.calculateWrapContentSizes=function(t){this.wrapWidth=300,this.wrapHeight=320},Scanner.prototype.scan=function(){const t=this.input,e=this.tokens,i=[];let r=0,n=0;for(;r<t.length;){let o=null;for(let s of e){const e=s.length;if(e>0&&r+e<=t.length&&t.substring(r,r+e)===s){o=s,r>n&&i.push(t.substring(n,r)),this.includeTokensInOutput&&i.push(o),r+=e,n=r;break}}null===o&&r++}return n<t.length&&i.push(t.substring(n,t.length)),i},StringBuffer.prototype.append=function(t){return this.dataArray.push(t),this},StringBuffer.prototype.toString=function(){return this.dataArray.join("")},StringBuffer.prototype.length=function(){return this.dataArray.length},StringBuffer.prototype.reset=function(){return this.dataArray.length=0,this};let cloneText=function(t){if(t&&"string"==typeof t)return(" "+t).slice(1);throw new Error("Invalid text supplied.")};function startsWith(t,e){if("string"==typeof t&&"string"==typeof e){const i=t.length,r=e.length;return i===r?t===e:!(i<r)&&0===t.indexOf(e,0)}return!1}function endsWith(t,e){if("string"==typeof t&&"string"==typeof e){const i=t.length,r=e.length;return i===r?t===e:!(i<r)&&t.lastIndexOf(e)===i-r}return!1}function contain(t,e){if("string"==typeof t&&"string"==typeof e){let i=t.length,r=e.length;return i===r?t===e:!(i<r)&&-1!==t.indexOf(e,0)}return!1}function endsWithAnyOf(t,e){for(var i=e.length,r=0;r<i;r++)if(endsWith(t,e[r]))return!0;return!1}function indexOfEnder(t,e){for(var i=e.length,r=0;r<i;r++)if(endsWith(t,e[r]))return r;return-1}function startsWithAnyOf(t,e){for(var i=e.length,r=0;r<i;r++)if(startsWith(t,e[r]))return!0;return!1}function indexOfStarter(t,e){for(var i=e.length,r=0;r<i;r++)if(startsWith(t,e[r]))return r;return-1}function containsAnyOf(t,e){const i=e.length;for(let r=0;r<i;r++)if(contain(t,e[r]))return!0;return!1}function reverse(t){for(var e="",i=t.length-1;i>=0;i--)e+=t.charAt(i);return e}function isWhiteSpacesOnly(t){return null===t||(!t||!/\S/.test(t))}function isEmpty(t){return!t||!/\S/.test(t)}let isNumber=function(t){return null!==t&&""!==t&&!1===isNaN(t)};function isOneDimArray(t){return"[object Array]"===Object.prototype.toString.call(t)}function addClass(t,e){t&&e&&t.classList.add(e)}function removeClass(t,e){t&&e&&t.classList.remove(e)}function isDomEntity(t){return"object"==typeof t&&void 0!==t.nodeType}const attrKeys={id:"id",layout:"layout",layout_width:"w",layout_height:"h",layout_maxWidth:"maxW",layout_maxHeight:"maxH",layout_minWidth:"minW",layout_minHeight:"minH",layout_margin:"m",layout_marginStart:"ms",layout_marginEnd:"me",layout_marginTop:"mt",layout_marginBottom:"mb",layout_marginHorizontal:"mh",layout_marginVertical:"mv",layout_constraintTop_toTopOf:"tt",layout_constraintBottom_toBottomOf:"bb",layout_constraintStart_toStartOf:"ss",layout_constraintEnd_toEndOf:"ee",layout_constraintTop_toBottomOf:"tb",layout_constraintStart_toEndOf:"se",layout_constraintEnd_toStartOf:"es",layout_constraintBottom_toTopOf:"bt",layout_constraintCenterXAlign:"cx",layout_constraintCenterYAlign:"cy",layout_constraintStart_toCenterX:"scx",layout_constraintCenterX_toStart:"cxs",layout_constraintEnd_toCenterX:"ecx",layout_constraintCenterX_toEnd:"cxe",layout_constraintTop_toCenterY:"tcy",layout_constraintCenterY_toTop:"cyt",layout_constraintBottom_toCenterY:"bcy",layout_constraintCenterY_toBottom:"cyb",layout_constraint:"data-const",layout_constraintGuide:"data-guide",layout_constraintGuideColor:"data-guide-color",layout_popup:"popup",layout_menuLeft:"menu-left",layout_menuRight:"menu-right",layout_src:"src",layout_constraintGuide_percent:"guide-pct",layout_constraintGuide_begin:"guide-begin",layout_constraintGuide_end:"guide-end",layout_horizontalBias:"hor-bias",layout_verticalBias:"ver-bias",dimension_ratio:"dim-ratio",orientation:"orient"},sizes={MATCH_PARENT:"match_parent",WRAP_CONTENT:"wrap_content"},orientations={VERTICAL:"vertical",HORIZONTAL:"horizontal",GRID:"grid"},CssSizeUnits={VMAX:"vmax",VMIN:"vmin",REM:"rem",EM:"em",PT:"pt",PX:"px",CM:"cm",IN:"in",MM:"mm",VM:"vm",VH:"vh",VW:"vw",PC:"pc",EX:"ex",CH:"ch",GD:"gd",PCT:"%",Q:"q"},CssSizeUnitsValues=getObjectValues(CssSizeUnits).sort(function(t,e){return e.length-t.length});function getObjectValues(t){var e=[];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.push(t[i]);return e}function StyleElement(t,e){if("string"!=typeof t||"string"!=typeof e)throw new Error("attr or value must be string...`attr` = "+t+", `value` = "+e);this.attr=t.trim(),this.value=e.trim()}function Style(t,e){if(e||(e=[]),!isOneDimArray(e))throw new Error("One dimensional array of style elements expected");this.name=t.trim(),this.styleElements=e}function injectStyleSheets(t,e){if("[object Array]"!==Object.prototype.toString.call(e))throw new Error("Please supply an array of styles");{let i=new StringBuffer("");i.append(t.innerHTML);for(let t=0;t<e.length;t++){let r=e[t];if("Style"!==r.constructor.name)throw new Error("Please put only styles in the supplied array");if(void 0===r.name||null===r.name||""===r.name)throw"Please define the name of this style!... e.g #name or .name";i.append(r.styleSheetEntry(r.name)),i.append("\n")}t.innerHTML=i.toString(),document.getElementsByTagName("head")[0].appendChild(t)}}function indexOfSelector(t,e){let i=new Scanner(t.innerHTML,!0,["{","}"]).scan();for(let t=0;t<i.length;t++)if("{"===i[t]&&t-1>=0&&e.trim()===i[t-1].trim())return t-1;return-1}function sheetContainsSelector(t,e){return-1!==indexOfSelector(t.innerHTML,e)}function getAllStyles(t){let e=new Scanner(t.innerHTML,!0,["{","}",";"]).scan();for(let t=0;t<e.length;t++)";"===e[t]&&t+1<e.length&&!1===startsWith(e[t+1],"\n")&&(e[t-1]=e[t-1]+e[t]+e[t+1],e.splice(t,1),e.splice(t,1));let i=[];for(let t=0;t<e.length;t++){if("{"===e[t]&&t-1>=0){let r=new Style(e[t-1].trim(),[]);i.push(r)}if(";"===e[t]){i[i.length-1].addStyleElementCss(e[t-1]+";")}}return i}function getStyle(t,e){if(!e)throw new Error("No selector supplied!");e=e.trim();let i,r=new Scanner(t.innerHTML,!0,[e,"{","}",";"]).scan(),n=!1;for(let t=0;t<r.length;t++){if(r[t].trim()===e&&t+1<r.length){let o=t+1;for(;"{"!==r[o]&&o<r.length;){if(""!==r[o].trim())throw new Error("Invalid token found in browser style sheet! File a bug report with browser manufacturer!! Description:\n                  No token like: ``"+r[o]+"`` should exist between ``"+e+"`` and a ``{``");o++}i=new Style(e,[]),n=!0,t=o}if(!0===n)if(";"===r[t])i.addStyleElementCss(r[t-1]+";");else if("}"===r[t])return i}return null}function editSelectorInStyleSheet(t,e){if("Style"===e.constructor.name){let i=e.name,r=getAllStyles(t),n=!1;for(let t=0;t<r.length;t++){let o=r[t];if(o.name.trim()===i){n=!0;for(let t=0;t<e.styleElements.length;t++){let i=e.styleElements[t];o.addStyleElement(i.attr,i.value,!1)}break}}return n||r.push(e),t.innerHTML="",injectStyleSheets(t,r),!0}throw new Error("Invalid style object supplied")}function updateOrCreateSelectorInStyleSheet(t,e){if("Style"===e.constructor.name){let i=e.name,r=getAllStyles(t),n=!1;for(let t=0;t<r.length;t++){let o=r[t];o.name.trim()===i&&(n=!0,o.styleElements=e.styleElements)}return n||r.push(e),t.innerHTML="",injectStyleSheets(t,r),!0}throw new Error("Invalid style object supplied")}function updateOrCreateSelectorsInStyleSheet(t,e){if(!isOneDimArray(e))throw new Error("A one dimensional array expected for `newStyles`");let i=getAllStyles(t);for(let t=0;t<e.length;t++){let r=e[t];if("Style"!==r.constructor.name)throw new Error("Invalid style object supplied");{let t=r.name,e=!1;for(let n=0;n<i.length;n++){let o=i[n];o.name.trim()===t&&(e=!0,o.styleElements=r.styleElements)}e||i.push(r)}}t.innerHTML="",injectStyleSheets(t,i)}function getScrollBarWidth(){var t=document.createElement("div");t.style.visibility="hidden",t.style.overflow="scroll",t.style.msOverflowStyle="scrollbar",document.body.appendChild(t);var e=document.createElement("div");t.appendChild(e);var i=t.offsetWidth-e.offsetWidth;return t.parentNode.removeChild(t),i}function parseNumberAndUnitsNoValidation(t,e){if("number"==typeof t&&(t+=""),"string"!=typeof t)return{number:null,units:null};if(isNumber(t))return e&&!0===e?{number:t,units:"px"}:{number:null,units:null};let i="",r=t.length-1;for(;r>=0;r--){let e=t.substring(r,r+1);if("0"===e||"1"===e||"2"===e||"3"===e||"4"===e||"5"===e||"6"===e||"7"===e||"8"===e||"9"===e){i=t.substring(0,r+1);break}}let n=t.substring(r+1);return-1===CssSizeUnitsValues.indexOf(n)?{number:null,units:null}:isNumber(i)?{number:i,units:n}:{number:null,units:null}}function parseNumberAndUnits(t,e){if("string"!=typeof t)throw new Error("parses only string input");if(e&&!0===e&&isNumber(t)&&(t+="px"),isNumber(t)){if(e&&!0===e)return{number:t,units:"px"};throw"No units specified for number: "+t}let i="",r=t.length-1;for(;r>=0;r--){let e=t.substring(r,r+1);if("0"===e||"1"===e||"2"===e||"3"===e||"4"===e||"5"===e||"6"===e||"7"===e||"8"===e||"9"===e){i=t.substring(0,r+1);break}}let n=t.substring(r+1);if(-1===CssSizeUnitsValues.indexOf(n))throw new Error("This unit is not a valid css unit.. Use one of:\n "+CssSizeUnitsValues);if(!isNumber(i))throw new Error("The number is not a valid number!..."+i);return{number:i,units:n}}function getScriptFileName(){let t=null;if(document.currentScript&&document.currentScript.src)t=document.currentScript.src;else{const e=document.getElementsByTagName("script"),i=e[e.length-1];i&&i.src&&(t=i.src)}if(t){const e=new URL(t,document.location.origin).pathname;return e.substring(e.lastIndexOf("/")+1)}return null}function getUrls(){let t=document.getElementsByTagName("script");for(let e=0;e<t.length;e++){let i=t[e].src,r=getScriptFileName(),n=i.length,o=r.length;if(i.lastIndexOf(r)===n-o){scriptURL=i.substring(0,n-o),projectURL=window.location.href;let t=0;for(;projectURL.charAt(t)===scriptURL.charAt(t);)t+=1;return projectURL=projectURL.substring(0,t),[projectURL,scriptURL]}}return null}StyleElement.prototype.setAttr=function(t){this.attr=t},StyleElement.prototype.getAttr=function(){return this.attr},StyleElement.prototype.setValue=function(t){this.value=t},StyleElement.prototype.getValue=function(){return this.value},StyleElement.prototype.getCss=function(){return this.attr+":"+this.value+";"},Style.prototype.setName=function(t){this.name=t},Style.prototype.getName=function(){return this.name},Style.prototype.setStyleElements=function(t){this.styleElements=t},Style.prototype.getStyleElements=function(){return this.styleElements},Style.prototype.isEmpty=function(){return 0===this.styleElements.length},Style.prototype.styleSheetEntry=function(t){this.name=t;let e=new StringBuffer;if(0===this.styleElements.length)return"";e.append(t).append(" { \n");for(let t=0;t<this.styleElements.length;t++){let i=this.styleElements[t];e.append(i.getCss()).append("\n")}return e.append("} \n"),e.toString()},Style.prototype.injectStyleSheet=function(){if(void 0===this.name||null===this.name||""===this.name)throw"Please define the name of this style!... e.g #name or .name";let t=document.createElement("style");this.styleElements.length>0&&(t.setAttribute("type","text/css"),t.innerHTML=this.styleSheetEntry(this.name),document.getElementsByTagName("head")[0].appendChild(t))},Style.prototype.toOptions=function(){let t={};for(let e=0;e<this.styleElements.length;e++){let i=getObjectValues(this.styleElements[e]);t[i[0]]=i[1]}return t},Style.prototype.addFromOptions=function(t){for(let e in t)this.addStyleElement(e,t[e])},Style.prototype.getCss=function(){let t=new StringBuffer;if(0===this.styleElements.length)return"";t.append(" style = '");for(let e=0;e<this.styleElements.length;e++){let i=this.styleElements[e];t.append(i.getCss())}return t.append("' "),t.toString()},Style.prototype.rawCss=function(){let t=new StringBuffer;if(0===this.styleElements.length)return"";t.append(" ");for(let e=0;e<this.styleElements.length;e++){let i=this.styleElements[e];t.append(i.getCss())}return t.append(" "),t.toString()},Style.prototype.applyInline=function(t){if(!t)throw new Error("Please specify an html element.");if(!isDomEntity(t))throw new Error("Invalid html element: "+t);for(let e=0;e<this.styleElements.length;e++){let i=this.styleElements[e];t.style[i.attr]=i.value}},Style.prototype.removeStyleElementObj=function(t){if(StyleElement.prototype.isPrototypeOf(t)){let e=t.getAttr();for(let t=0;t<this.styleElements.length;t++){if(this.styleElements[t].getAttr()===e)return void this.styleElements.splice(t,1)}}},Style.prototype.removeStyleElementByAttr=function(t){for(let e=0;e<this.styleElements.length;e++){if(this.styleElements[e].getAttr()===t)return void this.styleElements.splice(e,1)}},Style.prototype.addStyleElement=function(t,e,i){if(i)this.styleElements.push(new StyleElement(t,e));else{for(let i=0;i<this.styleElements.length;i++){if(this.styleElements[i].getAttr()===t)return void(this.styleElements[i]=new StyleElement(t,e))}this.styleElements.push(new StyleElement(t,e))}},Style.prototype.addStyleElementsArray=function(t,e){for(let i=0;i<t.length;i++){let r=t[i];this.addStyleElementObj(r,e)}},Style.prototype.addStyleElementObj=function(t,e){if(!StyleElement.prototype.isPrototypeOf(t))throw new Error("Invalid Style specified.");if(e)this.styleElements.push(t);else{let e=t.getAttr();for(let i=0;i<this.styleElements.length;i++){if(this.styleElements[i].getAttr()===e)return void(this.styleElements[i]=t)}this.styleElements.push(t)}},Style.prototype.clone=function(t){let e=[];for(let t=0;t<this.styleElements.length;t++){let i=this.styleElements[t];e.push(new StyleElement(i.attr,i.value))}return t||(t=this.name),new Style(t,e)},Style.prototype.addStyleElementCss=function(t,e){if(!t)throw new Error("No css line supplied!");{let i=!0===contain(t=t.trim(),"url"),r=t.indexOf(":"),n=i?t.lastIndexOf(";"):t.indexOf(";");if(-1===n||n!==t.length-1||-1===r)throw new Error("Invalid css line expression!..."+t);{let i=t.substring(0,r),o=t.substring(r+1,n);if(-1!==i.indexOf(":")||-1!==i.indexOf(";")||(-1!==o.indexOf("url")||-1!==o.indexOf(":")||-1!==o.indexOf(";"))&&"-1"===o.indexOf("url"))throw new Error("Weird css line expression____!"+t);{let t=new StyleElement(i,o);if(e)this.styleElements.push(t);else{for(let e=0;e<this.styleElements.length;e++){if(this.styleElements[e].getAttr()===i)return void(this.styleElements[e]=t)}this.styleElements.push(t)}}}}},Style.prototype.getValue=function(t){for(let e=0;e<this.styleElements.length;e++){let i=this.styleElements[e];if(i.attr===t)return i.value}return null};const SideMenuTypes={LEFT:"left",RIGHT:"right"};function SideMenuX(t){if(!t)throw new Error("Please supply the options for creating the menu.");if(this.id="","string"!=typeof t.id)throw new Error("Please supply the id of the menu");if(this.id=t.id,this.width=-1,this.parsedWidth=-1,"number"==typeof t.width)this.width=t.width+"px";else{if("string"!=typeof t.width)throw new Error('Please supply the width of the menu.. e.g. `width:"300px"` or `width:"30%"`');if(!isNumber(parseInt(t.width)))throw"invalid value specified for width!";this.width=t.width}if(this.menuType=SideMenuTypes.LEFT,t.menuType){if(t.menuType!==SideMenuTypes.LEFT&&t.menuType!==SideMenuTypes.RIGHT)throw new Error("Invalid menu type specified! Use either of `"+SideMenuTypes.PUSH+"` or `"+SideMenuTypes.OVERLAY+"`");this.menuType=t.menuType}if(this.layout="","string"!=typeof t.layout)throw new Error("Please supply the name of the xml layout");this.layout=t.layout,this.background="#fff",t.background&&(this.background=t.background),this.registry={};var e=document.body,i=document.documentElement;Math.max(e.scrollWidth,e.offsetWidth,i.clientWidth,i.scrollWidth,i.offsetWidth);let r=Math.max(e.scrollHeight,e.offsetHeight,i.clientHeight,i.scrollHeight,i.offsetHeight);this.overlayStyle=new Style("."+this.overlayClass(),[]),this.frameStyle=new Style("."+this.containerClass(),[]),this.closeBtnStyle=new Style("."+this.closeBtnClass(),[]),this.noScrollStyle=new Style(".noscroll",[]);let n=2e3;this.overlayStyle.addFromOptions({display:"block",visibility:"visible",opacity:"0.8",position:"fixed","background-color":"black",top:"0",left:"0",bottom:"0",right:"0","z-index":n+""}),this.noScrollStyle.addFromOptions({overflow:"hidden"});{n+=10;let t={width:this.width,height:r+"px",position:"fixed",top:"0",left:"0",padding:"0","z-index":n+"","background-color":this.background,"overflow-x":"hidden","overflow-y":"auto",transition:"0.5s"};t[this.menuType]="0",this.frameStyle.addFromOptions(t)}{let t={top:"12px",position:"fixed","font-size":"8em","font-weight":"bold","font-family":"monospace",cursor:"pointer",color:"white","background-color":"transparent",border:"none",padding:"none"};this.menuType===SideMenuTypes.LEFT?t[SideMenuTypes.RIGHT]="18px":t[SideMenuTypes.LEFT]="18px",this.closeBtnStyle.addFromOptions(t)}this.onOpen=function(){},t.onOpen&&"[object Function]"==={}.toString.call(t.onOpen)?this.onOpen=t.onOpen:this.onOpen=function(){},this.onClose=function(){},t.onClose&&"[object Function]"==={}.toString.call(t.onClose)?this.onClose=t.onClose:this.onClose=function(){},this.registerStyle(this.overlayStyle),this.registerStyle(this.noScrollStyle),this.registerStyle(this.frameStyle),this.registerStyle(this.closeBtnStyle),this.rootView=null}SideMenuX.prototype.registerStyle=function(t){this.registry[t.name]=t},SideMenuX.prototype.hide=function(){var t=document.getElementById(this.overlayId()),e=document.getElementById(this.containerId());return t&&(t.style.display="none"),e&&this.closeMenu(),removeClass(document.body,this.noScrollStyle.name.substring(1)),this.onClose(),this},SideMenuX.prototype.open=function(){return this.build(),this},SideMenuX.prototype.build=function(){var t=this;let e=!1;var i=document.getElementById(this.overlayId()),r=document.getElementById(this.containerId());i||(e=!0,(i=document.createElement("div")).setAttribute("id",this.overlayId()),addClass(i,this.overlayClass()),document.body.appendChild(i)),i.style.display="block",i.onclick=function(){t.hide()},r||((r=document.createElement("div")).setAttribute("id",this.containerId()),addClass(r,this.containerClass()),r.innerHTML=this.layout.trim(),document.body.appendChild(r));let n=document.getElementById(this.closeBtnId());if(n||(n=document.createElement("input"),n.setAttribute("id",this.closeBtnId()),addClass(n,this.closeBtnClass()),n.setAttribute("type","button"),n.value="",i.appendChild(n)),n.onclick=function(){t.hide()},e){let e=document.createElement("style");e.setAttribute("type","text/css");let i=new StringBuffer;for(var o in this.registry)i.append(this.registry[o].styleSheetEntry(o));e.innerHTML=i.toString(),document.getElementsByTagName("head")[0].appendChild(e);let n=new Page(r);n.layout(),page.subPages.set(r.id,n),t.openMenu(),t.rootView=r,t.parsedWidth=parseInt(window.getComputedStyle(r).width)}return this.addDragEvents(i,r),this.openMenu(),this},SideMenuX.prototype.addDragEvents=function(t,e){let i=this,r=!0;e.onmousemove=function(t){},e.onmousedown=function(t){(t=window.event||t).target!==this&&t.target!==i.rootView||(r=!0,e.onmousemove=function(t){(t=window.event||t).target!==this&&t.target!==i.rootView||!0===r&&t.pageX<i.parsedWidth&&(e.style.width=t.pageX+2+"px",e.style.transition="0.5s")},e.onmouseup=function(t){(t=window.event||t).target!==this&&t.target!==i.rootView||(r=!1,e.style.transition="0.5s",e.onmousemove=function(t){},t.pageX<i.parsedWidth/3?i.hide():i.openMenu())})},t.onmouseup=function(t){t.preventDefault(),r=!1},t.onmousemove=function(t){ev=window.event||ev,ev.target!==this&&ev.target!==i.rootView||!0===r&&(ev.pageX<i.parsedWidth?(e.style.width=ev.pageX+2+"px",e.style.transition="0.5s"):ev.pageX>=i.parsedWidth+80&&(e.style.width=i.parsedWidth+"px"))}},SideMenuX.prototype.containerClass=function(){return this.id+"_side_menux_frame_class"},SideMenuX.prototype.overlayClass=function(){return this.id+"_side_menux_overlay_class"},SideMenuX.prototype.overlayId=function(){return this.id+"_side_menux_overlay_id"},SideMenuX.prototype.closeBtnClass=function(){return this.id+"_side_menux_close_btn_class"},SideMenuX.prototype.closeBtnId=function(){return this.id+"_side_menux_close_btn_class"},SideMenuX.prototype.containerId=function(){return this.id},SideMenuX.prototype.openMenu=function(){document.getElementById(this.containerId()).style.width=this.width,addClass(document.body,this.noScrollStyle.name.substring(1)),this.onOpen()},SideMenuX.prototype.closeMenu=function(){document.getElementById(this.containerId()).style.width="0"};var popupZIndex=1e3;function Popup(t){if(!t)throw new Error("No options specified for creating this popup");if(!t.id||"string"!=typeof t.id)throw new Error("Hi! You have not specified a value for options.layitId! Popup cannot be created");if(this.id=t.id,"string"!=typeof t.width&&(console.log("Hi! options.width must be a valid css dimension! Defaulting to 90%"),t.width="90%"),t.width||(t.width="90%"),"string"!=typeof t.height&&(console.log("Hi! options.height must be a valid css dimension!  Defaulting to 90%"),t.height="90%"),t.height||(t.height="90%"),t.bg&&"string"==typeof t.bg?this.background=t.bg:(console.log("Hi! options.bg must be a valid html color!  defaulting to white"),this.background="#ffffff"),this.layout="","string"!=typeof t.layout)throw new Error("Please supply the name of the xml layout");this.layout=t.layout,this.closeOnClickOutside=!0,"boolean"==typeof t.closeOnClickOutside&&(this.closeOnClickOutside=t.closeOnClickOutside),t.onOpen&&"[object Function]"==={}.toString.call(t.onOpen)?this.onOpen=t.onOpen:this.onOpen=function(){},t.onClose&&"[object Function]"==={}.toString.call(t.onClose)?this.onClose=t.onClose:this.onClose=function(){},this.registry={};var e=document.body,i=document.documentElement;let r=Math.max(e.scrollWidth,e.offsetWidth,i.clientWidth,i.scrollWidth,i.offsetWidth),n=Math.max(e.scrollHeight,e.offsetHeight,i.clientHeight,i.scrollHeight,i.offsetHeight);this.opaqueBgStyle=new Style("#"+this.overlayId(),[]),this.containerStyle=new Style("#"+this.containerId(),[]),this.noScrollStyle=new Style(".noscroll",[]),this.closeBtnStyle=new Style("#"+this.closeBtnId(),[]),popupZIndex+=10,this.opaqueBgStyle.addFromOptions({display:"block",visibility:"visible",opacity:"0.8",position:"fixed","background-color":"black",top:"0",left:"0",bottom:"0",right:"0","z-index":popupZIndex+"",width:r+"px",height:n+"px"}),this.noScrollStyle.addFromOptions({overflow:"hidden"}),this.width=t.width,this.height=t.height;var o=this.width,s=this.height,a=this.background;if(this.containerStyle.addFromOptions({position:"absolute",left:"calc(50% - "+o+" / 2 )",top:"calc(50% - "+s+" / 2 )",visibility:"visible",display:"block",padding:"0px",margin:"0px",overflow:"auto",width:o,height:s,"background-color":a,"z-index":popupZIndex+1+"","border-radius":"0.3em"}),"object"==typeof t.containerStyle){var l=t.containerStyle;for(var u in l)this.containerStyle.addStyleElement(u,l[u])}this.closeBtnStyle.addFromOptions({top:"0.1em",right:"0.1em",position:"fixed","font-size":"6rem","font-weight":"bold","font-family":"monospace",cursor:"pointer",color:"white","background-color":"transparent",border:"none",padding:"none"}),this.registerStyle(this.opaqueBgStyle),this.registerStyle(this.containerStyle),this.registerStyle(this.closeBtnStyle),this.registerStyle(this.noScrollStyle)}Popup.prototype.registerStyle=function(t){this.registry[t.name]=t},Popup.prototype.hide=function(){var t=document.getElementById(this.overlayId()),e=document.getElementById(this.containerId());return t&&(t.style.display="none"),e&&(e.style.display="none"),removeClass(document.body,this.noScrollStyle.name.substring(1)),this.onClose(),this},Popup.prototype.open=function(){return this.build(),this},Popup.prototype.build=function(){var t=this;let e=!1;var i=document.getElementById(this.overlayId()),r=document.getElementById(this.containerId());i||(e=!0,(i=document.createElement("div")).setAttribute("id",this.overlayId()),addClass(i,this.overlayClass()),document.body.appendChild(i)),i.style.display="block",i.onclick=function(){t.closeOnClickOutside&&t.hide()},r?r.style.display="block":((r=document.createElement("div")).setAttribute("id",this.containerId()),addClass(r,this.containerClass()),r.innerHTML=this.layout,document.body.appendChild(r));let n=document.getElementById(this.closeBtnId());if(n||(n=document.createElement("input"),n.setAttribute("id",this.closeBtnId()),addClass(n,this.closeBtnClass()),n.type="button",n.value="",i.appendChild(n)),n.onclick=function(){t.hide()},e){var o=document.createElement("style");o.setAttribute("type","text/css");var s=new StringBuffer;for(var a in this.registry)s.append(this.registry[a].styleSheetEntry(a));o.innerHTML=s.toString(),document.getElementsByTagName("head")[0].appendChild(o);let t=new Page(r);t.layout(),page.subPages.set(r.id,t)}return addClass(document.body,this.noScrollStyle.name.substring(1)),t.onOpen(),this},Popup.prototype.overlayId=function(){return this.id+"_main_overlay"},Popup.prototype.overlayClass=function(){return this.id+"_main_overlay_class"},Popup.prototype.containerId=function(){return this.id},Popup.prototype.containerClass=function(){return this.id+"_container_class"},Popup.prototype.closeBtnClass=function(){return this.id+"_close_btn_class"},Popup.prototype.closeBtnId=function(){return this.id+"_close_btn_class"},function(t,e){"function"==typeof define&&define.amd?define(e):"object"==typeof exports?module.exports=e():t.ResizeSensor=e()}("undefined"!=typeof window?window:this,function(){if("undefined"==typeof window)return null;var t="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")(),e=t.requestAnimationFrame||t.mozRequestAnimationFrame||t.webkitRequestAnimationFrame||function(e){return t.setTimeout(e,20)},i=t.cancelAnimationFrame||t.mozCancelAnimationFrame||t.webkitCancelAnimationFrame||function(e){t.clearTimeout(e)};function r(t,e){var i=Object.prototype.toString.call(t),r="[object Array]"===i||"[object NodeList]"===i||"[object HTMLCollection]"===i||"[object Object]"===i||"undefined"!=typeof jQuery&&t instanceof jQuery||"undefined"!=typeof Elements&&t instanceof Elements,n=0,o=t.length;if(r)for(;n<o;n++)e(t[n]);else e(t)}function n(t){if(!t.getBoundingClientRect)return{width:t.offsetWidth,height:t.offsetHeight};var e=t.getBoundingClientRect();return{width:Math.round(e.width),height:Math.round(e.height)}}function o(t,e){Object.keys(e).forEach(function(i){t.style[i]=e[i]})}var s=function(t,a){var l=0;function u(){var t,e,i=[];this.add=function(t){i.push(t)},this.call=function(r){for(t=0,e=i.length;t<e;t++)i[t].call(this,r)},this.remove=function(r){var n=[];for(t=0,e=i.length;t<e;t++)i[t]!==r&&n.push(i[t]);i=n},this.length=function(){return i.length}}function h(t,i){if(t)if(t.resizedAttached)t.resizedAttached.add(i);else{t.resizedAttached=new u,t.resizedAttached.add(i),t.resizeSensor=document.createElement("div"),t.resizeSensor.dir="ltr",t.resizeSensor.className="resize-sensor";var r={pointerEvents:"none",position:"absolute",left:"0px",top:"0px",right:"0px",bottom:"0px",overflow:"hidden",zIndex:"-1",visibility:"hidden",maxWidth:"100%"},s={position:"absolute",left:"0px",top:"0px",transition:"0s"};o(t.resizeSensor,r);var a=document.createElement("div");a.className="resize-sensor-expand",o(a,r);var h=document.createElement("div");o(h,s),a.appendChild(h);var c=document.createElement("div");c.className="resize-sensor-shrink",o(c,r);var p=document.createElement("div");o(p,s),o(p,{width:"200%",height:"200%"}),c.appendChild(p),t.resizeSensor.appendChild(a),t.resizeSensor.appendChild(c),t.appendChild(t.resizeSensor);var d=window.getComputedStyle(t),f=d?d.getPropertyValue("position"):null;"absolute"!==f&&"relative"!==f&&"fixed"!==f&&"sticky"!==f&&(t.style.position="relative");var y=!1,m=0,g=n(t),w=0,v=0,b=!0;l=0;var A=function(){if(b){if(0===t.offsetWidth&&0===t.offsetHeight)return void(l||(l=e(function(){l=0,A()})));b=!1}var i,r;i=t.offsetWidth,r=t.offsetHeight,h.style.width=i+10+"px",h.style.height=r+10+"px",a.scrollLeft=i+10,a.scrollTop=r+10,c.scrollLeft=i+10,c.scrollTop=r+10};t.resizeSensor.resetSensor=A;var E=function(){m=0,y&&(w=g.width,v=g.height,t.resizedAttached&&t.resizedAttached.call(g))},_=function(){g=n(t),(y=g.width!==w||g.height!==v)&&!m&&(m=e(E)),A()},x=function(t,e,i){t.attachEvent?t.attachEvent("on"+e,i):t.addEventListener(e,i)};x(a,"scroll",_),x(c,"scroll",_),l=e(function(){l=0,A()})}}r(t,function(t){h(t,a)}),this.detach=function(e){l&&(i(l),l=0),s.detach(t,e)},this.reset=function(){t.resizeSensor.resetSensor&&t.resizeSensor.resetSensor()}};if(s.reset=function(t){r(t,function(e){t.resizeSensor.resetSensor&&e.resizeSensor.resetSensor()})},s.detach=function(t,e){r(t,function(t){t&&(t.resizedAttached&&"function"==typeof e&&(t.resizedAttached.remove(e),t.resizedAttached.length())||t.resizeSensor&&(t.contains(t.resizeSensor)&&t.removeChild(t.resizeSensor),delete t.resizeSensor,delete t.resizedAttached))})},"undefined"!=typeof MutationObserver){var a=new MutationObserver(function(t){for(var e in t)if(t.hasOwnProperty(e))for(var i=t[e].addedNodes,r=0;r<i.length;r++)i[r].resizeSensor&&s.reset(i[r])});document.addEventListener("DOMContentLoaded",function(t){a.observe(document.body,{childList:!0,subtree:!0})})}return s}),function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e(t.ULID={})}(this,function(t){"use strict";function e(t){var e=new Error(t);return e.source="ulid",e}var i="0123456789ABCDEFGHJKMNPQRSTVWXYZ",r=32,n=Math.pow(2,48)-1;function o(t,e,i){return e>t.length-1?t:t.substr(0,e)+i+t.substr(e+1)}function s(t){for(var r=void 0,n=t.length,s=void 0,a=void 0;!r&&n-- >=0;){if(s=t[n],-1===(a=i.indexOf(s)))throw e("incorrectly encoded string");31!==a?r=o(t,n,i[a+1]):t=o(t,n,i[0])}if("string"==typeof r)return r;throw e("cannot increment this string")}function a(t){var e=Math.floor(t()*r);return e===r&&(e=31),i.charAt(e)}function l(t,o){if(isNaN(t))throw new Error(t+" must be a number");if(t>n)throw e("cannot encode time greater than "+n);if(t<0)throw e("time must be positive");if(!1===Number.isInteger(t))throw e("time must be an integer");for(var s=void 0,a="";o>0;o--)a=i.charAt(s=t%r)+a,t=(t-s)/r;return a}function u(t,e){for(var i="";t>0;t--)i=a(e)+i;return i}function h(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],i=arguments[1];i||(i="undefined"!=typeof window?window:null);var r=i&&(i.crypto||i.msCrypto);if(r)return function(){var t=new Uint8Array(1);return r.getRandomValues(t),t[0]/255};try{var n=require("crypto");return function(){return n.randomBytes(1).readUInt8()/255}}catch(t){}if(t){try{console.error("secure crypto unusable, falling back to insecure Math.random()!")}catch(t){}return function(){return Math.random()}}throw e("secure crypto unusable, insecure Math.random not allowed")}function c(t){return t||(t=h()),function(e){return isNaN(e)&&(e=Date.now()),l(e,10)+u(16,t)}}var p=c();t.replaceCharAt=o,t.incrementBase32=s,t.randomChar=a,t.encodeTime=l,t.encodeRandom=u,t.decodeTime=function(t){if(26!==t.length)throw e("malformed ulid");var o=t.substr(0,10).split("").reverse().reduce(function(t,n,o){var s=i.indexOf(n);if(-1===s)throw e("invalid character found: "+n);return t+s*Math.pow(r,o)},0);if(o>n)throw e("malformed ulid, timestamp too large");return o},t.detectPrng=h,t.factory=c,t.monotonicFactory=function(t){t||(t=h());var e=0,i=void 0;return function(r){if(isNaN(r)&&(r=Date.now()),r<=e){var n=i=s(i);return l(e,10)+n}e=r;var o=i=u(16,t);return l(r,10)+o}},t.ulid=p,Object.defineProperty(t,"__esModule",{value:!0})}),
/**
 * AutoLayout.js is licensed under the MIT license. If a copy of the
 * MIT-license was not distributed with this file, You can obtain one at:
 * http://opensource.org/licenses/mit-license.html.
 * @link https://github.com/lume/autolayout
 *
 * @author: Hein Rutjes (IjzerenHein)
 * @license MIT
 * @copyright Gloey Apps, 2017
 *
 * @library autolayout.js
 * @version 0.7.0
 */
function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).AutoLayout=t()}}(function(){return function t(e,i,r){function n(s,a){if(!i[s]){if(!e[s]){var l="function"==typeof require&&require;if(!a&&l)return l(s,!0);if(o)return o(s,!0);var u=new Error("Cannot find module '"+s+"'");throw u.code="MODULE_NOT_FOUND",u}var h=i[s]={exports:{}};e[s][0].call(h.exports,function(t){var i=e[s][1][t];return n(i||t)},h,h.exports,t,e,i,r)}return i[s].exports}for(var o="function"==typeof require&&require,s=0;s<r.length;s++)n(r[s]);return n}({1:[function(t,e,i){"use strict";var r=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}();function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var o=t("cassowary/bin/c"),s={CONST:"const",NOTANATTRIBUTE:"const",VARIABLE:"var",LEFT:"left",RIGHT:"right",TOP:"top",BOTTOM:"bottom",WIDTH:"width",HEIGHT:"height",CENTERX:"centerX",CENTERY:"centerY",ZINDEX:"zIndex"},a={LEQ:"leq",EQU:"equ",GEQ:"geq"},l=function(){function t(t,e,i,r,n,o){this.message=t,this.expected=e,this.found=i,this.offset=r,this.line=n,this.column=o,this.name="SyntaxError"}return function(t,e){function i(){this.constructor=t}i.prototype=e.prototype,t.prototype=new i}(t,Error),{SyntaxError:t,parse:function(e){var i,r=arguments.length>1?arguments[1]:{},n={},o={visualFormatString:At},s=At,a=n,l=null,u=":",h={type:"literal",value:":",description:'":"'},c=function(t,e,i,r,n){return{orientation:t?t[0]:"horizontal",cascade:(e||[]).concat([i],[].concat.apply([],r),n||[])}},p="H",d={type:"literal",value:"H",description:'"H"'},f="V",y={type:"literal",value:"V",description:'"V"'},m=function(t){return"H"==t?"horizontal":"vertical"},g="|",w={type:"literal",value:"|",description:'"|"'},v=function(){return{view:null}},b="[",A={type:"literal",value:"[",description:'"["'},E="]",_={type:"literal",value:"]",description:'"]"'},x=function(t,e){return Ot(t,e?{constraints:e}:{})},S="-",T={type:"literal",value:"-",description:'"-"'},C=function(t){return t},I=function(){return[{relation:"equ",constant:"default",$parserOffset:gt()}]},O="",V=function(){return[{relation:"equ",constant:0,$parserOffset:gt()}]},N=function(t){return[{relation:"equ",constant:t,$parserOffset:gt()}]},L="(",R={type:"literal",value:"(",description:'"("'},q=",",P={type:"literal",value:",",description:'","'},B=")",M={type:"literal",value:")",description:'")"'},F=function(t,e){return[t].concat(e.map(function(t){return t[1]}))},k="@",H={type:"literal",value:"@",description:'"@"'},z=function(t,e,i){return Ot({relation:"equ"},t||{},e,i?i[1]:{})},U="==",D={type:"literal",value:"==",description:'"=="'},j=function(){return{relation:"equ",$parserOffset:gt()}},W="<=",K={type:"literal",value:"<=",description:'"<="'},X=function(){return{relation:"leq",$parserOffset:gt()}},G=">=",Q={type:"literal",value:">=",description:'">="'},Y=function(){return{relation:"geq",$parserOffset:gt()}},Z=/^[0-9]/,$={type:"class",value:"[0-9]",description:"[0-9]"},J=function(t){return{priority:parseInt(t.join(""),10)}},tt=function(t){return{constant:t}},et=/^[a-zA-Z_]/,it={type:"class",value:"[a-zA-Z_]",description:"[a-zA-Z_]"},rt=/^[a-zA-Z0-9_]/,nt={type:"class",value:"[a-zA-Z0-9_]",description:"[a-zA-Z0-9_]"},ot=function(t,e){return{view:t+e}},st=".",at={type:"literal",value:".",description:'"."'},lt=function(t,e){return parseFloat(t.concat(".").concat(e).join(""),10)},ut=function(t){return parseInt(t.join(""),10)},ht=0,ct=0,pt=0,dt={line:1,column:1,seenCR:!1},ft=0,yt=[],mt=0;if("startRule"in r){if(!(r.startRule in o))throw new Error("Can't start parsing from rule \""+r.startRule+'".');s=o[r.startRule]}function gt(){return ct}function wt(t){return pt!==t&&(pt>t&&(pt=0,dt={line:1,column:1,seenCR:!1}),function(t,i,r){var n,o;for(n=i;n<r;n++)"\n"===(o=e.charAt(n))?(t.seenCR||t.line++,t.column=1,t.seenCR=!1):"\r"===o||"\u2028"===o||"\u2029"===o?(t.line++,t.column=1,t.seenCR=!0):(t.column++,t.seenCR=!1)}(dt,pt,t),pt=t),dt}function vt(t){ht<ft||(ht>ft&&(ft=ht,yt=[]),yt.push(t))}function bt(i,r,n){var o=wt(n),s=n<e.length?e.charAt(n):null;return null!==r&&function(t){var e=1;for(t.sort(function(t,e){return t.description<e.description?-1:t.description>e.description?1:0});e<t.length;)t[e-1]===t[e]?t.splice(e,1):e++}(r),new t(null!==i?i:function(t,e){var i,r=new Array(t.length);for(i=0;i<t.length;i++)r[i]=t[i].description;return"Expected "+(t.length>1?r.slice(0,-1).join(", ")+" or "+r[t.length-1]:r[0])+" but "+(e?'"'+function(t){function e(t){return t.charCodeAt(0).toString(16).toUpperCase()}return t.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\x08/g,"\\b").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\f/g,"\\f").replace(/\r/g,"\\r").replace(/[\x00-\x07\x0B\x0E\x0F]/g,function(t){return"\\x0"+e(t)}).replace(/[\x10-\x1F\x80-\xFF]/g,function(t){return"\\x"+e(t)}).replace(/[\u0180-\u0FFF]/g,function(t){return"\\u0"+e(t)}).replace(/[\u1080-\uFFFF]/g,function(t){return"\\u"+e(t)})}(e)+'"':"end of input")+" found."}(r,s),r,s,n,o.line,o.column)}function At(){var t,i,r,o,s,g,w,v;if(t=ht,i=ht,r=function(){var t,i;t=ht,72===e.charCodeAt(ht)?(i=p,ht++):(i=n,0===mt&&vt(d));i===n&&(86===e.charCodeAt(ht)?(i=f,ht++):(i=n,0===mt&&vt(y)));i!==n&&(ct=t,i=m(i));return t=i,t}(),r!==n?(58===e.charCodeAt(ht)?(o=u,ht++):(o=n,0===mt&&vt(h)),o!==n?i=r=[r,o]:(ht=i,i=a)):(ht=i,i=a),i===n&&(i=l),i!==n)if(r=ht,(o=Et())!==n&&(s=xt())!==n?r=o=[o,s]:(ht=r,r=a),r===n&&(r=l),r!==n)if((o=_t())!==n){for(s=[],g=ht,(w=xt())!==n&&(v=_t())!==n?g=w=[w,v]:(ht=g,g=a);g!==n;)s.push(g),g=ht,(w=xt())!==n&&(v=_t())!==n?g=w=[w,v]:(ht=g,g=a);s!==n?(g=ht,(w=xt())!==n&&(v=Et())!==n?g=w=[w,v]:(ht=g,g=a),g===n&&(g=l),g!==n?(ct=t,t=i=c(i,r,o,s,g)):(ht=t,t=a)):(ht=t,t=a)}else ht=t,t=a;else ht=t,t=a;else ht=t,t=a;return t}function Et(){var t,i;return t=ht,124===e.charCodeAt(ht)?(i=g,ht++):(i=n,0===mt&&vt(w)),i!==n&&(ct=t,i=v()),t=i}function _t(){var t,i,r,o,s;return t=ht,91===e.charCodeAt(ht)?(i=b,ht++):(i=n,0===mt&&vt(A)),i!==n&&(r=Ct())!==n?((o=St())===n&&(o=l),o!==n?(93===e.charCodeAt(ht)?(s=E,ht++):(s=n,0===mt&&vt(_)),s!==n?(ct=t,t=i=x(r,o)):(ht=t,t=a)):(ht=t,t=a)):(ht=t,t=a),t}function xt(){var t,i,r,o;return t=ht,45===e.charCodeAt(ht)?(i=S,ht++):(i=n,0===mt&&vt(T)),i!==n?(r=function(){var t;t=function(){var t,e;t=ht,e=It(),e!==n&&(ct=t,e=N(e));return t=e,t}(),t===n&&(t=St());return t}(),r!==n?(45===e.charCodeAt(ht)?(o=S,ht++):(o=n,0===mt&&vt(T)),o!==n?(ct=t,t=i=C(r)):(ht=t,t=a)):(ht=t,t=a)):(ht=t,t=a),t===n&&(t=ht,45===e.charCodeAt(ht)?(i=S,ht++):(i=n,0===mt&&vt(T)),i!==n&&(ct=t,i=I()),(t=i)===n&&(t=ht,(i=O)!==n&&(ct=t,i=V()),t=i)),t}function St(){var t,i,r,o,s,l,u;if(t=ht,40===e.charCodeAt(ht)?(i=L,ht++):(i=n,0===mt&&vt(R)),i!==n)if((r=Tt())!==n){for(o=[],s=ht,44===e.charCodeAt(ht)?(l=q,ht++):(l=n,0===mt&&vt(P)),l!==n&&(u=Tt())!==n?s=l=[l,u]:(ht=s,s=a);s!==n;)o.push(s),s=ht,44===e.charCodeAt(ht)?(l=q,ht++):(l=n,0===mt&&vt(P)),l!==n&&(u=Tt())!==n?s=l=[l,u]:(ht=s,s=a);o!==n?(41===e.charCodeAt(ht)?(s=B,ht++):(s=n,0===mt&&vt(M)),s!==n?(ct=t,t=i=F(r,o)):(ht=t,t=a)):(ht=t,t=a)}else ht=t,t=a;else ht=t,t=a;return t}function Tt(){var t,i,r,o,s,u;return t=ht,i=function(){var t,i;t=ht,e.substr(ht,2)===U?(i=U,ht+=2):(i=n,0===mt&&vt(D));i!==n&&(ct=t,i=j());t=i,t===n&&(t=ht,e.substr(ht,2)===W?(i=W,ht+=2):(i=n,0===mt&&vt(K)),i!==n&&(ct=t,i=X()),(t=i)===n&&(t=ht,e.substr(ht,2)===G?(i=G,ht+=2):(i=n,0===mt&&vt(Q)),i!==n&&(ct=t,i=Y()),t=i));return t}(),i===n&&(i=l),i!==n?(r=function(){var t;t=function(){var t,e;t=ht,e=It(),e!==n&&(ct=t,e=tt(e));return t=e,t}(),t===n&&(t=Ct());return t}(),r!==n?(o=ht,64===e.charCodeAt(ht)?(s=k,ht++):(s=n,0===mt&&vt(H)),s!==n?(u=function(){var t,i,r;t=ht,i=[],Z.test(e.charAt(ht))?(r=e.charAt(ht),ht++):(r=n,0===mt&&vt($));if(r!==n)for(;r!==n;)i.push(r),Z.test(e.charAt(ht))?(r=e.charAt(ht),ht++):(r=n,0===mt&&vt($));else i=a;i!==n&&(ct=t,i=J(i));return t=i,t}(),u!==n?o=s=[s,u]:(ht=o,o=a)):(ht=o,o=a),o===n&&(o=l),o!==n?(ct=t,t=i=z(i,r,o)):(ht=t,t=a)):(ht=t,t=a)):(ht=t,t=a),t}function Ct(){var t,i,r,o,s;if(t=ht,i=ht,r=[],et.test(e.charAt(ht))?(o=e.charAt(ht),ht++):(o=n,0===mt&&vt(it)),o!==n)for(;o!==n;)r.push(o),et.test(e.charAt(ht))?(o=e.charAt(ht),ht++):(o=n,0===mt&&vt(it));else r=a;if(r!==n&&(r=e.substring(i,ht)),(i=r)!==n){for(r=ht,o=[],rt.test(e.charAt(ht))?(s=e.charAt(ht),ht++):(s=n,0===mt&&vt(nt));s!==n;)o.push(s),rt.test(e.charAt(ht))?(s=e.charAt(ht),ht++):(s=n,0===mt&&vt(nt));o!==n&&(o=e.substring(r,ht)),(r=o)!==n?(ct=t,t=i=ot(i,r)):(ht=t,t=a)}else ht=t,t=a;return t}function It(){var t,i,r,o,s;if(t=ht,i=[],Z.test(e.charAt(ht))?(r=e.charAt(ht),ht++):(r=n,0===mt&&vt($)),r!==n)for(;r!==n;)i.push(r),Z.test(e.charAt(ht))?(r=e.charAt(ht),ht++):(r=n,0===mt&&vt($));else i=a;if(i!==n)if(46===e.charCodeAt(ht)?(r=st,ht++):(r=n,0===mt&&vt(at)),r!==n){if(o=[],Z.test(e.charAt(ht))?(s=e.charAt(ht),ht++):(s=n,0===mt&&vt($)),s!==n)for(;s!==n;)o.push(s),Z.test(e.charAt(ht))?(s=e.charAt(ht),ht++):(s=n,0===mt&&vt($));else o=a;o!==n?(ct=t,t=i=lt(i,o)):(ht=t,t=a)}else ht=t,t=a;else ht=t,t=a;if(t===n){if(t=ht,i=[],Z.test(e.charAt(ht))?(r=e.charAt(ht),ht++):(r=n,0===mt&&vt($)),r!==n)for(;r!==n;)i.push(r),Z.test(e.charAt(ht))?(r=e.charAt(ht),ht++):(r=n,0===mt&&vt($));else i=a;i!==n&&(ct=t,i=ut(i)),t=i}return t}function Ot(t){for(var e=1;e<arguments.length;e++)for(var i in arguments[e])t[i]=arguments[e][i];return t}if((i=s())!==n&&ht===e.length)return i;throw i!==n&&ht<e.length&&vt({type:"end",description:"end of input"}),bt(null,yt,ft)}}}(),u=function(){function t(t,e,i,r,n,o){this.message=t,this.expected=e,this.found=i,this.offset=r,this.line=n,this.column=o,this.name="SyntaxError"}return function(t,e){function i(){this.constructor=t}i.prototype=e.prototype,t.prototype=new i}(t,Error),{SyntaxError:t,parse:function(e){var i,r=arguments.length>1?arguments[1]:{},n={},o={visualFormatStringExt:We},s=We,a=n,l="C:",u={type:"literal",value:"C:",description:'"C:"'},h=null,c=function(t,e,i,r){return{type:"attribute",view:t.view,attributes:[e].concat(i)}},p=function(t,e){return{attr:t,predicates:e}},d=":",f={type:"literal",value:":",description:'":"'},y=function(t,e,i,r,n,o){return{type:"vfl",orientation:t?t[0]:"horizontal",cascade:(e||[]).concat(i,[].concat.apply([],r),n||[])}},m="HV",g={type:"literal",value:"HV",description:'"HV"'},w=function(){return"horzvert"},v="H",b={type:"literal",value:"H",description:'"H"'},A=function(){return"horizontal"},E="V",_={type:"literal",value:"V",description:'"V"'},x=function(){return"vertical"},S="Z",T={type:"literal",value:"Z",description:'"Z"'},C=function(){return"zIndex"},I=" ",O={type:"literal",value:" ",description:'" "'},V="//",N={type:"literal",value:"//",description:'"//"'},L={type:"any",description:"any character"},R="|",q={type:"literal",value:"|",description:'"|"'},P=function(){return{view:null}},B="[",M={type:"literal",value:"[",description:'"["'},F=",",k={type:"literal",value:",",description:'","'},H="]",z={type:"literal",value:"]",description:'"]"'},U=function(t,e){return e.length?[t].concat([].concat.apply([],e)):t},D=function(t,e,i){return li(li(t,e?{constraints:e}:{}),i?{cascade:i}:{})},j=function(t,e){return[].concat([].concat.apply([],t),[e])},W="->",K={type:"literal",value:"->",description:'"->"'},X=function(){return[{relation:"none"}]},G="-",Q={type:"literal",value:"-",description:'"-"'},Y=function(t){return t},Z=function(){return[{relation:"equ",constant:"default"}]},$="~",J={type:"literal",value:"~",description:'"~"'},tt=function(){return[{relation:"equ",equalSpacing:!0}]},et="",it=function(){return[{relation:"equ",constant:0}]},rt=function(t){return[{relation:"equ",multiplier:t.multiplier}]},nt=function(t){return[{relation:"equ",constant:t}]},ot="(",st={type:"literal",value:"(",description:'"("'},at=")",lt={type:"literal",value:")",description:'")"'},ut=function(t,e){return[t].concat(e.map(function(t){return t[1]}))},ht="@",ct={type:"literal",value:"@",description:'"@"'},pt=function(t,e,i){return li({relation:"equ"},t||{},e,i?i[1]:{})},dt=function(t,e,i){return li({relation:"equ",equalSpacing:!0},t||{},e,i?i[1]:{})},ft="==",yt={type:"literal",value:"==",description:'"=="'},mt=function(){return{relation:"equ"}},gt="<=",wt={type:"literal",value:"<=",description:'"<="'},vt=function(){return{relation:"leq"}},bt=">=",At={type:"literal",value:">=",description:'">="'},Et=function(){return{relation:"geq"}},_t=/^[0-9]/,xt={type:"class",value:"[0-9]",description:"[0-9]"},St=function(t){return{priority:parseInt(t.join(""),10)}},Tt=function(t){return{constant:t}},Ct=function(t){return{constant:-t}},It="+",Ot={type:"literal",value:"+",description:'"+"'},Vt="%",Nt={type:"literal",value:"%",description:'"%"'},Lt=function(t){return{view:null,multiplier:t/100}},Rt=function(t){return{view:null,multiplier:t/-100}},qt=function(t,e,i,r){return{view:t.view,attribute:e||void 0,multiplier:i||1,constant:r||void 0}},Pt=".left",Bt={type:"literal",value:".left",description:'".left"'},Mt=function(){return"left"},Ft=".right",kt={type:"literal",value:".right",description:'".right"'},Ht=function(){return"right"},zt=".top",Ut={type:"literal",value:".top",description:'".top"'},Dt=function(){return"top"},jt=".bottom",Wt={type:"literal",value:".bottom",description:'".bottom"'},Kt=function(){return"bottom"},Xt=".width",Gt={type:"literal",value:".width",description:'".width"'},Qt=function(){return"width"},Yt=".height",Zt={type:"literal",value:".height",description:'".height"'},$t=function(){return"height"},Jt=".centerX",te={type:"literal",value:".centerX",description:'".centerX"'},ee=function(){return"centerX"},ie=".centerY",re={type:"literal",value:".centerY",description:'".centerY"'},ne=function(){return"centerY"},oe="/",se={type:"literal",value:"/",description:'"/"'},ae=function(t){return 1/t},le="/+",ue={type:"literal",value:"/+",description:'"/+"'},he="/-",ce={type:"literal",value:"/-",description:'"/-"'},pe=function(t){return-1/t},de="*",fe={type:"literal",value:"*",description:'"*"'},ye=function(t){return t},me="*+",ge={type:"literal",value:"*+",description:'"*+"'},we="*-",ve={type:"literal",value:"*-",description:'"*-"'},be=function(t){return-t},Ae=/^[a-zA-Z_]/,Ee={type:"class",value:"[a-zA-Z_]",description:"[a-zA-Z_]"},_e=/^[a-zA-Z0-9_]/,xe={type:"class",value:"[a-zA-Z0-9_]",description:"[a-zA-Z0-9_]"},Se=function(t,e,i){return{view:t+e,range:i,$parserOffset:ze()}},Te=function(t,e){return{view:t+e,$parserOffset:ze()}},Ce="..",Ie={type:"literal",value:"..",description:'".."'},Oe=function(t){return parseInt(t)},Ve=".",Ne={type:"literal",value:".",description:'"."'},Le=function(t,e){return parseFloat(t.concat(".").concat(e).join(""),10)},Re=function(t){return parseInt(t.join(""),10)},qe=0,Pe=0,Be=0,Me={line:1,column:1,seenCR:!1},Fe=0,ke=[],He=0;if("startRule"in r){if(!(r.startRule in o))throw new Error("Can't start parsing from rule \""+r.startRule+'".');s=o[r.startRule]}function ze(){return Pe}function Ue(t){return Be!==t&&(Be>t&&(Be=0,Me={line:1,column:1,seenCR:!1}),function(t,i,r){var n,o;for(n=i;n<r;n++)"\n"===(o=e.charAt(n))?(t.seenCR||t.line++,t.column=1,t.seenCR=!1):"\r"===o||"\u2028"===o||"\u2029"===o?(t.line++,t.column=1,t.seenCR=!0):(t.column++,t.seenCR=!1)}(Me,Be,t),Be=t),Me}function De(t){qe<Fe||(qe>Fe&&(Fe=qe,ke=[]),ke.push(t))}function je(i,r,n){var o=Ue(n),s=n<e.length?e.charAt(n):null;return null!==r&&function(t){var e=1;for(t.sort(function(t,e){return t.description<e.description?-1:t.description>e.description?1:0});e<t.length;)t[e-1]===t[e]?t.splice(e,1):e++}(r),new t(null!==i?i:function(t,e){var i,r=new Array(t.length);for(i=0;i<t.length;i++)r[i]=t[i].description;return"Expected "+(t.length>1?r.slice(0,-1).join(", ")+" or "+r[t.length-1]:r[0])+" but "+(e?'"'+function(t){function e(t){return t.charCodeAt(0).toString(16).toUpperCase()}return t.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\x08/g,"\\b").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\f/g,"\\f").replace(/\r/g,"\\r").replace(/[\x00-\x07\x0B\x0E\x0F]/g,function(t){return"\\x0"+e(t)}).replace(/[\x10-\x1F\x80-\xFF]/g,function(t){return"\\x"+e(t)}).replace(/[\u0180-\u0FFF]/g,function(t){return"\\u0"+e(t)}).replace(/[\u1080-\uFFFF]/g,function(t){return"\\u"+e(t)})}(e)+'"':"end of input")+" found."}(r,s),r,s,n,o.line,o.column)}function We(){var t;return(t=function(){var t,i,r,o,s,l,u,c;t=qe,i=qe,r=function(){var t,i;t=qe,e.substr(qe,2)===m?(i=m,qe+=2):(i=n,0===He&&De(g));i!==n&&(Pe=t,i=w());t=i,t===n&&(t=qe,72===e.charCodeAt(qe)?(i=v,qe++):(i=n,0===He&&De(b)),i!==n&&(Pe=t,i=A()),(t=i)===n&&(t=qe,86===e.charCodeAt(qe)?(i=E,qe++):(i=n,0===He&&De(_)),i!==n&&(Pe=t,i=x()),(t=i)===n&&(t=qe,90===e.charCodeAt(qe)?(i=S,qe++):(i=n,0===He&&De(T)),i!==n&&(Pe=t,i=C()),t=i)));return t}(),r!==n?(58===e.charCodeAt(qe)?(o=d,qe++):(o=n,0===He&&De(f)),o!==n?i=r=[r,o]:(qe=i,i=a)):(qe=i,i=a);i===n&&(i=h);if(i!==n)if(r=qe,(o=Ge())!==n&&(s=Ze())!==n?r=o=[o,s]:(qe=r,r=a),r===n&&(r=h),r!==n)if((o=Qe())!==n){for(s=[],l=qe,(u=Ze())!==n&&(c=Qe())!==n?l=u=[u,c]:(qe=l,l=a);l!==n;)s.push(l),l=qe,(u=Ze())!==n&&(c=Qe())!==n?l=u=[u,c]:(qe=l,l=a);s!==n?(l=qe,(u=Ze())!==n&&(c=Ge())!==n?l=u=[u,c]:(qe=l,l=a),l===n&&(l=h),l!==n?((u=Xe())===n&&(u=h),u!==n?(Pe=t,t=i=y(i,r,o,s,l,u)):(qe=t,t=a)):(qe=t,t=a)):(qe=t,t=a)}else qe=t,t=a;else qe=t,t=a;else qe=t,t=a;return t}())===n&&(t=function(){var t,i,r,o,s,p;t=qe,e.substr(qe,2)===l?(i=l,qe+=2):(i=n,0===He&&De(u));if(i!==n)if((r=si())!==n)if((o=Ke())!==n){for(s=[],p=Ke();p!==n;)s.push(p),p=Ke();s!==n?((p=Xe())===n&&(p=h),p!==n?(Pe=t,t=i=c(r,o,s,p)):(qe=t,t=a)):(qe=t,t=a)}else qe=t,t=a;else qe=t,t=a;else qe=t,t=a;return t}()),t}function Ke(){var t,e,i;return t=qe,(e=oi())!==n&&(i=$e())!==n?(Pe=t,t=e=p(e,i)):(qe=t,t=a),t}function Xe(){var t,i,r,o,s;for(t=qe,i=[],32===e.charCodeAt(qe)?(r=I,qe++):(r=n,0===He&&De(O));r!==n;)i.push(r),32===e.charCodeAt(qe)?(r=I,qe++):(r=n,0===He&&De(O));if(i!==n)if(e.substr(qe,2)===V?(r=V,qe+=2):(r=n,0===He&&De(N)),r!==n){for(o=[],e.length>qe?(s=e.charAt(qe),qe++):(s=n,0===He&&De(L));s!==n;)o.push(s),e.length>qe?(s=e.charAt(qe),qe++):(s=n,0===He&&De(L));o!==n?t=i=[i,r,o]:(qe=t,t=a)}else qe=t,t=a;else qe=t,t=a;return t}function Ge(){var t,i;return t=qe,124===e.charCodeAt(qe)?(i=R,qe++):(i=n,0===He&&De(q)),i!==n&&(Pe=t,i=P()),t=i}function Qe(){var t,i,r,o,s,l,u;if(t=qe,91===e.charCodeAt(qe)?(i=B,qe++):(i=n,0===He&&De(M)),i!==n)if((r=Ye())!==n){for(o=[],s=qe,44===e.charCodeAt(qe)?(l=F,qe++):(l=n,0===He&&De(k)),l!==n&&(u=Ye())!==n?s=l=[l,u]:(qe=s,s=a);s!==n;)o.push(s),s=qe,44===e.charCodeAt(qe)?(l=F,qe++):(l=n,0===He&&De(k)),l!==n&&(u=Ye())!==n?s=l=[l,u]:(qe=s,s=a);o!==n?(93===e.charCodeAt(qe)?(s=H,qe++):(s=n,0===He&&De(z)),s!==n?(Pe=t,t=i=U(r,o)):(qe=t,t=a)):(qe=t,t=a)}else qe=t,t=a;else qe=t,t=a;return t}function Ye(){var t,i,r,o;return t=qe,i=function(){var t,i,r,o,s;t=qe,i=qe,r=[],Ae.test(e.charAt(qe))?(o=e.charAt(qe),qe++):(o=n,0===He&&De(Ee));if(o!==n)for(;o!==n;)r.push(o),Ae.test(e.charAt(qe))?(o=e.charAt(qe),qe++):(o=n,0===He&&De(Ee));else r=a;r!==n&&(r=e.substring(i,qe));if(i=r,i!==n){for(r=qe,o=[],_e.test(e.charAt(qe))?(s=e.charAt(qe),qe++):(s=n,0===He&&De(xe));s!==n;)o.push(s),_e.test(e.charAt(qe))?(s=e.charAt(qe),qe++):(s=n,0===He&&De(xe));o!==n&&(o=e.substring(r,qe)),(r=o)!==n?(o=function(){var t,i,r,o;t=qe,e.substr(qe,2)===Ce?(i=Ce,qe+=2):(i=n,0===He&&De(Ie));if(i!==n){if(r=[],_t.test(e.charAt(qe))?(o=e.charAt(qe),qe++):(o=n,0===He&&De(xt)),o!==n)for(;o!==n;)r.push(o),_t.test(e.charAt(qe))?(o=e.charAt(qe),qe++):(o=n,0===He&&De(xt));else r=a;r!==n?(Pe=t,t=i=Oe(r)):(qe=t,t=a)}else qe=t,t=a;return t}(),o!==n?(Pe=t,t=i=Se(i,r,o)):(qe=t,t=a)):(qe=t,t=a)}else qe=t,t=a;if(t===n){if(t=qe,i=qe,r=[],Ae.test(e.charAt(qe))?(o=e.charAt(qe),qe++):(o=n,0===He&&De(Ee)),o!==n)for(;o!==n;)r.push(o),Ae.test(e.charAt(qe))?(o=e.charAt(qe),qe++):(o=n,0===He&&De(Ee));else r=a;if(r!==n&&(r=e.substring(i,qe)),(i=r)!==n){for(r=qe,o=[],_e.test(e.charAt(qe))?(s=e.charAt(qe),qe++):(s=n,0===He&&De(xe));s!==n;)o.push(s),_e.test(e.charAt(qe))?(s=e.charAt(qe),qe++):(s=n,0===He&&De(xe));o!==n&&(o=e.substring(r,qe)),(r=o)!==n?(Pe=t,t=i=Te(i,r)):(qe=t,t=a)}else qe=t,t=a}return t}(),i!==n?((r=$e())===n&&(r=h),r!==n?(o=function(){var t,i,r,o,s,l;t=qe,58===e.charCodeAt(qe)?(i=d,qe++):(i=n,0===He&&De(f));if(i!==n){if(r=[],o=qe,(s=Ze())!==n&&(l=Qe())!==n?o=s=[s,l]:(qe=o,o=a),o!==n)for(;o!==n;)r.push(o),o=qe,(s=Ze())!==n&&(l=Qe())!==n?o=s=[s,l]:(qe=o,o=a);else r=a;r!==n&&(o=Ze())!==n?(Pe=t,t=i=j(r,o)):(qe=t,t=a)}else qe=t,t=a;return t}(),o===n&&(o=h),o!==n?(Pe=t,t=i=D(i,r,o)):(qe=t,t=a)):(qe=t,t=a)):(qe=t,t=a),t}function Ze(){var t,i,r,o;return t=qe,e.substr(qe,2)===W?(i=W,qe+=2):(i=n,0===He&&De(K)),i!==n&&(Pe=t,i=X()),(t=i)===n&&(t=qe,45===e.charCodeAt(qe)?(i=G,qe++):(i=n,0===He&&De(Q)),i!==n?(r=function(){var t;t=function(){var t,e;t=qe,e=ni(),e!==n&&(Pe=t,e=rt(e));t=e,t===n&&(t=qe,(e=ai())!==n&&(Pe=t,e=nt(e)),t=e);return t}(),t===n&&(t=$e());return t}(),r!==n?(45===e.charCodeAt(qe)?(o=G,qe++):(o=n,0===He&&De(Q)),o!==n?(Pe=t,t=i=Y(r)):(qe=t,t=a)):(qe=t,t=a)):(qe=t,t=a),t===n&&(t=qe,45===e.charCodeAt(qe)?(i=G,qe++):(i=n,0===He&&De(Q)),i!==n&&(Pe=t,i=Z()),(t=i)===n&&(t=qe,126===e.charCodeAt(qe)?(i=$,qe++):(i=n,0===He&&De(J)),i!==n?(r=function(){var t,i,r,o,s,l,u;t=qe,40===e.charCodeAt(qe)?(i=ot,qe++):(i=n,0===He&&De(st));if(i!==n)if((r=ti())!==n){for(o=[],s=qe,44===e.charCodeAt(qe)?(l=F,qe++):(l=n,0===He&&De(k)),l!==n&&(u=ti())!==n?s=l=[l,u]:(qe=s,s=a);s!==n;)o.push(s),s=qe,44===e.charCodeAt(qe)?(l=F,qe++):(l=n,0===He&&De(k)),l!==n&&(u=ti())!==n?s=l=[l,u]:(qe=s,s=a);o!==n?(41===e.charCodeAt(qe)?(s=at,qe++):(s=n,0===He&&De(lt)),s!==n?(Pe=t,t=i=ut(r,o)):(qe=t,t=a)):(qe=t,t=a)}else qe=t,t=a;else qe=t,t=a;return t}(),r!==n?(126===e.charCodeAt(qe)?(o=$,qe++):(o=n,0===He&&De(J)),o!==n?(Pe=t,t=i=Y(r)):(qe=t,t=a)):(qe=t,t=a)):(qe=t,t=a),t===n&&(t=qe,126===e.charCodeAt(qe)?(i=$,qe++):(i=n,0===He&&De(J)),i!==n&&(Pe=t,i=tt()),(t=i)===n&&(t=qe,(i=et)!==n&&(Pe=t,i=it()),t=i))))),t}function $e(){var t,i,r,o,s,l,u;if(t=qe,40===e.charCodeAt(qe)?(i=ot,qe++):(i=n,0===He&&De(st)),i!==n)if((r=Je())!==n){for(o=[],s=qe,44===e.charCodeAt(qe)?(l=F,qe++):(l=n,0===He&&De(k)),l!==n&&(u=Je())!==n?s=l=[l,u]:(qe=s,s=a);s!==n;)o.push(s),s=qe,44===e.charCodeAt(qe)?(l=F,qe++):(l=n,0===He&&De(k)),l!==n&&(u=Je())!==n?s=l=[l,u]:(qe=s,s=a);o!==n?(41===e.charCodeAt(qe)?(s=at,qe++):(s=n,0===He&&De(lt)),s!==n?(Pe=t,t=i=ut(r,o)):(qe=t,t=a)):(qe=t,t=a)}else qe=t,t=a;else qe=t,t=a;return t}function Je(){var t,i,r,o,s,l;return t=qe,(i=ei())===n&&(i=h),i!==n&&(r=ii())!==n?(o=qe,64===e.charCodeAt(qe)?(s=ht,qe++):(s=n,0===He&&De(ct)),s!==n&&(l=ri())!==n?o=s=[s,l]:(qe=o,o=a),o===n&&(o=h),o!==n?(Pe=t,t=i=pt(i,r,o)):(qe=t,t=a)):(qe=t,t=a),t}function ti(){var t,i,r,o,s,l;return t=qe,(i=ei())===n&&(i=h),i!==n&&(r=ii())!==n?(o=qe,64===e.charCodeAt(qe)?(s=ht,qe++):(s=n,0===He&&De(ct)),s!==n&&(l=ri())!==n?o=s=[s,l]:(qe=o,o=a),o===n&&(o=h),o!==n?(Pe=t,t=i=dt(i,r,o)):(qe=t,t=a)):(qe=t,t=a),t}function ei(){var t,i;return t=qe,e.substr(qe,2)===ft?(i=ft,qe+=2):(i=n,0===He&&De(yt)),i!==n&&(Pe=t,i=mt()),(t=i)===n&&(t=qe,e.substr(qe,2)===gt?(i=gt,qe+=2):(i=n,0===He&&De(wt)),i!==n&&(Pe=t,i=vt()),(t=i)===n&&(t=qe,e.substr(qe,2)===bt?(i=bt,qe+=2):(i=n,0===He&&De(At)),i!==n&&(Pe=t,i=Et()),t=i)),t}function ii(){var t;return(t=ni())===n&&(t=function(){var t,i,r;t=qe,(i=ai())!==n&&(Pe=t,i=Tt(i));t=i,t===n&&(t=qe,45===e.charCodeAt(qe)?(i=G,qe++):(i=n,0===He&&De(Q)),i!==n&&(r=ai())!==n?(Pe=t,t=i=Ct(r)):(qe=t,t=a),t===n&&(t=qe,43===e.charCodeAt(qe)?(i=It,qe++):(i=n,0===He&&De(Ot)),i!==n&&(r=ai())!==n?(Pe=t,t=i=Tt(r)):(qe=t,t=a)));return t}())===n&&(t=function(){var t,i,r,o,s;t=qe,(i=si())!==n?((r=oi())===n&&(r=h),r!==n?(o=function(){var t,i,r;t=qe,47===e.charCodeAt(qe)?(i=oe,qe++):(i=n,0===He&&De(se));i!==n&&(r=ai())!==n?(Pe=t,t=i=ae(r)):(qe=t,t=a);t===n&&(t=qe,e.substr(qe,2)===le?(i=le,qe+=2):(i=n,0===He&&De(ue)),i!==n&&(r=ai())!==n?(Pe=t,t=i=ae(r)):(qe=t,t=a),t===n&&(t=qe,e.substr(qe,2)===he?(i=he,qe+=2):(i=n,0===He&&De(ce)),i!==n&&(r=ai())!==n?(Pe=t,t=i=pe(r)):(qe=t,t=a),t===n&&(t=qe,42===e.charCodeAt(qe)?(i=de,qe++):(i=n,0===He&&De(fe)),i!==n&&(r=ai())!==n?(Pe=t,t=i=ye(r)):(qe=t,t=a),t===n&&(t=qe,e.substr(qe,2)===me?(i=me,qe+=2):(i=n,0===He&&De(ge)),i!==n&&(r=ai())!==n?(Pe=t,t=i=ye(r)):(qe=t,t=a),t===n&&(t=qe,e.substr(qe,2)===we?(i=we,qe+=2):(i=n,0===He&&De(ve)),i!==n&&(r=ai())!==n?(Pe=t,t=i=be(r)):(qe=t,t=a))))));return t}(),o===n&&(o=h),o!==n?(s=function(){var t,i,r;t=qe,45===e.charCodeAt(qe)?(i=G,qe++):(i=n,0===He&&De(Q));i!==n&&(r=ai())!==n?(Pe=t,t=i=be(r)):(qe=t,t=a);t===n&&(t=qe,43===e.charCodeAt(qe)?(i=It,qe++):(i=n,0===He&&De(Ot)),i!==n&&(r=ai())!==n?(Pe=t,t=i=ye(r)):(qe=t,t=a));return t}(),s===n&&(s=h),s!==n?(Pe=t,t=i=qt(i,r,o,s)):(qe=t,t=a)):(qe=t,t=a)):(qe=t,t=a)):(qe=t,t=a);return t}()),t}function ri(){var t,i,r;if(t=qe,i=[],_t.test(e.charAt(qe))?(r=e.charAt(qe),qe++):(r=n,0===He&&De(xt)),r!==n)for(;r!==n;)i.push(r),_t.test(e.charAt(qe))?(r=e.charAt(qe),qe++):(r=n,0===He&&De(xt));else i=a;return i!==n&&(Pe=t,i=St(i)),t=i}function ni(){var t,i,r,o;return t=qe,(i=ai())!==n?(37===e.charCodeAt(qe)?(r=Vt,qe++):(r=n,0===He&&De(Nt)),r!==n?(Pe=t,t=i=Lt(i)):(qe=t,t=a)):(qe=t,t=a),t===n&&(t=qe,45===e.charCodeAt(qe)?(i=G,qe++):(i=n,0===He&&De(Q)),i!==n&&(r=ai())!==n?(37===e.charCodeAt(qe)?(o=Vt,qe++):(o=n,0===He&&De(Nt)),o!==n?(Pe=t,t=i=Rt(r)):(qe=t,t=a)):(qe=t,t=a),t===n&&(t=qe,43===e.charCodeAt(qe)?(i=It,qe++):(i=n,0===He&&De(Ot)),i!==n&&(r=ai())!==n?(37===e.charCodeAt(qe)?(o=Vt,qe++):(o=n,0===He&&De(Nt)),o!==n?(Pe=t,t=i=Lt(r)):(qe=t,t=a)):(qe=t,t=a))),t}function oi(){var t,i;return t=qe,e.substr(qe,5)===Pt?(i=Pt,qe+=5):(i=n,0===He&&De(Bt)),i!==n&&(Pe=t,i=Mt()),(t=i)===n&&(t=qe,e.substr(qe,6)===Ft?(i=Ft,qe+=6):(i=n,0===He&&De(kt)),i!==n&&(Pe=t,i=Ht()),(t=i)===n&&(t=qe,e.substr(qe,4)===zt?(i=zt,qe+=4):(i=n,0===He&&De(Ut)),i!==n&&(Pe=t,i=Dt()),(t=i)===n&&(t=qe,e.substr(qe,7)===jt?(i=jt,qe+=7):(i=n,0===He&&De(Wt)),i!==n&&(Pe=t,i=Kt()),(t=i)===n&&(t=qe,e.substr(qe,6)===Xt?(i=Xt,qe+=6):(i=n,0===He&&De(Gt)),i!==n&&(Pe=t,i=Qt()),(t=i)===n&&(t=qe,e.substr(qe,7)===Yt?(i=Yt,qe+=7):(i=n,0===He&&De(Zt)),i!==n&&(Pe=t,i=$t()),(t=i)===n&&(t=qe,e.substr(qe,8)===Jt?(i=Jt,qe+=8):(i=n,0===He&&De(te)),i!==n&&(Pe=t,i=ee()),(t=i)===n&&(t=qe,e.substr(qe,8)===ie?(i=ie,qe+=8):(i=n,0===He&&De(re)),i!==n&&(Pe=t,i=ne()),t=i))))))),t}function si(){var t,i,r,o,s;if(t=qe,i=qe,r=[],Ae.test(e.charAt(qe))?(o=e.charAt(qe),qe++):(o=n,0===He&&De(Ee)),o!==n)for(;o!==n;)r.push(o),Ae.test(e.charAt(qe))?(o=e.charAt(qe),qe++):(o=n,0===He&&De(Ee));else r=a;if(r!==n&&(r=e.substring(i,qe)),(i=r)!==n){for(r=qe,o=[],_e.test(e.charAt(qe))?(s=e.charAt(qe),qe++):(s=n,0===He&&De(xe));s!==n;)o.push(s),_e.test(e.charAt(qe))?(s=e.charAt(qe),qe++):(s=n,0===He&&De(xe));o!==n&&(o=e.substring(r,qe)),(r=o)!==n?(Pe=t,t=i=Te(i,r)):(qe=t,t=a)}else qe=t,t=a;return t}function ai(){var t,i,r,o,s;if(t=qe,i=[],_t.test(e.charAt(qe))?(r=e.charAt(qe),qe++):(r=n,0===He&&De(xt)),r!==n)for(;r!==n;)i.push(r),_t.test(e.charAt(qe))?(r=e.charAt(qe),qe++):(r=n,0===He&&De(xt));else i=a;if(i!==n)if(46===e.charCodeAt(qe)?(r=Ve,qe++):(r=n,0===He&&De(Ne)),r!==n){if(o=[],_t.test(e.charAt(qe))?(s=e.charAt(qe),qe++):(s=n,0===He&&De(xt)),s!==n)for(;s!==n;)o.push(s),_t.test(e.charAt(qe))?(s=e.charAt(qe),qe++):(s=n,0===He&&De(xt));else o=a;o!==n?(Pe=t,t=i=Le(i,o)):(qe=t,t=a)}else qe=t,t=a;else qe=t,t=a;if(t===n){if(t=qe,i=[],_t.test(e.charAt(qe))?(r=e.charAt(qe),qe++):(r=n,0===He&&De(xt)),r!==n)for(;r!==n;)i.push(r),_t.test(e.charAt(qe))?(r=e.charAt(qe),qe++):(r=n,0===He&&De(xt));else i=a;i!==n&&(Pe=t,i=Re(i)),t=i}return t}function li(t){for(var e=1;e<arguments.length;e++)for(var i in arguments[e])t[i]=arguments[e][i];return t}if((i=s())!==n&&qe===e.length)return i;throw i!==n&&qe<e.length&&De({type:"end",description:"end of input"}),je(null,ke,Fe)}}}(),h=1,c=2,p=4;function d(t,e){t.equalSpacerIndex=t.equalSpacerIndex||1;var i="_~"+t.lineIndex+":"+t.equalSpacerIndex+"~";t.equalSpacerIndex>1&&t.constraints.push({view1:"_~"+t.lineIndex+":1~",attr1:t.horizontal?s.WIDTH:s.HEIGHT,relation:t.relation.relation||a.EQU,view2:i,attr2:t.horizontal?s.WIDTH:s.HEIGHT,priority:t.relation.priority}),t.equalSpacerIndex++,t.relation.view||t.relation.multiplier&&1!==t.relation.multiplier?(t.constraints.push({view1:i,attr1:t.horizontal?s.WIDTH:s.HEIGHT,relation:t.relation.relation||a.EQU,view2:t.relation.view,attr2:t.horizontal?s.WIDTH:s.HEIGHT,priority:t.relation.priority,multiplier:t.relation.multiplier}),t.relation.multiplier=void 0):t.relation.constant&&(t.constraints.push({view1:i,attr1:t.horizontal?s.WIDTH:s.HEIGHT,relation:a.EQU,view2:null,attr2:s.CONST,priority:t.relation.priority,constant:t.relation.constant}),t.relation.constant=void 0);for(var r=0;r<t.prevViews.length;r++){var n=t.prevViews[r];switch(t.orientation){case h:t.prevAttr=n!==e?s.RIGHT:s.LEFT,t.curAttr=s.LEFT;break;case c:t.prevAttr=n!==e?s.BOTTOM:s.TOP,t.curAttr=s.TOP;break;case p:t.prevAttr=s.ZINDEX,t.curAttr=s.ZINDEX,t.relation.constant=n!==e?"default":0}t.constraints.push({view1:n,attr1:t.prevAttr,relation:t.relation.relation,view2:i,attr2:t.curAttr,priority:t.relation.priority})}t.prevViews=[i]}function f(t,e){t.proportionalSpacerIndex=t.proportionalSpacerIndex||1;var i="_-"+t.lineIndex+":"+t.proportionalSpacerIndex+"-";t.proportionalSpacerIndex++,t.constraints.push({view1:i,attr1:t.horizontal?s.WIDTH:s.HEIGHT,relation:t.relation.relation||a.EQU,view2:t.relation.view,attr2:t.horizontal?s.WIDTH:s.HEIGHT,priority:t.relation.priority,multiplier:t.relation.multiplier}),t.relation.multiplier=void 0;for(var r=0;r<t.prevViews.length;r++){var n=t.prevViews[r];switch(t.orientation){case h:t.prevAttr=n!==e?s.RIGHT:s.LEFT,t.curAttr=s.LEFT;break;case c:t.prevAttr=n!==e?s.BOTTOM:s.TOP,t.curAttr=s.TOP;break;case p:t.prevAttr=s.ZINDEX,t.curAttr=s.ZINDEX,t.relation.constant=n!==e?"default":0}t.constraints.push({view1:n,attr1:t.prevAttr,relation:t.relation.relation,view2:i,attr2:t.curAttr,priority:t.relation.priority})}t.prevViews=[i]}function y(t,e,i){for(var r=void 0,n=1;n<=4;n*=2)if(i.orientations&n&&i.stack.orientation!==n&&!(i.stack.processedOrientations&n)){i.stack.processedOrientations=i.stack.processedOrientations|n,r=r||{name:e,type:"stack"};for(var o=0,l=i.stack.subViews.length;o<l;o++)n===p?t.constraints.push({view1:r,attr1:s.ZINDEX,relation:a.EQU,view2:i.stack.subViews[o],attr2:s.ZINDEX}):(t.constraints.push({view1:r,attr1:n===c?s.HEIGHT:s.WIDTH,relation:a.EQU,view2:i.stack.subViews[o],attr2:n===c?s.HEIGHT:s.WIDTH}),t.constraints.push({view1:r,attr1:n===c?s.TOP:s.LEFT,relation:a.EQU,view2:i.stack.subViews[o],attr2:n===c?s.TOP:s.LEFT}))}}function m(t,e){if(!0===e&&(e=t.match(/\.\.\d+$/))&&(t=t.substring(0,t.length-e[0].length),e=parseInt(e[0].substring(2))),!e)return[t];var i,r=t.match(/\d+$/),n=[];if(r)for(t=t.substring(0,t.length-r[0].length),i=parseInt(r);i<=e;i++)n.push(t+i);else for(n.push(t),i=2;i<=e;i++)n.push(t+i);return n}function g(t,e,i){var r=i?i.view:null,n=[],o=[],a=void 0;r&&(e.push({view:r}),o.push(r));for(var l=0;l<e.length;l++){var u=e[l];if(!Array.isArray(u)&&u.hasOwnProperty("view")||Array.isArray(u)&&u[0].view&&!u[0].relation)for(var w=Array.isArray(u)?u:[u],v=0;v<w.length;v++)for(var b=","===(u=w[v])?[]:u.view?m(u.view,u.range):[null],A=0;A<b.length;A++){var E=b[A];if(o.push(E),E!==r&&(n.push(E),(a=t.subViews[E])||(a={orientations:0},t.subViews[E]=a),a.orientations=a.orientations|t.orientation,a.stack&&y(t,E,a)),void 0!==t.prevViews&&void 0!==E&&t.relation&&"none"!==t.relation.relation)for(var _=0;_<t.prevViews.length;_++){var x=t.prevViews[_];switch(t.orientation){case h:t.prevAttr=x!==r?s.RIGHT:s.LEFT,t.curAttr=E!==r?s.LEFT:s.RIGHT;break;case c:t.prevAttr=x!==r?s.BOTTOM:s.TOP,t.curAttr=E!==r?s.TOP:s.BOTTOM;break;case p:t.prevAttr=s.ZINDEX,t.curAttr=s.ZINDEX,t.relation.constant=x?t.relation.constant||"default":0}t.constraints.push({view1:x,attr1:t.prevAttr,relation:t.relation.relation,view2:E,attr2:t.curAttr,multiplier:t.relation.multiplier,constant:"default"!==t.relation.constant&&t.relation.constant?-t.relation.constant:t.relation.constant,priority:t.relation.priority})}var S=u.constraints;if(S)for(var T=0;T<S.length;T++)t.prevAttr=t.horizontal?s.WIDTH:s.HEIGHT,t.curAttr=S[T].view||S[T].multiplier?S[T].attribute||t.prevAttr:S[T].variable?s.VARIABLE:s.CONST,t.constraints.push({view1:E,attr1:t.prevAttr,relation:S[T].relation,view2:S[T].view,attr2:t.curAttr,multiplier:S[T].multiplier,constant:S[T].constant,priority:S[T].priority});u.cascade&&g(t,u.cascade,u)}else","!==u&&(t.prevViews=o,o=[],t.relation=u[0],void 0!==t.prevViews&&(t.relation.equalSpacing&&d(t,r),t.relation.multiplier&&f(t,r)))}if(r){if(a=t.subViews[r]){if(a.stack){var C=new Error('A stack named "'+r+'" has already been created');throw C.column=i.$parserOffset+1,C}}else a={orientations:t.orientation},t.subViews[r]=a;a.stack={orientation:t.orientation,processedOrientations:t.orientation,subViews:n},y(t,r,a)}}var w=["viewport","spacing","colors","shapes","widths","heights"],v=function(){function t(){n(this,t)}return r(t,null,[{key:"parseLine",value:function(t,e){if(0===t.length||e&&e.extended&&0===t.indexOf("//"))return[];var i=e&&e.extended?u.parse(t):l.parse(t);if(e&&"raw"===e.outFormat)return[i];var r={constraints:[],lineIndex:(e?e.lineIndex:void 0)||1,subViews:(e?e.subViews:void 0)||{}};if("attribute"===i.type)for(var n=0;n<i.attributes.length;n++)for(var o=i.attributes[n],s=0;s<o.predicates.length;s++){var a=o.predicates[s];r.constraints.push({view1:i.view,attr1:o.attr,relation:a.relation,view2:a.view,attr2:a.attribute||o.attr,multiplier:a.multiplier,constant:a.constant,priority:a.priority})}else switch(i.orientation){case"horizontal":r.orientation=h,r.horizontal=!0,g(r,i.cascade,null);break;case"vertical":r.orientation=c,g(r,i.cascade,null);break;case"horzvert":r.orientation=h,r.horizontal=!0,g(r,i.cascade,null),g(r={constraints:r.constraints,lineIndex:r.lineIndex,subViews:r.subViews,orientation:c},i.cascade,null);break;case"zIndex":r.orientation=p,g(r,i.cascade,null)}return r.constraints}},{key:"parse",value:function(t,e){var i=e&&e.lineSeparator?e.lineSeparator:"\n";if(!Array.isArray(t)&&t.indexOf(i)<0)try{return this.parseLine(t,e)}catch(e){throw e.source=t,e}t=Array.isArray(t)?t:[t];var r=void 0,n=[],o=0,s=void 0,a={lineIndex:o,extended:e&&e.extended,strict:!e||void 0===e.strict||e.strict,outFormat:e?e.outFormat:void 0,subViews:{}};try{for(var l=0;l<t.length;l++){r=t[l].split(i);for(var u=0;u<r.length;u++)s=r[u],o++,a.lineIndex=o,a.strict||(s=s.trim()),(a.strict||s.length)&&(n=n.concat(this.parseLine(s,a)))}}catch(t){throw t.source=s,t.line=o,t}return n}},{key:"parseMetaInfo",value:function(t,e){var i=e&&e.lineSeparator?e.lineSeparator:"\n",r=e?e.prefix:void 0;t=Array.isArray(t)?t:[t];for(var n,o={},s=0;s<t.length;s++)for(var a=t[s].split(i),l=0;l<a.length;l++)for(var u=a[l],h=0;h<w.length;h++)for(var c=0;c<(r?2:1);c++){var p=w[h],d=(0===c?"":r)+p;if(0===u.indexOf("//"+d+" "))for(var f=u.substring(3+d.length).split(" "),y=0;y<f.length;y++){o[p]=o[p]||{};for(var g=f[y].split(":"),v=m(g[0],!0),b=0;b<v.length;b++)o[p][v[b]]=g.length>1?g[1]:""}else 0===u.indexOf("//"+d+":")&&(o[p]=u.substring(3+d.length))}if(o.viewport){var A=o.viewport,E=A["aspect-ratio"];E&&(E=E.split("/"),A["aspect-ratio"]=parseInt(E[0])/parseInt(E[1])),void 0!==A.height&&(A.height="intrinsic"===A.height||parseInt(A.height)),void 0!==A.width&&(A.width="intrinsic"===A.width||parseInt(A.width)),void 0!==A["max-height"]&&(A["max-height"]=parseInt(A["max-height"])),void 0!==A["max-width"]&&(A["max-width"]=parseInt(A["max-width"])),void 0!==A["min-height"]&&(A["min-height"]=parseInt(A["min-height"])),void 0!==A["min-width"]&&(A["min-width"]=parseInt(A["min-width"]))}if(o.widths)for(n in o.widths){var _="intrinsic"===o.widths[n]||parseInt(o.widths[n]);o.widths[n]=_,(void 0===_||isNaN(_))&&delete o.widths[n]}if(o.heights)for(n in o.heights){var x="intrinsic"===o.heights[n]||parseInt(o.heights[n]);o.heights[n]=x,(void 0===x||isNaN(x))&&delete o.heights[n]}if(o.spacing){var S=JSON.parse(o.spacing);if(o.spacing=S,Array.isArray(S)){for(var T=0,C=S.length;T<C;T++)if(isNaN(S[T])){delete o.spacing;break}}else(void 0===S||isNaN(S))&&delete o.spacing}return o}}]),t}(),b=function(){function t(e){n(this,t),this._name=e.name,this._type=e.type,this._solver=e.solver,this._attr={},e.name||(this._attr[s.LEFT]=new o.Variable,this._solver.addConstraint(new o.StayConstraint(this._attr[s.LEFT],o.Strength.required)),this._attr[s.TOP]=new o.Variable,this._solver.addConstraint(new o.StayConstraint(this._attr[s.TOP],o.Strength.required)),this._attr[s.ZINDEX]=new o.Variable,this._solver.addConstraint(new o.StayConstraint(this._attr[s.ZINDEX],o.Strength.required)))}return r(t,[{key:"toJSON",value:function(){return{name:this.name,left:this.left,top:this.top,width:this.width,height:this.height}}},{key:"toString",value:function(){JSON.stringify(this.toJSON(),void 0,2)}},{key:"getValue",value:function(t){return this._attr[t]?this._attr[t].value():void 0}},{key:"_getAttr",value:function(t){if(this._attr[t])return this._attr[t];switch(this._attr[t]=new o.Variable,t){case s.RIGHT:this._getAttr(s.LEFT),this._getAttr(s.WIDTH),this._solver.addConstraint(new o.Equation(this._attr[t],o.plus(this._attr[s.LEFT],this._attr[s.WIDTH])));break;case s.BOTTOM:this._getAttr(s.TOP),this._getAttr(s.HEIGHT),this._solver.addConstraint(new o.Equation(this._attr[t],o.plus(this._attr[s.TOP],this._attr[s.HEIGHT])));break;case s.CENTERX:this._getAttr(s.LEFT),this._getAttr(s.WIDTH),this._solver.addConstraint(new o.Equation(this._attr[t],o.plus(this._attr[s.LEFT],o.divide(this._attr[s.WIDTH],2))));break;case s.CENTERY:this._getAttr(s.TOP),this._getAttr(s.HEIGHT),this._solver.addConstraint(new o.Equation(this._attr[t],o.plus(this._attr[s.TOP],o.divide(this._attr[s.HEIGHT],2))))}return this._attr[t]}},{key:"_getAttrValue",value:function(t){return this._getAttr(t).value}},{key:"name",get:function(){return this._name}},{key:"left",get:function(){return this._getAttrValue(s.LEFT)}},{key:"right",get:function(){return this._getAttrValue(s.RIGHT)}},{key:"width",get:function(){return this._getAttrValue(s.WIDTH)}},{key:"height",get:function(){return this._getAttrValue(s.HEIGHT)}},{key:"intrinsicWidth",get:function(){return this._intrinsicWidth},set:function(t){if(void 0!==t&&t!==this._intrinsicWidth){var e=this._getAttr(s.WIDTH);void 0===this._intrinsicWidth&&this._solver.addEditVar(e,new o.Strength("required",this._name?998:999,1e3,1e3)),this._intrinsicWidth=t,this._solver.suggestValue(e,t),this._solver.resolve()}}},{key:"intrinsicHeight",get:function(){return this._intrinsicHeight},set:function(t){if(void 0!==t&&t!==this._intrinsicHeight){var e=this._getAttr(s.HEIGHT);void 0===this._intrinsicHeight&&this._solver.addEditVar(e,new o.Strength("required",this._name?998:999,1e3,1e3)),this._intrinsicHeight=t,this._solver.suggestValue(e,t),this._solver.resolve()}}},{key:"top",get:function(){return this._getAttrValue(s.TOP)}},{key:"bottom",get:function(){return this._getAttrValue(s.BOTTOM)}},{key:"centerX",get:function(){return this._getAttrValue(s.CENTERX)}},{key:"centerY",get:function(){return this._getAttrValue(s.CENTERY)}},{key:"zIndex",get:function(){return this._getAttrValue(s.ZINDEX)}},{key:"type",get:function(){return this._type}}]),t}(),A=new o.Strength("defaultPriority",0,1e3,1e3);function E(t,e){var i=new o.Variable({value:e});return this._solver.addConstraint(new o.StayConstraint(i,o.Strength.required,0)),i}function _(t){return t?t.name?(this._subViews[t.name]=this._subViews[t.name]||new b({name:t.name,solver:this._solver}),this._subViews[t.name]._type=this._subViews[t.name]._type||t.type,this._subViews[t.name]):(this._subViews[t]=this._subViews[t]||new b({name:t,solver:this._solver}),this._subViews[t]):this._parentSubView}function x(t){var e=4;if(t.view1||"left"!==t.attr1)if(t.view1||"top"!==t.attr1)if(t.view2||"right"!==t.attr2)if(t.view2||"bottom"!==t.attr2)switch(t.attr1){case"left":case"right":case"centerX":case"leading":case"trailing":e=4;break;case"zIndex":e=6;break;default:e=5}else e=2;else e=1;else e=0;else e=3;return this._spacingVars=this._spacingVars||new Array(7),this._spacingExpr=this._spacingExpr||new Array(7),this._spacingVars[e]||(this._spacingVars[e]=new o.Variable,this._solver.addEditVar(this._spacingVars[e]),this._spacingExpr[e]=o.minus(0,this._spacingVars[e]),this._solver.suggestValue(this._spacingVars[e],this._spacing[e])),this._spacingExpr[e]}function S(t){var e=void 0,i=void 0!==t.multiplier?t.multiplier:1,r=void 0!==t.constant?t.constant:0;"default"===r&&(r=x.call(this,t));var n=_.call(this,t.view1)._getAttr(t.attr1),l=void 0;t.attr2===s.CONST?l=E.call(this,void 0,t.constant):(l=_.call(this,t.view2)._getAttr(t.attr2),1!==i&&r?l=o.plus(o.times(l,i),r):r?l=o.plus(l,r):1!==i&&(l=o.times(l,i)));var u=void 0!==t.priority&&t.priority<1e3?new o.Strength("priority",0,t.priority,1e3):A;switch(t.relation){case a.EQU:e=new o.Equation(n,l,u);break;case a.GEQ:e=new o.Inequality(n,o.GEQ,l,u);break;case a.LEQ:e=new o.Inequality(n,o.LEQ,l,u);break;default:throw"Invalid relation specified: "+t.relation}this._solver.addConstraint(e)}var T=function(){function t(e){n(this,t),this._solver=new o.SimplexSolver,this._subViews={},this._parentSubView=new b({solver:this._solver}),this.setSpacing(e&&void 0!==e.spacing?e.spacing:8),e&&(void 0===e.width&&void 0===e.height||this.setSize(e.width,e.height),e.constraints&&this.addConstraints(e.constraints))}return r(t,[{key:"setSize",value:function(t,e){return this._parentSubView.intrinsicWidth=t,this._parentSubView.intrinsicHeight=e,this}},{key:"setSpacing",value:function(t){switch(Array.isArray(t)?t.length:-1){case-1:t=[t,t,t,t,t,t,1];break;case 1:t=[t[0],t[0],t[0],t[0],t[0],t[0],1];break;case 2:t=[t[1],t[0],t[1],t[0],t[0],t[1],1];break;case 3:t=[t[1],t[0],t[1],t[0],t[0],t[1],t[2]];break;case 6:t=[t[0],t[1],t[2],t[3],t[4],t[5],1];break;case 7:break;default:throw"Invalid spacing syntax"}if(!function(t,e){if(t===e)return!0;if(!t||!e)return!1;for(var i=0;i<7;i++)if(t[i]!==e[i])return!1;return!0}(this._spacing,t)&&(this._spacing=t,this._spacingVars)){for(var e=0;e<this._spacingVars.length;e++)this._spacingVars[e]&&this._solver.suggestValue(this._spacingVars[e],this._spacing[e]);this._solver.resolve()}return this}},{key:"addConstraint",value:function(t){return S.call(this,t),this}},{key:"addConstraints",value:function(t){for(var e=0;e<t.length;e++)S.call(this,t[e]);return this}},{key:"width",get:function(){return this._parentSubView.intrinsicWidth}},{key:"height",get:function(){return this._parentSubView.intrinsicHeight}},{key:"fittingWidth",get:function(){return this._parentSubView.width}},{key:"fittingHeight",get:function(){return this._parentSubView.height}},{key:"subViews",get:function(){return this._subViews}}]),t}(),C={Attribute:s,Relation:a,Priority:{REQUIRED:1e3,DEFAULTHIGH:750,DEFAULTLOW:250},VisualFormat:v,View:T,SubView:b};e.exports=C},{"cassowary/bin/c":2}],2:[function(t,e,i){(function(){var i;(function(i){"use strict";try{(function(){}).bind(i)}catch(t){Object.defineProperty(Function.prototype,"bind",{value:function(t){var e=this;return function(){return e.apply(t,arguments)}},enumerable:!1,configurable:!0,writable:!0})}var r=void 0!==i.HTMLElement,n=1e-8,o={},s=function(t,e){if(t&&e){if("function"==typeof t[e])return t[e];var i=t.prototype;if(i&&"function"==typeof i[e])return i[e];if(i!==Object.prototype&&i!==Function.prototype)return"function"==typeof t.__super__?s(t.__super__,e):void 0}},a=i.c={debug:!1,trace:!1,verbose:!1,traceAdded:!1,GC:!1,GEQ:1,LEQ:2,inherit:function(t){var e=null,n=null;t.extends&&(n=t.extends,delete t.extends),t.initialize&&(e=t.initialize,delete t.initialize);var s=e||function(){};Object.defineProperty(s,"__super__",{value:n||Object,enumerable:!1,configurable:!0,writable:!1}),t._t&&(o[t._t]=s);var a=s.prototype=Object.create(n?n.prototype:Object.prototype);if(this.extend(a,t),r&&n&&n.prototype instanceof i.HTMLElement){var l=s,u=function(t){for(var e=null;t&&t!=Object.prototype;){if(t.tagName){e=t.tagName;break}t=t.prototype}return e||"div"}(a),h=function(t){return t.__proto__=a,l.apply(t,arguments),a.created&&t.created(),a.decorate&&t.decorate(),t};this.extend(a,{upgrade:h}),(s=function(){return h(i.document.createElement(u))}).prototype=a,this.extend(s,{ctor:l})}return s},extend:function(t,e){return this.own(e,function(i){var r=Object.getOwnPropertyDescriptor(e,i);try{"function"==typeof r.get||"function"==typeof r.set?Object.defineProperty(t,i,r):"function"==typeof r.value||"_"===i.charAt(0)?(r.writable=!0,r.configurable=!0,r.enumerable=!1,Object.defineProperty(t,i,r)):t[i]=e[i]}catch(t){}}),t},own:function(t,e,r){return Object.getOwnPropertyNames(t).forEach(e,r||i),t},traceprint:function(t){a.verbose&&console.log(t)},fnenterprint:function(t){console.log("* "+t)},fnexitprint:function(t){console.log("- "+t)},assert:function(t,e){if(!t)throw new a.InternalError("Assertion failed: "+e)},plus:function(t,e){return t instanceof a.Expression||(t=new a.Expression(t)),e instanceof a.Expression||(e=new a.Expression(e)),t.plus(e)},minus:function(t,e){return t instanceof a.Expression||(t=new a.Expression(t)),e instanceof a.Expression||(e=new a.Expression(e)),t.minus(e)},times:function(t,e){return("number"==typeof t||t instanceof a.Variable)&&(t=new a.Expression(t)),("number"==typeof e||e instanceof a.Variable)&&(e=new a.Expression(e)),t.times(e)},divide:function(t,e){return("number"==typeof t||t instanceof a.Variable)&&(t=new a.Expression(t)),("number"==typeof e||e instanceof a.Variable)&&(e=new a.Expression(e)),t.divide(e)},approx:function(t,e){return t===e||(i=t instanceof a.Variable?t.value:t,r=e instanceof a.Variable?e.value:e,0==i?n>Math.abs(r):0==r?n>Math.abs(i):Math.abs(i-r)<Math.abs(i)*n);var i,r},_inc:function(t){return function(){return t++}}(0),parseJSON:function(t){return JSON.parse(t,function(t,e){if("object"!=typeof e||"string"!=typeof e._t)return e;var i=e._t,r=o[i];if(i&&r){var n=s(r,"fromJSON");if(n)return n(e,r)}return e})}};"function"==typeof t&&void 0!==e&&"undefined"==typeof load&&(i.exports=a)})(this),function(t){"use strict";var e=function(t){return t.hashCode?t.hashCode:""+t},i=function(t,e){Object.keys(t).forEach(function(i){e[i]=t[i]})},r={};t.HashTable=t.inherit({initialize:function(){this.size=0,this._store={},this._keyStrMap={},this._deleted=0},set:function(t,i){var r=e(t);this._store.hasOwnProperty(r)||this.size++,this._store[r]=i,this._keyStrMap[r]=t},get:function(t){return this.size?(t=e(t),void 0!==this._store[t]?this._store[t]:null):null},clear:function(){this.size=0,this._store={},this._keyStrMap={}},_compact:function(){var t={};i(this._store,t),this._store=t},_compactThreshold:100,_perhapsCompact:function(){this._size>64||this._deleted>this._compactThreshold&&(this._compact(),this._deleted=0)},delete:function(t){t=e(t),this._store.hasOwnProperty(t)&&(this._deleted++,delete this._store[t],this.size>0&&this.size--)},each:function(t,e){if(this.size){this._perhapsCompact();var i=this._store,r=this._keyStrMap;Object.keys(this._store).forEach(function(n){t.call(e||null,r[n],i[n])},this)}},escapingEach:function(t,e){if(this.size){this._perhapsCompact();for(var i=this,n=this._store,o=this._keyStrMap,s=r,a=Object.keys(n),l=0;a.length>l;l++)if(function(r){i._store.hasOwnProperty(r)&&(s=t.call(e||null,o[r],n[r]))}(a[l]),s){if(void 0!==s.retval)return s;if(s.brk)break}}},clone:function(){var e=new t.HashTable;return this.size&&(e.size=this.size,i(this._store,e._store),i(this._keyStrMap,e._keyStrMap)),e},equals:function(e){if(e===this)return!0;if(!(e instanceof t.HashTable)||e._size!==this._size)return!1;for(var i=Object.keys(this._store),r=0;i.length>r;r++){var n=i[r];if(this._keyStrMap[n]!==e._keyStrMap[n]||this._store[n]!==e._store[n])return!1}return!0},toString:function(){var t="";return this.each(function(e,i){t+=e+" => "+i+"\n"}),t}})}(this.c||e.parent.exports||{}),function(t){"use strict";t.HashSet=t.inherit({_t:"c.HashSet",initialize:function(){this.storage=[],this.size=0},add:function(t){var e=this.storage;e.indexOf(t),-1==e.indexOf(t)&&e.push(t),this.size=this.storage.length},values:function(){return this.storage},has:function(t){return-1!=this.storage.indexOf(t)},delete:function(t){var e=this.storage.indexOf(t);return-1==e?null:(this.storage.splice(e,1)[0],void(this.size=this.storage.length))},clear:function(){this.storage.length=0},each:function(t,e){this.size&&this.storage.forEach(t,e)},escapingEach:function(t,e){this.size&&this.storage.forEach(t,e)},toString:function(){var t=this.size+" {",e=!0;return this.each(function(i){e?e=!1:t+=", ",t+=i}),t+="}\n"},toJSON:function(){var t=[];return this.each(function(e){t.push(e.toJSON())}),{_t:"c.HashSet",data:t}},fromJSON:function(e){var i=new t.HashSet;return e.data&&(i.size=e.data.length,i.storage=e.data),i}})}(this.c||e.parent.exports||{}),function(t){"use strict";t.Error=t.inherit({initialize:function(t){t&&(this._description=t)},_name:"c.Error",_description:"An error has occured in Cassowary",set description(t){this._description=t},get description(){return"("+this._name+") "+this._description},get message(){return this.description},toString:function(){return this.description}});var e=function(e,i){return t.inherit({extends:t.Error,initialize:function(){t.Error.apply(this,arguments)},_name:e||"",_description:i||""})};t.ConstraintNotFound=e("c.ConstraintNotFound","Tried to remove a constraint never added to the tableu"),t.InternalError=e("c.InternalError"),t.NonExpression=e("c.NonExpression","The resulting expression would be non"),t.NotEnoughStays=e("c.NotEnoughStays","There are not enough stays to give specific values to every variable"),t.RequiredFailure=e("c.RequiredFailure","A required constraint cannot be satisfied"),t.TooDifficult=e("c.TooDifficult","The constraints are too difficult to solve")}(this.c||e.parent.exports||{}),function(t){"use strict";t.SymbolicWeight=t.inherit({_t:"c.SymbolicWeight",initialize:function(){this.value=0;for(var t=1,e=arguments.length-1;e>=0;--e)this.value+=arguments[e]*t,t*=1e3},toJSON:function(){return{_t:this._t,value:this.value}}})}(this.c||e.parent.exports||{}),(i=this.c||(void 0!==e?e.parent.exports.c:{})).Strength=i.inherit({initialize:function(t,e,r,n){this.name=t,this.symbolicWeight=e instanceof i.SymbolicWeight?e:new i.SymbolicWeight(e,r,n)},get required(){return this===i.Strength.required},toString:function(){return this.name+(this.isRequired?"":":"+this.symbolicWeight)}}),i.Strength.required=new i.Strength("<Required>",1e3,1e3,1e3),i.Strength.strong=new i.Strength("strong",1,0,0),i.Strength.medium=new i.Strength("medium",0,1,0),i.Strength.weak=new i.Strength("weak",0,0,1),function(t){"use strict";t.AbstractVariable=t.inherit({isDummy:!1,isExternal:!1,isPivotable:!1,isRestricted:!1,_init:function(e,i){this.hashCode=t._inc(),this.name=(i||"")+this.hashCode,e&&(void 0!==e.name&&(this.name=e.name),void 0!==e.value&&(this.value=e.value),void 0!==e.prefix&&(this._prefix=e.prefix))},_prefix:"",name:"",value:0,toJSON:function(){var t={};return this._t&&(t._t=this._t),this.name&&(t.name=this.name),void 0!==this.value&&(t.value=this.value),this._prefix&&(t._prefix=this._prefix),this._t&&(t._t=this._t),t},fromJSON:function(e,i){var r=new i;return t.extend(r,e),r},toString:function(){return this._prefix+"["+this.name+":"+this.value+"]"}}),t.Variable=t.inherit({_t:"c.Variable",extends:t.AbstractVariable,initialize:function(e){this._init(e,"v");var i=t.Variable._map;i&&(i[this.name]=this)},isExternal:!0}),t.DummyVariable=t.inherit({_t:"c.DummyVariable",extends:t.AbstractVariable,initialize:function(t){this._init(t,"d")},isDummy:!0,isRestricted:!0,value:"dummy"}),t.ObjectiveVariable=t.inherit({_t:"c.ObjectiveVariable",extends:t.AbstractVariable,initialize:function(t){this._init(t,"o")},value:"obj"}),t.SlackVariable=t.inherit({_t:"c.SlackVariable",extends:t.AbstractVariable,initialize:function(t){this._init(t,"s")},isPivotable:!0,isRestricted:!0,value:"slack"})}(this.c||e.parent.exports||{}),function(t){"use strict";t.Point=t.inherit({initialize:function(e,i,r){if(e instanceof t.Variable)this._x=e;else{var n={value:e};r&&(n.name="x"+r),this._x=new t.Variable(n)}if(i instanceof t.Variable)this._y=i;else{var o={value:i};r&&(o.name="y"+r),this._y=new t.Variable(o)}},get x(){return this._x},set x(e){e instanceof t.Variable?this._x=e:this._x.value=e},get y(){return this._y},set y(e){e instanceof t.Variable?this._y=e:this._y.value=e},toString:function(){return"("+this.x+", "+this.y+")"}})}(this.c||e.parent.exports||{}),function(t){"use strict";t.Expression=t.inherit({initialize:function(e,i,r){t.GC&&console.log("new c.Expression"),this.constant="number"!=typeof r||isNaN(r)?0:r,this.terms=new t.HashTable,e instanceof t.AbstractVariable?this.setVariable(e,"number"==typeof i?i:1):"number"==typeof e&&(isNaN(e)?console.trace():this.constant=e)},initializeFromHash:function(e,i){return t.verbose&&(console.log("*******************************"),console.log("clone c.initializeFromHash"),console.log("*******************************")),t.GC&&console.log("clone c.Expression"),this.constant=e,this.terms=i.clone(),this},multiplyMe:function(t){this.constant*=t;var e=this.terms;return e.each(function(i,r){e.set(i,r*t)}),this},clone:function(){t.verbose&&(console.log("*******************************"),console.log("clone c.Expression"),console.log("*******************************"));var e=new t.Expression;return e.initializeFromHash(this.constant,this.terms),e},times:function(e){if("number"==typeof e)return this.clone().multiplyMe(e);if(this.isConstant)return e.times(this.constant);if(e.isConstant)return this.times(e.constant);throw new t.NonExpression},plus:function(e){return e instanceof t.Expression?this.clone().addExpression(e,1):e instanceof t.Variable?this.clone().addVariable(e,1):void 0},minus:function(e){return e instanceof t.Expression?this.clone().addExpression(e,-1):e instanceof t.Variable?this.clone().addVariable(e,-1):void 0},divide:function(e){if("number"==typeof e){if(t.approx(e,0))throw new t.NonExpression;return this.times(1/e)}if(e instanceof t.Expression){if(!e.isConstant)throw new t.NonExpression;return this.times(1/e.constant)}},addExpression:function(e,i,r,n){return e instanceof t.AbstractVariable&&(e=new t.Expression(e),t.trace&&console.log("addExpression: Had to cast a var to an expression")),i=i||1,this.constant+=i*e.constant,e.terms.each(function(t,e){this.addVariable(t,e*i,r,n)},this),this},addVariable:function(e,i,r,n){null==i&&(i=1),t.trace&&console.log("c.Expression::addVariable():",e,i);var o=this.terms.get(e);if(o){var s=o+i;0==s||t.approx(s,0)?(n&&n.noteRemovedVariable(e,r),this.terms.delete(e)):this.setVariable(e,s)}else t.approx(i,0)||(this.setVariable(e,i),n&&n.noteAddedVariable(e,r));return this},setVariable:function(t,e){return this.terms.set(t,e),this},anyPivotableVariable:function(){if(this.isConstant)throw new t.InternalError("anyPivotableVariable called on a constant");var e=this.terms.escapingEach(function(t){return t.isPivotable?{retval:t}:void 0});return e&&void 0!==e.retval?e.retval:null},substituteOut:function(e,i,r,n){t.trace&&(t.fnenterprint("CLE:substituteOut: "+e+", "+i+", "+r+", ..."),t.traceprint("this = "+this));var o=this.setVariable.bind(this),s=this.terms,a=s.get(e);s.delete(e),this.constant+=a*i.constant,i.terms.each(function(e,i){var l=s.get(e);if(l){var u=l+a*i;t.approx(u,0)?(n.noteRemovedVariable(e,r),s.delete(e)):o(e,u)}else o(e,a*i),n&&n.noteAddedVariable(e,r)}),t.trace&&t.traceprint("Now this is "+this)},changeSubject:function(t,e){this.setVariable(t,this.newSubject(e))},newSubject:function(e){t.trace&&t.fnenterprint("newSubject:"+e);var i=1/this.terms.get(e);return this.terms.delete(e),this.multiplyMe(-i),i},coefficientFor:function(t){return this.terms.get(t)||0},get isConstant(){return 0==this.terms.size},toString:function(){var e="",i=!1;if(!t.approx(this.constant,0)||this.isConstant){if(e+=this.constant,this.isConstant)return e;i=!0}return this.terms.each(function(t,r){i&&(e+=" + "),e+=r+"*"+t,i=!0}),e},equals:function(e){return e===this||e instanceof t.Expression&&e.constant===this.constant&&e.terms.equals(this.terms)},Plus:function(t,e){return t.plus(e)},Minus:function(t,e){return t.minus(e)},Times:function(t,e){return t.times(e)},Divide:function(t,e){return t.divide(e)}})}(this.c||e.parent.exports||{}),function(t){"use strict";t.AbstractConstraint=t.inherit({initialize:function(e,i){this.hashCode=t._inc(),this.strength=e||t.Strength.required,this.weight=i||1},isEditConstraint:!1,isInequality:!1,isStayConstraint:!1,get required(){return this.strength===t.Strength.required},toString:function(){return this.strength+" {"+this.weight+"} ("+this.expression+")"}});var e=t.AbstractConstraint.prototype.toString,i=function(e,i,r){t.AbstractConstraint.call(this,i||t.Strength.strong,r),this.variable=e,this.expression=new t.Expression(e,-1,e.value)};t.EditConstraint=t.inherit({extends:t.AbstractConstraint,initialize:function(){i.apply(this,arguments)},isEditConstraint:!0,toString:function(){return"edit:"+e.call(this)}}),t.StayConstraint=t.inherit({extends:t.AbstractConstraint,initialize:function(){i.apply(this,arguments)},isStayConstraint:!0,toString:function(){return"stay:"+e.call(this)}});var r=t.Constraint=t.inherit({extends:t.AbstractConstraint,initialize:function(e,i,r){t.AbstractConstraint.call(this,i,r),this.expression=e}});t.Inequality=t.inherit({extends:t.Constraint,_cloneOrNewCle:function(e){return e.clone?e.clone():new t.Expression(e)},initialize:function(e,i,n,o,s){var a=e instanceof t.Expression,l=n instanceof t.Expression,u=e instanceof t.AbstractVariable,h=n instanceof t.AbstractVariable,c="number"==typeof e,p="number"==typeof n;if((a||c)&&h){var d=e,f=i,y=n,m=o,g=s;if(r.call(this,this._cloneOrNewCle(d),m,g),f==t.LEQ)this.expression.multiplyMe(-1),this.expression.addVariable(y);else{if(f!=t.GEQ)throw new t.InternalError("Invalid operator in c.Inequality constructor");this.expression.addVariable(y,-1)}}else if(u&&(l||p)){d=n,f=i,y=e,m=o,g=s;if(r.call(this,this._cloneOrNewCle(d),m,g),f==t.GEQ)this.expression.multiplyMe(-1),this.expression.addVariable(y);else{if(f!=t.LEQ)throw new t.InternalError("Invalid operator in c.Inequality constructor");this.expression.addVariable(y,-1)}}else{if(a&&p){var w=e,v=(f=i,n);m=o,g=s;if(r.call(this,this._cloneOrNewCle(w),m,g),f==t.LEQ)this.expression.multiplyMe(-1),this.expression.addExpression(this._cloneOrNewCle(v));else{if(f!=t.GEQ)throw new t.InternalError("Invalid operator in c.Inequality constructor");this.expression.addExpression(this._cloneOrNewCle(v),-1)}return this}if(c&&l){w=n,f=i,v=e,m=o,g=s;if(r.call(this,this._cloneOrNewCle(w),m,g),f==t.GEQ)this.expression.multiplyMe(-1),this.expression.addExpression(this._cloneOrNewCle(v));else{if(f!=t.LEQ)throw new t.InternalError("Invalid operator in c.Inequality constructor");this.expression.addExpression(this._cloneOrNewCle(v),-1)}return this}if(a&&l){w=e,f=i,v=n,m=o,g=s;if(r.call(this,this._cloneOrNewCle(v),m,g),f==t.GEQ)this.expression.multiplyMe(-1),this.expression.addExpression(this._cloneOrNewCle(w));else{if(f!=t.LEQ)throw new t.InternalError("Invalid operator in c.Inequality constructor");this.expression.addExpression(this._cloneOrNewCle(w),-1)}}else{if(a)return r.call(this,e,i,n);if(i==t.GEQ)r.call(this,new t.Expression(n),o,s),this.expression.multiplyMe(-1),this.expression.addVariable(e);else{if(i!=t.LEQ)throw new t.InternalError("Invalid operator in c.Inequality constructor");r.call(this,new t.Expression(n),o,s),this.expression.addVariable(e,-1)}}}},isInequality:!0,toString:function(){return r.prototype.toString.call(this)+" >= 0) id: "+this.hashCode}}),t.Equation=t.inherit({extends:t.Constraint,initialize:function(e,i,n,o){if(e instanceof t.Expression&&!i||i instanceof t.Strength)r.call(this,e,i,n);else if(e instanceof t.AbstractVariable&&i instanceof t.Expression){var s=e,a=i,l=n,u=o;r.call(this,a.clone(),l,u),this.expression.addVariable(s,-1)}else if(e instanceof t.AbstractVariable&&"number"==typeof i){s=e;var h=i;l=n,u=o;r.call(this,new t.Expression(h),l,u),this.expression.addVariable(s,-1)}else if(e instanceof t.Expression&&i instanceof t.AbstractVariable){a=e,s=i,l=n,u=o;r.call(this,a.clone(),l,u),this.expression.addVariable(s,-1)}else{if(!(e instanceof t.Expression||e instanceof t.AbstractVariable||"number"==typeof e)||!(i instanceof t.Expression||i instanceof t.AbstractVariable||"number"==typeof i))throw"Bad initializer to c.Equation";e=e instanceof t.Expression?e.clone():new t.Expression(e),i=i instanceof t.Expression?i.clone():new t.Expression(i),r.call(this,e,n,o),this.expression.addExpression(i,-1)}t.assert(this.strength instanceof t.Strength,"_strength not set")},toString:function(){return r.prototype.toString.call(this)+" = 0)"}})}(this.c||e.parent.exports||{}),function(t){"use strict";t.EditInfo=t.inherit({initialize:function(t,e,i,r,n){this.constraint=t,this.editPlus=e,this.editMinus=i,this.prevEditConstant=r,this.index=n},toString:function(){return"<cn="+this.constraint+", ep="+this.editPlus+", em="+this.editMinus+", pec="+this.prevEditConstant+", index="+this.index+">"}})}(this.c||e.parent.exports||{}),function(t){"use strict";t.Tableau=t.inherit({initialize:function(){this.columns=new t.HashTable,this.rows=new t.HashTable,this._infeasibleRows=new t.HashSet,this._externalRows=new t.HashSet,this._externalParametricVars=new t.HashSet},noteRemovedVariable:function(e,i){t.trace&&console.log("c.Tableau::noteRemovedVariable: ",e,i);var r=this.columns.get(e);i&&r&&r.delete(i)},noteAddedVariable:function(t,e){e&&this.insertColVar(t,e)},getInternalInfo:function(){var t="Tableau Information:\n";return t+="Rows: "+this.rows.size,t+=" (= "+(this.rows.size-1)+" constraints)",t+="\nColumns: "+this.columns.size,t+="\nInfeasible Rows: "+this._infeasibleRows.size,t+="\nExternal basic variables: "+this._externalRows.size,t+="\nExternal parametric variables: ",(t+=this._externalParametricVars.size)+"\n"},toString:function(){var t="Tableau:\n";return this.rows.each(function(e,i){t+=e,t+=" <==> ",t+=i,t+="\n"}),t+="\nColumns:\n",t+=this.columns,t+="\nInfeasible rows: ",t+=this._infeasibleRows,t+="External basic variables: ",t+=this._externalRows,t+="External parametric variables: ",t+=this._externalParametricVars},insertColVar:function(e,i){var r=this.columns.get(e);r||(r=new t.HashSet,this.columns.set(e,r)),r.add(i)},addRow:function(e,i){t.trace&&t.fnenterprint("addRow: "+e+", "+i),this.rows.set(e,i),i.terms.each(function(t){this.insertColVar(t,e),t.isExternal&&this._externalParametricVars.add(t)},this),e.isExternal&&this._externalRows.add(e),t.trace&&t.traceprint(""+this)},removeColumn:function(e){t.trace&&t.fnenterprint("removeColumn:"+e);var i=this.columns.get(e);i?(this.columns.delete(e),i.each(function(t){this.rows.get(t).terms.delete(e)},this)):t.trace&&console.log("Could not find var",e,"in columns"),e.isExternal&&(this._externalRows.delete(e),this._externalParametricVars.delete(e))},removeRow:function(e){t.trace&&t.fnenterprint("removeRow:"+e);var i=this.rows.get(e);return t.assert(null!=i),i.terms.each(function(i){var r=this.columns.get(i);null!=r&&(t.trace&&console.log("removing from varset:",e),r.delete(e))},this),this._infeasibleRows.delete(e),e.isExternal&&this._externalRows.delete(e),this.rows.delete(e),t.trace&&t.fnexitprint("returning "+i),i},substituteOut:function(e,i){t.trace&&t.fnenterprint("substituteOut:"+e+", "+i),t.trace&&t.traceprint(""+this),this.columns.get(e).each(function(t){var r=this.rows.get(t);r.substituteOut(e,i,t,this),t.isRestricted&&0>r.constant&&this._infeasibleRows.add(t)},this),e.isExternal&&(this._externalRows.add(e),this._externalParametricVars.delete(e)),this.columns.delete(e)},columnsHasKey:function(t){return!!this.columns.get(t)}})}(this.c||e.parent.exports||{}),function(t){var e=t.Tableau.prototype,i=t.Strength.weak;t.SimplexSolver=t.inherit({extends:t.Tableau,initialize:function(){t.Tableau.call(this),this._stayMinusErrorVars=[],this._stayPlusErrorVars=[],this._errorVars=new t.HashTable,this._markerVars=new t.HashTable,this._objective=new t.ObjectiveVariable({name:"Z"}),this._editVarMap=new t.HashTable,this._editVarList=[],this._slackCounter=0,this._artificialCounter=0,this._dummyCounter=0,this.autoSolve=!0,this._fNeedsSolving=!1,this._optimizeCount=0,this.rows.set(this._objective,new t.Expression),this._stkCedcns=[0],t.trace&&t.traceprint("objective expr == "+this.rows.get(this._objective))},addLowerBound:function(e,i){var r=new t.Inequality(e,t.GEQ,new t.Expression(i));return this.addConstraint(r)},addUpperBound:function(e,i){var r=new t.Inequality(e,t.LEQ,new t.Expression(i));return this.addConstraint(r)},addBounds:function(t,e,i){return this.addLowerBound(t,e),this.addUpperBound(t,i),this},add:function(){for(var t=0;arguments.length>t;t++)this.addConstraint(arguments[t]);return this},addConstraint:function(e){t.trace&&t.fnenterprint("addConstraint: "+e);var i=Array(2),r=Array(1),n=this.newExpression(e,i,r);if(r=r[0],this.tryAddingDirectly(n)||this.addWithArtificialVariable(n),this._fNeedsSolving=!0,e.isEditConstraint){var o=this._editVarMap.size,s=i[0],a=i[1];!s instanceof t.SlackVariable&&console.warn("cvEplus not a slack variable =",s),!a instanceof t.SlackVariable&&console.warn("cvEminus not a slack variable =",a),t.debug&&console.log("new c.EditInfo("+e+", "+s+", "+a+", "+r+", "+o+")");var l=new t.EditInfo(e,s,a,r,o);this._editVarMap.set(e.variable,l),this._editVarList[o]={v:e.variable,info:l}}return this.autoSolve&&(this.optimize(this._objective),this._setExternalVariables()),this},addConstraintNoException:function(e){t.trace&&t.fnenterprint("addConstraintNoException: "+e);try{return this.addConstraint(e),!0}catch(t){return!1}},addEditVar:function(e,i){return t.trace&&t.fnenterprint("addEditVar: "+e+" @ "+i),this.addConstraint(new t.EditConstraint(e,i||t.Strength.strong))},beginEdit:function(){return t.assert(this._editVarMap.size>0,"_editVarMap.size > 0"),this._infeasibleRows.clear(),this._resetStayConstants(),this._stkCedcns.push(this._editVarMap.size),this},endEdit:function(){return t.assert(this._editVarMap.size>0,"_editVarMap.size > 0"),this.resolve(),this._stkCedcns.pop(),this.removeEditVarsTo(this._stkCedcns[this._stkCedcns.length-1]),this},removeAllEditVars:function(){return this.removeEditVarsTo(0)},removeEditVarsTo:function(e){try{for(var i=this._editVarList.length,r=e;i>r;r++)this._editVarList[r]&&this.removeConstraint(this._editVarMap.get(this._editVarList[r].v).constraint);return this._editVarList.length=e,t.assert(this._editVarMap.size==e,"_editVarMap.size == n"),this}catch(e){throw new t.InternalError("Constraint not found in removeEditVarsTo")}},addPointStays:function(e){return t.trace&&console.log("addPointStays",e),e.forEach(function(t,e){this.addStay(t.x,i,Math.pow(2,e)),this.addStay(t.y,i,Math.pow(2,e))},this),this},addStay:function(e,r,n){var o=new t.StayConstraint(e,r||i,n||1);return this.addConstraint(o)},removeConstraint:function(t){return this.removeConstraintInternal(t),this},removeConstraintInternal:function(e){t.trace&&t.fnenterprint("removeConstraintInternal: "+e),t.trace&&t.traceprint(""+this),this._fNeedsSolving=!0,this._resetStayConstants();var i=this.rows.get(this._objective),r=this._errorVars.get(e);t.trace&&t.traceprint("eVars == "+r),null!=r&&r.each(function(n){var o=this.rows.get(n);null==o?i.addVariable(n,-e.weight*e.strength.symbolicWeight.value,this._objective,this):i.addExpression(o,-e.weight*e.strength.symbolicWeight.value,this._objective,this),t.trace&&t.traceprint("now eVars == "+r)},this);var n=this._markerVars.get(e);if(this._markerVars.delete(e),null==n)throw new t.InternalError("Constraint not found in removeConstraintInternal");if(t.trace&&t.traceprint("Looking to remove var "+n),null==this.rows.get(n)){var o=this.columns.get(n);t.trace&&t.traceprint("Must pivot -- columns are "+o);var s=null,a=0;o.each(function(e){if(e.isRestricted){var i=this.rows.get(e),r=i.coefficientFor(n);if(t.trace&&t.traceprint("Marker "+n+"'s coefficient in "+i+" is "+r),0>r){var o=-i.constant/r;(null==s||a>o||t.approx(o,a)&&e.hashCode<s.hashCode)&&(a=o,s=e)}}},this),null==s&&(t.trace&&t.traceprint("exitVar is still null"),o.each(function(t){if(t.isRestricted){var e=this.rows.get(t),i=e.coefficientFor(n),r=e.constant/i;(null==s||a>r)&&(a=r,s=t)}},this)),null==s&&(0==o.size?this.removeColumn(n):o.escapingEach(function(t){return t!=this._objective?(s=t,{brk:!0}):void 0},this)),null!=s&&this.pivot(n,s)}if(null!=this.rows.get(n)&&this.removeRow(n),null!=r&&r.each(function(t){t!=n&&this.removeColumn(t)},this),e.isStayConstraint){if(null!=r)for(var l=0;this._stayPlusErrorVars.length>l;l++)r.delete(this._stayPlusErrorVars[l]),r.delete(this._stayMinusErrorVars[l])}else if(e.isEditConstraint){t.assert(null!=r,"eVars != null");var u=this._editVarMap.get(e.variable);this.removeColumn(u.editMinus),this._editVarMap.delete(e.variable)}return null!=r&&this._errorVars.delete(r),this.autoSolve&&(this.optimize(this._objective),this._setExternalVariables()),this},reset:function(){throw t.trace&&t.fnenterprint("reset"),new t.InternalError("reset not implemented")},resolveArray:function(e){t.trace&&t.fnenterprint("resolveArray"+e);var i=e.length;this._editVarMap.each(function(t,r){var n=r.index;i>n&&this.suggestValue(t,e[n])},this),this.resolve()},resolvePair:function(t,e){this.suggestValue(this._editVarList[0].v,t),this.suggestValue(this._editVarList[1].v,e),this.resolve()},resolve:function(){t.trace&&t.fnenterprint("resolve()"),this.dualOptimize(),this._setExternalVariables(),this._infeasibleRows.clear(),this._resetStayConstants()},suggestValue:function(e,i){t.trace&&console.log("suggestValue("+e+", "+i+")");var r=this._editVarMap.get(e);if(!r)throw new t.Error("suggestValue for variable "+e+", but var is not an edit variable");var n=i-r.prevEditConstant;return r.prevEditConstant=i,this.deltaEditConstant(n,r.editPlus,r.editMinus),this},solve:function(){return this._fNeedsSolving&&(this.optimize(this._objective),this._setExternalVariables()),this},setEditedValue:function(e,i){if(!this.columnsHasKey(e)&&null==this.rows.get(e))return e.value=i,this;if(!t.approx(i,e.value)){this.addEditVar(e),this.beginEdit();try{this.suggestValue(e,i)}catch(e){throw new t.InternalError("Error in setEditedValue")}this.endEdit()}return this},addVar:function(e){if(!this.columnsHasKey(e)&&null==this.rows.get(e)){try{this.addStay(e)}catch(e){throw new t.InternalError("Error in addVar -- required failure is impossible")}t.trace&&t.traceprint("added initial stay on "+e)}return this},getInternalInfo:function(){var t=e.getInternalInfo.call(this);return t+="\nSolver info:\n",t+="Stay Error Variables: ",t+=this._stayPlusErrorVars.length+this._stayMinusErrorVars.length,t+=" ("+this._stayPlusErrorVars.length+" +, ",t+=this._stayMinusErrorVars.length+" -)\n",(t+="Edit Variables: "+this._editVarMap.size)+"\n"},getDebugInfo:function(){return""+this+this.getInternalInfo()+"\n"},toString:function(){var t=e.getInternalInfo.call(this);return t+="\n_stayPlusErrorVars: ",t+="["+this._stayPlusErrorVars+"]",t+="\n_stayMinusErrorVars: ",t+="["+this._stayMinusErrorVars+"]",t+="\n",(t+="_editVarMap:\n"+this._editVarMap)+"\n"},getConstraintMap:function(){return this._markerVars},addWithArtificialVariable:function(e){t.trace&&t.fnenterprint("addWithArtificialVariable: "+e);var i=new t.SlackVariable({value:++this._artificialCounter,prefix:"a"}),r=new t.ObjectiveVariable({name:"az"}),n=e.clone();t.trace&&t.traceprint("before addRows:\n"+this),this.addRow(r,n),this.addRow(i,e),t.trace&&t.traceprint("after addRows:\n"+this),this.optimize(r);var o=this.rows.get(r);if(t.trace&&t.traceprint("azTableauRow.constant == "+o.constant),!t.approx(o.constant,0))throw this.removeRow(r),this.removeColumn(i),new t.RequiredFailure;var s=this.rows.get(i);if(null!=s){if(s.isConstant)return this.removeRow(i),void this.removeRow(r);var a=s.anyPivotableVariable();this.pivot(a,i)}t.assert(null==this.rows.get(i),"rowExpression(av) == null"),this.removeColumn(i),this.removeRow(r)},tryAddingDirectly:function(e){t.trace&&t.fnenterprint("tryAddingDirectly: "+e);var i=this.chooseSubject(e);return null==i?(t.trace&&t.fnexitprint("returning false"),!1):(e.newSubject(i),this.columnsHasKey(i)&&this.substituteOut(i,e),this.addRow(i,e),t.trace&&t.fnexitprint("returning true"),!0)},chooseSubject:function(e){t.trace&&t.fnenterprint("chooseSubject: "+e);var i=null,r=!1,n=!1,o=e.terms,s=o.escapingEach(function(t,e){if(r){if(!t.isRestricted&&!this.columnsHasKey(t))return{retval:t}}else if(t.isRestricted){if(!n&&!t.isDummy&&0>e){var o=this.columns.get(t);(null==o||1==o.size&&this.columnsHasKey(this._objective))&&(i=t,n=!0)}}else i=t,r=!0},this);if(s&&void 0!==s.retval)return s.retval;if(null!=i)return i;var a=0;s=o.escapingEach(function(t,e){return t.isDummy?void(this.columnsHasKey(t)||(i=t,a=e)):{retval:null}},this);if(s&&void 0!==s.retval)return s.retval;if(!t.approx(e.constant,0))throw new t.RequiredFailure;return a>0&&e.multiplyMe(-1),i},deltaEditConstant:function(e,i,r){t.trace&&t.fnenterprint("deltaEditConstant :"+e+", "+i+", "+r);var n=this.rows.get(i);if(null!=n)return n.constant+=e,void(0>n.constant&&this._infeasibleRows.add(i));var o=this.rows.get(r);if(null!=o)return o.constant+=-e,void(0>o.constant&&this._infeasibleRows.add(r));var s=this.columns.get(r);s||console.log("columnVars is null -- tableau is:\n"+this),s.each(function(t){var i=this.rows.get(t),n=i.coefficientFor(r);i.constant+=n*e,t.isRestricted&&0>i.constant&&this._infeasibleRows.add(t)},this)},dualOptimize:function(){t.trace&&t.fnenterprint("dualOptimize:");for(var e=this.rows.get(this._objective);this._infeasibleRows.size;){var i=this._infeasibleRows.values()[0];this._infeasibleRows.delete(i);var r=null,n=this.rows.get(i);if(n&&0>n.constant){var o,s=Number.MAX_VALUE;if(n.terms.each(function(i,n){if(n>0&&i.isPivotable){var a=e.coefficientFor(i);(s>(o=a/n)||t.approx(o,s)&&i.hashCode<r.hashCode)&&(r=i,s=o)}}),s==Number.MAX_VALUE)throw new t.InternalError("ratio == nil (MAX_VALUE) in dualOptimize");this.pivot(r,i)}}},newExpression:function(e,i,r){t.trace&&(t.fnenterprint("newExpression: "+e),t.traceprint("cn.isInequality == "+e.isInequality),t.traceprint("cn.required == "+e.required));var n=e.expression,o=new t.Expression(n.constant),s=new t.SlackVariable,a=new t.DummyVariable,l=new t.SlackVariable,u=new t.SlackVariable;if(n.terms.each(function(t,e){var i=this.rows.get(t);i?o.addExpression(i,e):o.addVariable(t,e)},this),e.isInequality)t.trace&&t.traceprint("Inequality, adding slack"),++this._slackCounter,s=new t.SlackVariable({value:this._slackCounter,prefix:"s"}),o.setVariable(s,-1),this._markerVars.set(e,s),e.required||(++this._slackCounter,l=new t.SlackVariable({value:this._slackCounter,prefix:"em"}),o.setVariable(l,1),(h=this.rows.get(this._objective)).setVariable(l,e.strength.symbolicWeight.value*e.weight),this.insertErrorVar(e,l),this.noteAddedVariable(l,this._objective));else if(e.required)t.trace&&t.traceprint("Equality, required"),++this._dummyCounter,a=new t.DummyVariable({value:this._dummyCounter,prefix:"d"}),o.setVariable(a,1),this._markerVars.set(e,a),t.trace&&t.traceprint("Adding dummyVar == d"+this._dummyCounter);else{t.trace&&t.traceprint("Equality, not required"),++this._slackCounter,u=new t.SlackVariable({value:this._slackCounter,prefix:"ep"}),l=new t.SlackVariable({value:this._slackCounter,prefix:"em"}),o.setVariable(u,-1),o.setVariable(l,1),this._markerVars.set(e,u);var h=this.rows.get(this._objective);t.trace&&console.log(h);var c=e.strength.symbolicWeight.value*e.weight;0==c&&(t.trace&&t.traceprint("cn == "+e),t.trace&&t.traceprint("adding "+u+" and "+l+" with swCoeff == "+c)),h.setVariable(u,c),this.noteAddedVariable(u,this._objective),h.setVariable(l,c),this.noteAddedVariable(l,this._objective),this.insertErrorVar(e,l),this.insertErrorVar(e,u),e.isStayConstraint?(this._stayPlusErrorVars.push(u),this._stayMinusErrorVars.push(l)):e.isEditConstraint&&(i[0]=u,i[1]=l,r[0]=n.constant)}return 0>o.constant&&o.multiplyMe(-1),t.trace&&t.fnexitprint("returning "+o),o},optimize:function(e){t.trace&&t.fnenterprint("optimize: "+e),t.trace&&t.traceprint(""+this),this._optimizeCount++;var i=this.rows.get(e);t.assert(null!=i,"zRow != null");for(var r,n=null,o=null;;){if(r=0,i.terms.escapingEach(function(t,e){return t.isPivotable&&r>e?(r=e,n=t,{brk:1}):void 0},this),r>=-1e-8)return;t.trace&&console.log("entryVar:",n,"objectiveCoeff:",r);var s=Number.MAX_VALUE,a=this.columns.get(n),l=0;if(a.each(function(e){if(t.trace&&t.traceprint("Checking "+e),e.isPivotable){var i=this.rows.get(e),r=i.coefficientFor(n);t.trace&&t.traceprint("pivotable, coeff = "+r),0>r&&(l=-i.constant/r,(s>l||t.approx(l,s)&&e.hashCode<o.hashCode)&&(s=l,o=e))}},this),s==Number.MAX_VALUE)throw new t.InternalError("Objective function is unbounded in optimize");this.pivot(n,o),t.trace&&t.traceprint(""+this)}},pivot:function(e,i){t.trace&&console.log("pivot: ",e,i);null==e&&console.warn("pivot: entryVar == null"),null==i&&console.warn("pivot: exitVar == null");var r=this.removeRow(i);r.changeSubject(i,e),this.substituteOut(e,r),this.addRow(e,r)},_resetStayConstants:function(){t.trace&&console.log("_resetStayConstants");for(var e=0;this._stayPlusErrorVars.length>e;e++){var i=this.rows.get(this._stayPlusErrorVars[e]);null==i&&(i=this.rows.get(this._stayMinusErrorVars[e])),null!=i&&(i.constant=0)}},_setExternalVariables:function(){t.trace&&t.fnenterprint("_setExternalVariables:"),t.trace&&t.traceprint(""+this),this._externalParametricVars.each(function(e){null!=this.rows.get(e)?t.trace&&console.log("Error: variable"+e+" in _externalParametricVars is basic"):e.value=0},this),this._externalRows.each(function(t){var e=this.rows.get(t);t.value!=e.constant&&(t.value=e.constant)},this),this._fNeedsSolving=!1,this.onsolved()},onsolved:function(){},insertErrorVar:function(e,i){t.trace&&t.fnenterprint("insertErrorVar:"+e+", "+i);var r=this._errorVars.get(i);r||(r=new t.HashSet,this._errorVars.set(e,r)),r.add(i)}})}(this.c||e.parent.exports||{}),function(t){"use strict";t.Timer=t.inherit({initialize:function(){this.isRunning=!1,this._elapsedMs=0},start:function(){return this.isRunning=!0,this._startReading=new Date,this},stop:function(){return this.isRunning=!1,this._elapsedMs+=new Date-this._startReading,this},reset:function(){return this.isRunning=!1,this._elapsedMs=0,this},elapsedTime:function(){return this.isRunning?(this._elapsedMs+(new Date-this._startReading))/1e3:this._elapsedMs/1e3}})}(this.c||e.parent.exports||{}),__cassowary_parser=function(){function t(t){return'"'+t.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\x08/g,"\\b").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\f/g,"\\f").replace(/\r/g,"\\r").replace(/[\x00-\x07\x0B\x0E-\x1F\x80-\uFFFF]/g,escape)+'"'}var e={parse:function(e,i){function r(t){B>q||(q>B&&(B=q,M=[]),M.push(t))}function n(){var t,e,i,r;return i=q,r=q,null!==(t=L())?null!==(e=h())?t=[t,e]:(t=null,q=r):(t=null,q=r),null!==t&&(t=function(t,e){return e}(0,t[0])),null===t&&(q=i),t}function o(){var t;return e.length>q?(t=e.charAt(q),q++):(t=null,0===P&&r("any character")),t}function s(){var t;return/^[a-zA-Z]/.test(e.charAt(q))?(t=e.charAt(q),q++):(t=null,0===P&&r("[a-zA-Z]")),null===t&&(36===e.charCodeAt(q)?(t="$",q++):(t=null,0===P&&r('"$"')),null===t&&(95===e.charCodeAt(q)?(t="_",q++):(t=null,0===P&&r('"_"')))),t}function a(){var t;return P++,/^[\t\x0B\f \xA0\uFEFF]/.test(e.charAt(q))?(t=e.charAt(q),q++):(t=null,0===P&&r("[\\t\\x0B\\f \\xA0\\uFEFF]")),0===--P&&null===t&&r("whitespace"),t}function l(){var t;return/^[\n\r\u2028\u2029]/.test(e.charAt(q))?(t=e.charAt(q),q++):(t=null,0===P&&r("[\\n\\r\\u2028\\u2029]")),t}function u(){var t;return P++,10===e.charCodeAt(q)?(t="\n",q++):(t=null,0===P&&r('"\\n"')),null===t&&("\r\n"===e.substr(q,2)?(t="\r\n",q+=2):(t=null,0===P&&r('"\\r\\n"')),null===t&&(13===e.charCodeAt(q)?(t="\r",q++):(t=null,0===P&&r('"\\r"')),null===t&&(8232===e.charCodeAt(q)?(t="\u2028",q++):(t=null,0===P&&r('"\\u2028"')),null===t&&(8233===e.charCodeAt(q)?(t="\u2029",q++):(t=null,0===P&&r('"\\u2029"')))))),0===--P&&null===t&&r("end of line"),t}function h(){var t,i,n;return n=q,null!==(t=g())?(59===e.charCodeAt(q)?(i=";",q++):(i=null,0===P&&r('";"')),null!==i?t=[t,i]:(t=null,q=n)):(t=null,q=n),null===t&&(n=q,null!==(t=m())?null!==(i=u())?t=[t,i]:(t=null,q=n):(t=null,q=n),null===t&&(n=q,null!==(t=g())?null!==(i=c())?t=[t,i]:(t=null,q=n):(t=null,q=n))),t}function c(){var t,i;return i=q,P++,e.length>q?(t=e.charAt(q),q++):(t=null,0===P&&r("any character")),P--,null===t?t="":(t=null,q=i),t}function p(){var t;return P++,null===(t=d())&&(t=y()),0===--P&&null===t&&r("comment"),t}function d(){var t,i,n,s,a,l,u;if(a=q,"/*"===e.substr(q,2)?(t="/*",q+=2):(t=null,0===P&&r('"/*"')),null!==t){for(i=[],l=q,u=q,P++,"*/"===e.substr(q,2)?(n="*/",q+=2):(n=null,0===P&&r('"*/"')),P--,null===n?n="":(n=null,q=u),null!==n?null!==(s=o())?n=[n,s]:(n=null,q=l):(n=null,q=l);null!==n;)i.push(n),l=q,u=q,P++,"*/"===e.substr(q,2)?(n="*/",q+=2):(n=null,0===P&&r('"*/"')),P--,null===n?n="":(n=null,q=u),null!==n?null!==(s=o())?n=[n,s]:(n=null,q=l):(n=null,q=l);null!==i?("*/"===e.substr(q,2)?(n="*/",q+=2):(n=null,0===P&&r('"*/"')),null!==n?t=[t,i,n]:(t=null,q=a)):(t=null,q=a)}else t=null,q=a;return t}function f(){var t,i,n,s,a,u,h;if(a=q,"/*"===e.substr(q,2)?(t="/*",q+=2):(t=null,0===P&&r('"/*"')),null!==t){for(i=[],u=q,h=q,P++,"*/"===e.substr(q,2)?(n="*/",q+=2):(n=null,0===P&&r('"*/"')),null===n&&(n=l()),P--,null===n?n="":(n=null,q=h),null!==n?null!==(s=o())?n=[n,s]:(n=null,q=u):(n=null,q=u);null!==n;)i.push(n),u=q,h=q,P++,"*/"===e.substr(q,2)?(n="*/",q+=2):(n=null,0===P&&r('"*/"')),null===n&&(n=l()),P--,null===n?n="":(n=null,q=h),null!==n?null!==(s=o())?n=[n,s]:(n=null,q=u):(n=null,q=u);null!==i?("*/"===e.substr(q,2)?(n="*/",q+=2):(n=null,0===P&&r('"*/"')),null!==n?t=[t,i,n]:(t=null,q=a)):(t=null,q=a)}else t=null,q=a;return t}function y(){var t,i,n,s,a,u,h;if(a=q,"//"===e.substr(q,2)?(t="//",q+=2):(t=null,0===P&&r('"//"')),null!==t){for(i=[],u=q,h=q,P++,n=l(),P--,null===n?n="":(n=null,q=h),null!==n?null!==(s=o())?n=[n,s]:(n=null,q=u):(n=null,q=u);null!==n;)i.push(n),u=q,h=q,P++,n=l(),P--,null===n?n="":(n=null,q=h),null!==n?null!==(s=o())?n=[n,s]:(n=null,q=u):(n=null,q=u);null!==i?t=[t,i]:(t=null,q=a)}else t=null,q=a;return t}function m(){var t,e;for(t=[],null===(e=a())&&(null===(e=f())&&(e=y()));null!==e;)t.push(e),null===(e=a())&&(null===(e=f())&&(e=y()));return t}function g(){var t,e;for(t=[],null===(e=a())&&(null===(e=u())&&(e=p()));null!==e;)t.push(e),null===(e=a())&&(null===(e=u())&&(e=p()));return t}function w(){var t,e;return e=q,null===(t=b())&&(t=v()),null!==t&&(t=function(t,e){return{type:"NumericLiteral",value:e}}(0,t)),null===t&&(q=e),t}function v(){var t,i,n;if(n=q,/^[0-9]/.test(e.charAt(q))?(i=e.charAt(q),q++):(i=null,0===P&&r("[0-9]")),null!==i)for(t=[];null!==i;)t.push(i),/^[0-9]/.test(e.charAt(q))?(i=e.charAt(q),q++):(i=null,0===P&&r("[0-9]"));else t=null;return null!==t&&(t=function(t,e){return parseInt(e.join(""))}(0,t)),null===t&&(q=n),t}function b(){var t,i,n,o,s;return o=q,s=q,null!==(t=v())?(46===e.charCodeAt(q)?(i=".",q++):(i=null,0===P&&r('"."')),null!==i?null!==(n=v())?t=[t,i,n]:(t=null,q=s):(t=null,q=s)):(t=null,q=s),null!==t&&(t=function(t,e){return parseFloat(e.join(""))}(0,t)),null===t&&(q=o),t}function A(){var t,e;return P++,e=q,null!==(t=E())&&(t=function(t,e){return e}(0,t)),null===t&&(q=e),0===--P&&null===t&&r("identifier"),t}function E(){var t,e,i,n,o;if(P++,n=q,o=q,null!==(t=s())){for(e=[],i=s();null!==i;)e.push(i),i=s();null!==e?t=[t,e]:(t=null,q=o)}else t=null,q=o;return null!==t&&(t=function(t,e,i){return e+i.join("")}(0,t[0],t[1])),null===t&&(q=n),0===--P&&null===t&&r("identifier"),t}function _(){var t,i,n,o,s,a,l;return a=q,null!==(t=A())&&(t=function(t,e){return{type:"Variable",name:e}}(0,t)),null===t&&(q=a),null===t&&(null===(t=w())&&(a=q,l=q,40===e.charCodeAt(q)?(t="(",q++):(t=null,0===P&&r('"("')),null!==t?null!==(i=g())?null!==(n=L())?null!==(o=g())?(41===e.charCodeAt(q)?(s=")",q++):(s=null,0===P&&r('")"')),null!==s?t=[t,i,n,o,s]:(t=null,q=l)):(t=null,q=l):(t=null,q=l):(t=null,q=l):(t=null,q=l),null!==t&&(t=function(t,e){return e}(0,t[2])),null===t&&(q=a))),t}function x(){var t,e,i,r,n;return null===(t=_())&&(r=q,n=q,null!==(t=S())?null!==(e=g())?null!==(i=x())?t=[t,e,i]:(t=null,q=n):(t=null,q=n):(t=null,q=n),null!==t&&(t=function(t,e,i){return{type:"UnaryExpression",operator:e,expression:i}}(0,t[0],t[2])),null===t&&(q=r)),t}function S(){var t;return 43===e.charCodeAt(q)?(t="+",q++):(t=null,0===P&&r('"+"')),null===t&&(45===e.charCodeAt(q)?(t="-",q++):(t=null,0===P&&r('"-"')),null===t&&(33===e.charCodeAt(q)?(t="!",q++):(t=null,0===P&&r('"!"')))),t}function T(){var t,e,i,r,n,o,s,a,l;if(s=q,a=q,null!==(t=x())){for(e=[],l=q,null!==(i=g())?null!==(r=C())?null!==(n=g())?null!==(o=x())?i=[i,r,n,o]:(i=null,q=l):(i=null,q=l):(i=null,q=l):(i=null,q=l);null!==i;)e.push(i),l=q,null!==(i=g())?null!==(r=C())?null!==(n=g())?null!==(o=x())?i=[i,r,n,o]:(i=null,q=l):(i=null,q=l):(i=null,q=l):(i=null,q=l);null!==e?t=[t,e]:(t=null,q=a)}else t=null,q=a;return null!==t&&(t=function(t,e,i){for(var r=e,n=0;i.length>n;n++)r={type:"MultiplicativeExpression",operator:i[n][1],left:r,right:i[n][3]};return r}(0,t[0],t[1])),null===t&&(q=s),t}function C(){var t;return 42===e.charCodeAt(q)?(t="*",q++):(t=null,0===P&&r('"*"')),null===t&&(47===e.charCodeAt(q)?(t="/",q++):(t=null,0===P&&r('"/"'))),t}function I(){var t,e,i,r,n,o,s,a,l;if(s=q,a=q,null!==(t=T())){for(e=[],l=q,null!==(i=g())?null!==(r=O())?null!==(n=g())?null!==(o=T())?i=[i,r,n,o]:(i=null,q=l):(i=null,q=l):(i=null,q=l):(i=null,q=l);null!==i;)e.push(i),l=q,null!==(i=g())?null!==(r=O())?null!==(n=g())?null!==(o=T())?i=[i,r,n,o]:(i=null,q=l):(i=null,q=l):(i=null,q=l):(i=null,q=l);null!==e?t=[t,e]:(t=null,q=a)}else t=null,q=a;return null!==t&&(t=function(t,e,i){for(var r=e,n=0;i.length>n;n++)r={type:"AdditiveExpression",operator:i[n][1],left:r,right:i[n][3]};return r}(0,t[0],t[1])),null===t&&(q=s),t}function O(){var t;return 43===e.charCodeAt(q)?(t="+",q++):(t=null,0===P&&r('"+"')),null===t&&(45===e.charCodeAt(q)?(t="-",q++):(t=null,0===P&&r('"-"'))),t}function V(){var t,e,i,r,n,o,s,a,l;if(s=q,a=q,null!==(t=I())){for(e=[],l=q,null!==(i=g())?null!==(r=N())?null!==(n=g())?null!==(o=I())?i=[i,r,n,o]:(i=null,q=l):(i=null,q=l):(i=null,q=l):(i=null,q=l);null!==i;)e.push(i),l=q,null!==(i=g())?null!==(r=N())?null!==(n=g())?null!==(o=I())?i=[i,r,n,o]:(i=null,q=l):(i=null,q=l):(i=null,q=l):(i=null,q=l);null!==e?t=[t,e]:(t=null,q=a)}else t=null,q=a;return null!==t&&(t=function(t,e,i){for(var r=e,n=0;i.length>n;n++)r={type:"Inequality",operator:i[n][1],left:r,right:i[n][3]};return r}(0,t[0],t[1])),null===t&&(q=s),t}function N(){var t;return"<="===e.substr(q,2)?(t="<=",q+=2):(t=null,0===P&&r('"<="')),null===t&&(">="===e.substr(q,2)?(t=">=",q+=2):(t=null,0===P&&r('">="')),null===t&&(60===e.charCodeAt(q)?(t="<",q++):(t=null,0===P&&r('"<"')),null===t&&(62===e.charCodeAt(q)?(t=">",q++):(t=null,0===P&&r('">"'))))),t}function L(){var t,i,n,o,s,a,l,u,h;if(l=q,u=q,null!==(t=V())){for(i=[],h=q,null!==(n=g())?("=="===e.substr(q,2)?(o="==",q+=2):(o=null,0===P&&r('"=="')),null!==o?null!==(s=g())?null!==(a=V())?n=[n,o,s,a]:(n=null,q=h):(n=null,q=h):(n=null,q=h)):(n=null,q=h);null!==n;)i.push(n),h=q,null!==(n=g())?("=="===e.substr(q,2)?(o="==",q+=2):(o=null,0===P&&r('"=="')),null!==o?null!==(s=g())?null!==(a=V())?n=[n,o,s,a]:(n=null,q=h):(n=null,q=h):(n=null,q=h)):(n=null,q=h);null!==i?t=[t,i]:(t=null,q=u)}else t=null,q=u;return null!==t&&(t=function(t,e,i){for(var r=e,n=0;i.length>n;n++)r={type:"Equality",operator:i[n][1],left:r,right:i[n][3]};return r}(0,t[0],t[1])),null===t&&(q=l),t}var R={start:function(){var t,e,i,r,o;if(r=q,o=q,null!==(t=g())){if(null!==(i=n()))for(e=[];null!==i;)e.push(i),i=n();else e=null;null!==e?null!==(i=g())?t=[t,e,i]:(t=null,q=o):(t=null,q=o)}else t=null,q=o;return null!==t&&(t=function(t,e){return e}(0,t[1])),null===t&&(q=r),t},Statement:n,SourceCharacter:o,IdentifierStart:s,WhiteSpace:a,LineTerminator:l,LineTerminatorSequence:u,EOS:h,EOF:c,Comment:p,MultiLineComment:d,MultiLineCommentNoLineTerminator:f,SingleLineComment:y,_:m,__:g,Literal:w,Integer:v,Real:b,SignedInteger:function(){var t,i,n,o;if(o=q,/^[\-+]/.test(e.charAt(q))?(t=e.charAt(q),q++):(t=null,0===P&&r("[\\-+]")),null!==(t=null!==t?t:"")){if(/^[0-9]/.test(e.charAt(q))?(n=e.charAt(q),q++):(n=null,0===P&&r("[0-9]")),null!==n)for(i=[];null!==n;)i.push(n),/^[0-9]/.test(e.charAt(q))?(n=e.charAt(q),q++):(n=null,0===P&&r("[0-9]"));else i=null;null!==i?t=[t,i]:(t=null,q=o)}else t=null,q=o;return t},Identifier:A,IdentifierName:E,PrimaryExpression:_,UnaryExpression:x,UnaryOperator:S,MultiplicativeExpression:T,MultiplicativeOperator:C,AdditiveExpression:I,AdditiveOperator:O,InequalityExpression:V,InequalityOperator:N,LinearExpression:L};if(void 0!==i){if(void 0===R[i])throw Error("Invalid rule name: "+t(i)+".")}else i="start";var q=0,P=0,B=0,M=[],F=R[i]();if(null===F||q!==e.length){var k=Math.max(q,B),H=e.length>k?e.charAt(k):null,z=function(){for(var t=1,i=1,r=!1,n=0;Math.max(q,B)>n;n++){var o=e.charAt(n);"\n"===o?(r||t++,i=1,r=!1):"\r"===o||"\u2028"===o||"\u2029"===o?(t++,i=1,r=!0):(i++,r=!1)}return{line:t,column:i}}();throw new this.SyntaxError(function(t){t.sort();for(var e=null,i=[],r=0;t.length>r;r++)t[r]!==e&&(i.push(t[r]),e=t[r]);return i}(M),H,k,z.line,z.column)}return F},toSource:function(){return this._source},SyntaxError:function(e,i,r,n,o){this.name="SyntaxError",this.expected=e,this.found=i,this.message=function(e,i){var r;switch(e.length){case 0:r="end of input";break;case 1:r=e[0];break;default:r=e.slice(0,e.length-1).join(", ")+" or "+e[e.length-1]}return"Expected "+r+" but "+(i?t(i):"end of input")+" found."}(e,i),this.offset=r,this.line=n,this.column=o}};return e.SyntaxError.prototype=Error.prototype,e}()}).call(void 0!==e?e.compiled=e:this)},{}]},{},[1])(1)}),function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e():"function"==typeof define&&define.amd?define(e):e()}(0,function(){"use strict";function t(t){var e=this.constructor;return this.then(function(i){return e.resolve(t()).then(function(){return i})},function(i){return e.resolve(t()).then(function(){return e.reject(i)})})}function e(t){return new this(function(e,i){function r(t,i){if(i&&("object"==typeof i||"function"==typeof i)){var s=i.then;if("function"==typeof s)return void s.call(i,function(e){r(t,e)},function(i){n[t]={status:"rejected",reason:i},0==--o&&e(n)})}n[t]={status:"fulfilled",value:i},0==--o&&e(n)}if(!t||void 0===t.length)return i(new TypeError(typeof t+" "+t+" is not iterable(cannot read property Symbol(Symbol.iterator))"));var n=Array.prototype.slice.call(t);if(0===n.length)return e([]);for(var o=n.length,s=0;n.length>s;s++)r(s,n[s])})}function i(t){return!(!t||void 0===t.length)}function r(){}function n(t){if(!(this instanceof n))throw new TypeError("Promises must be constructed via new");if("function"!=typeof t)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],u(t,this)}function o(t,e){for(;3===t._state;)t=t._value;0!==t._state?(t._handled=!0,n._immediateFn(function(){var i=1===t._state?e.onFulfilled:e.onRejected;if(null!==i){var r;try{r=i(t._value)}catch(t){return void a(e.promise,t)}s(e.promise,r)}else(1===t._state?s:a)(e.promise,t._value)})):t._deferreds.push(e)}function s(t,e){try{if(e===t)throw new TypeError("A promise cannot be resolved with itself.");if(e&&("object"==typeof e||"function"==typeof e)){var i=e.then;if(e instanceof n)return t._state=3,t._value=e,void l(t);if("function"==typeof i)return void u(function(t,e){return function(){t.apply(e,arguments)}}(i,e),t)}t._state=1,t._value=e,l(t)}catch(e){a(t,e)}}function a(t,e){t._state=2,t._value=e,l(t)}function l(t){2===t._state&&0===t._deferreds.length&&n._immediateFn(function(){t._handled||n._unhandledRejectionFn(t._value)});for(var e=0,i=t._deferreds.length;i>e;e++)o(t,t._deferreds[e]);t._deferreds=null}function u(t,e){var i=!1;try{t(function(t){i||(i=!0,s(e,t))},function(t){i||(i=!0,a(e,t))})}catch(t){if(i)return;i=!0,a(e,t)}}var h=setTimeout;n.prototype.catch=function(t){return this.then(null,t)},n.prototype.then=function(t,e){var i=new this.constructor(r);return o(this,new function(t,e,i){this.onFulfilled="function"==typeof t?t:null,this.onRejected="function"==typeof e?e:null,this.promise=i}(t,e,i)),i},n.prototype.finally=t,n.all=function(t){return new n(function(e,r){function n(t,i){try{if(i&&("object"==typeof i||"function"==typeof i)){var a=i.then;if("function"==typeof a)return void a.call(i,function(e){n(t,e)},r)}o[t]=i,0==--s&&e(o)}catch(t){r(t)}}if(!i(t))return r(new TypeError("Promise.all accepts an array"));var o=Array.prototype.slice.call(t);if(0===o.length)return e([]);for(var s=o.length,a=0;o.length>a;a++)n(a,o[a])})},n.allSettled=e,n.resolve=function(t){return t&&"object"==typeof t&&t.constructor===n?t:new n(function(e){e(t)})},n.reject=function(t){return new n(function(e,i){i(t)})},n.race=function(t){return new n(function(e,r){if(!i(t))return r(new TypeError("Promise.race accepts an array"));for(var o=0,s=t.length;s>o;o++)n.resolve(t[o]).then(e,r)})},n._immediateFn="function"==typeof setImmediate&&function(t){setImmediate(t)}||function(t){h(t,0)},n._unhandledRejectionFn=function(t){void 0!==console&&console&&console.warn("Possible Unhandled Promise Rejection:",t)};var c=function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if("undefined"!=typeof global)return global;throw Error("unable to locate global object")}();"function"!=typeof c.Promise?c.Promise=n:(c.Promise.prototype.finally||(c.Promise.prototype.finally=t),c.Promise.allSettled||(c.Promise.allSettled=e))}),function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e(t.WHATWGFetch={})}(this,function(t){"use strict";var e="undefined"!=typeof self&&self||void 0!==e&&e,i="URLSearchParams"in e,r="Symbol"in e&&"iterator"in Symbol,n="FileReader"in e&&"Blob"in e&&function(){try{return new Blob,!0}catch(t){return!1}}(),o="FormData"in e,s="ArrayBuffer"in e;if(s)var a=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],l=ArrayBuffer.isView||function(t){return t&&a.indexOf(Object.prototype.toString.call(t))>-1};function u(t){if("string"!=typeof t&&(t=String(t)),/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(t)||""===t)throw new TypeError("Invalid character in header field name");return t.toLowerCase()}function h(t){return"string"!=typeof t&&(t=String(t)),t}function c(t){var e={next:function(){var e=t.shift();return{done:void 0===e,value:e}}};return r&&(e[Symbol.iterator]=function(){return e}),e}function p(t){this.map={},t instanceof p?t.forEach(function(t,e){this.append(e,t)},this):Array.isArray(t)?t.forEach(function(t){this.append(t[0],t[1])},this):t&&Object.getOwnPropertyNames(t).forEach(function(e){this.append(e,t[e])},this)}function d(t){if(t.bodyUsed)return Promise.reject(new TypeError("Already read"));t.bodyUsed=!0}function f(t){return new Promise(function(e,i){t.onload=function(){e(t.result)},t.onerror=function(){i(t.error)}})}function y(t){var e=new FileReader,i=f(e);return e.readAsArrayBuffer(t),i}function m(t){if(t.slice)return t.slice(0);var e=new Uint8Array(t.byteLength);return e.set(new Uint8Array(t)),e.buffer}function g(){return this.bodyUsed=!1,this._initBody=function(t){var e;this.bodyUsed=this.bodyUsed,this._bodyInit=t,t?"string"==typeof t?this._bodyText=t:n&&Blob.prototype.isPrototypeOf(t)?this._bodyBlob=t:o&&FormData.prototype.isPrototypeOf(t)?this._bodyFormData=t:i&&URLSearchParams.prototype.isPrototypeOf(t)?this._bodyText=t.toString():s&&n&&((e=t)&&DataView.prototype.isPrototypeOf(e))?(this._bodyArrayBuffer=m(t.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):s&&(ArrayBuffer.prototype.isPrototypeOf(t)||l(t))?this._bodyArrayBuffer=m(t):this._bodyText=t=Object.prototype.toString.call(t):this._bodyText="",this.headers.get("content-type")||("string"==typeof t?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):i&&URLSearchParams.prototype.isPrototypeOf(t)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},n&&(this.blob=function(){var t=d(this);if(t)return t;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){if(this._bodyArrayBuffer){var t=d(this);return t||(ArrayBuffer.isView(this._bodyArrayBuffer)?Promise.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset,this._bodyArrayBuffer.byteOffset+this._bodyArrayBuffer.byteLength)):Promise.resolve(this._bodyArrayBuffer))}return this.blob().then(y)}),this.text=function(){var t,e,i,r=d(this);if(r)return r;if(this._bodyBlob)return t=this._bodyBlob,e=new FileReader,i=f(e),e.readAsText(t),i;if(this._bodyArrayBuffer)return Promise.resolve(function(t){for(var e=new Uint8Array(t),i=new Array(e.length),r=0;r<e.length;r++)i[r]=String.fromCharCode(e[r]);return i.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},o&&(this.formData=function(){return this.text().then(b)}),this.json=function(){return this.text().then(JSON.parse)},this}p.prototype.append=function(t,e){t=u(t),e=h(e);var i=this.map[t];this.map[t]=i?i+", "+e:e},p.prototype.delete=function(t){delete this.map[u(t)]},p.prototype.get=function(t){return t=u(t),this.has(t)?this.map[t]:null},p.prototype.has=function(t){return this.map.hasOwnProperty(u(t))},p.prototype.set=function(t,e){this.map[u(t)]=h(e)},p.prototype.forEach=function(t,e){for(var i in this.map)this.map.hasOwnProperty(i)&&t.call(e,this.map[i],i,this)},p.prototype.keys=function(){var t=[];return this.forEach(function(e,i){t.push(i)}),c(t)},p.prototype.values=function(){var t=[];return this.forEach(function(e){t.push(e)}),c(t)},p.prototype.entries=function(){var t=[];return this.forEach(function(e,i){t.push([i,e])}),c(t)},r&&(p.prototype[Symbol.iterator]=p.prototype.entries);var w=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function v(t,e){if(!(this instanceof v))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');var i,r,n=(e=e||{}).body;if(t instanceof v){if(t.bodyUsed)throw new TypeError("Already read");this.url=t.url,this.credentials=t.credentials,e.headers||(this.headers=new p(t.headers)),this.method=t.method,this.mode=t.mode,this.signal=t.signal,n||null==t._bodyInit||(n=t._bodyInit,t.bodyUsed=!0)}else this.url=String(t);if(this.credentials=e.credentials||this.credentials||"same-origin",!e.headers&&this.headers||(this.headers=new p(e.headers)),this.method=(i=e.method||this.method||"GET",r=i.toUpperCase(),w.indexOf(r)>-1?r:i),this.mode=e.mode||this.mode||null,this.signal=e.signal||this.signal,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&n)throw new TypeError("Body not allowed for GET or HEAD requests");if(this._initBody(n),!("GET"!==this.method&&"HEAD"!==this.method||"no-store"!==e.cache&&"no-cache"!==e.cache)){var o=/([?&])_=[^&]*/;if(o.test(this.url))this.url=this.url.replace(o,"$1_="+(new Date).getTime());else{this.url+=(/\?/.test(this.url)?"&":"?")+"_="+(new Date).getTime()}}}function b(t){var e=new FormData;return t.trim().split("&").forEach(function(t){if(t){var i=t.split("="),r=i.shift().replace(/\+/g," "),n=i.join("=").replace(/\+/g," ");e.append(decodeURIComponent(r),decodeURIComponent(n))}}),e}function A(t,e){if(!(this instanceof A))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');e||(e={}),this.type="default",this.status=void 0===e.status?200:e.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in e?e.statusText:"",this.headers=new p(e.headers),this.url=e.url||"",this._initBody(t)}v.prototype.clone=function(){return new v(this,{body:this._bodyInit})},g.call(v.prototype),g.call(A.prototype),A.prototype.clone=function(){return new A(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new p(this.headers),url:this.url})},A.error=function(){var t=new A(null,{status:0,statusText:""});return t.type="error",t};var E=[301,302,303,307,308];A.redirect=function(t,e){if(-1===E.indexOf(e))throw new RangeError("Invalid status code");return new A(null,{status:e,headers:{location:t}})},t.DOMException=e.DOMException;try{new t.DOMException}catch(e){t.DOMException=function(t,e){this.message=t,this.name=e;var i=Error(t);this.stack=i.stack},t.DOMException.prototype=Object.create(Error.prototype),t.DOMException.prototype.constructor=t.DOMException}function _(i,r){return new Promise(function(o,a){var l=new v(i,r);if(l.signal&&l.signal.aborted)return a(new t.DOMException("Aborted","AbortError"));var u=new XMLHttpRequest;function c(){u.abort()}u.onload=function(){var t,e,i={status:u.status,statusText:u.statusText,headers:(t=u.getAllResponseHeaders()||"",e=new p,t.replace(/\r?\n[\t ]+/g," ").split(/\r?\n/).forEach(function(t){var i=t.split(":"),r=i.shift().trim();if(r){var n=i.join(":").trim();e.append(r,n)}}),e)};i.url="responseURL"in u?u.responseURL:i.headers.get("X-Request-URL");var r="response"in u?u.response:u.responseText;setTimeout(function(){o(new A(r,i))},0)},u.onerror=function(){setTimeout(function(){a(new TypeError("Network request failed"))},0)},u.ontimeout=function(){setTimeout(function(){a(new TypeError("Network request failed"))},0)},u.onabort=function(){setTimeout(function(){a(new t.DOMException("Aborted","AbortError"))},0)},u.open(l.method,function(t){try{return""===t&&e.location.href?e.location.href:t}catch(e){return t}}(l.url),!0),"include"===l.credentials?u.withCredentials=!0:"omit"===l.credentials&&(u.withCredentials=!1),"responseType"in u&&(n?u.responseType="blob":s&&l.headers.get("Content-Type")&&-1!==l.headers.get("Content-Type").indexOf("application/octet-stream")&&(u.responseType="arraybuffer")),!r||"object"!=typeof r.headers||r.headers instanceof p?l.headers.forEach(function(t,e){u.setRequestHeader(e,t)}):Object.getOwnPropertyNames(r.headers).forEach(function(t){u.setRequestHeader(t,h(r.headers[t]))}),l.signal&&(l.signal.addEventListener("abort",c),u.onreadystatechange=function(){4===u.readyState&&l.signal.removeEventListener("abort",c)}),u.send(void 0===l._bodyInit?null:l._bodyInit)})}_.polyfill=!0,e.fetch||(e.fetch=_,e.Headers=p,e.Request=v,e.Response=A),t.Headers=p,t.Request=v,t.Response=A,t.fetch=_,Object.defineProperty(t,"__esModule",{value:!0})}),"undefined"!=typeof Map&&Map.prototype.keys&&"undefined"!=typeof Set&&Set.prototype.keys||function(){function t(t,e){if(e==e)return t.indexOf(e);for(i=0,r=t.length;t[i]==t[i]&&++i!==r;);return i}var e,i,r,n,o,s,a={delete:function(i){return!!~(e=t(this.k,i))&&(this.k.splice(e,1),this.v.splice(e,1),--this.size,!0)},get:function(e){return this.v[t(this.k,e)]},set:function(i,r){return~(e=t(this.k,i))||(this.k[e=this.size++]=i),this.v[e]=r,this},has:function(e){return t(this.k,e)>-1},clear:function(){this.k.length=this.v.length=this.size=0},forEach:function(t,e){e&&(t=t.bind(e));for(var i=-1,r=this.size;++i!==r;)t(this.v[i],this.k[i],this)},entries:function(){var t=0,e=this;return{next:function(){return t!==e.size?{value:[e.k[t++],e.v[t]],done:!1}:{done:!0}}}},keys:function(){var t=0,e=this;return{next:function(){return t!==e.size?{value:e.k[t++],done:!1}:{done:!0}}}},values:function(){var t=0,e=this;return{next:function(){return t!==e.size?{value:e.v[t++],done:!1}:{done:!0}}}},toString:function(){return"[object Map]"}};WeakMap=Map=function(e){if(n=this.k=[],o=this.v=[],r=0,null!=e){if(s=Object(e),(i=+s.length)!=i)throw new TypeError("("+(e.toString||s.toString)()+") is not iterable");for(;i--;){if(!(s[i]instanceof Object))throw new TypeError("Iterator value "+s[i]+" is not an entry object");~t(n,s[i][0])||(n[r]=s[i][0],o[r++]=s[i][1])}n.reverse(),o.reverse()}this.size=r},Map.prototype=a,WeakSet=Set=function(e){if(n=this.k=this.v=[],r=0,null!=e){if(s=Object(e),(i=+s.length)!=i)throw new TypeError("("+(e.toString||s.toString)()+") is not iterable");for(;i--;)~t(n,s[i])||(n[r++]=s[i]);n.reverse()}this.size=r},Set.prototype={delete:function(i){return!!~(e=t(this.k,i))&&(this.k.splice(e,1),--this.size,!0)},add:function(i){return~(e=t(this.k,i))||(e=this.size++),this.k[e]=i,this},has:a.has,clear:a.clear,forEach:a.forEach,entries:a.entries,keys:a.keys,values:a.keys,toString:function(){return"[object Set]"}}}();var BuildBridgedWorker=function(t,e,i,r){var n=t.toString().match(/^\s*function\s*\(\s*\)\s*\{(([\s\S](?!\}$))*[\s\S])/)[1],o=[];o.push("var main = {};\n");for(var s=0;s<i.length;s++){"*"===(f=i[s]).charAt(f.length-1)?(f=f.substr(0,f.length-1),i[s]=f,o.push("main."+f+" = function(/* arguments */){\n var args = Array.prototype.slice.call(arguments); var buffers = args.pop(); \n self.postMessage({foo:'"+f+"', args:args},buffers)\n}; \n")):o.push("main."+f+" = function(/* arguments */){\n var args = Array.prototype.slice.call(arguments); \n self.postMessage({foo:'"+f+"', args:args})\n}; \n")}var a=[];for(s=0;s<e.length;s++){f="*"===(f=e[s]).charAt(f.length-1)?f.substr(0,f.length-1):f,a.push(f+": "+f)}o.push("var foos={"+a.join(",")+"};\n"),o.push("self.onmessage = function(e){\n"),o.push("if(e.data.foo in foos) \n  foos[e.data.foo].apply(null, e.data.args); \n else \n throw(new Error('Main thread requested function ' + e.data.foo + '. But it is not available.'));\n"),o.push("\n};\n");var l,u=n+"\n\n/*==== AUTO-GENERATED-CODE ==== */\n\n"+o.join("");try{l=new Blob([u],{type:"text/javascript"})}catch(t){window.BlobBuilder=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder,(l=new BlobBuilder).append(u),l=l.getBlob()}var h=(window.URL?URL:webkitURL).createObjectURL(l),c=new Worker(h);c.onmessage=function(t){var e=i.indexOf(t.data.foo);if(-1===e)throw new Error("Worker requested function "+t.data.foo+". But it is not available.");r[e].apply(null,t.data.args)};var p={blobURL:h},d=function(t,e){return e?function(){var e=Array.prototype.slice.call(arguments),i=e.pop();c.postMessage({foo:t,args:e},i)}:function(){var e=Array.prototype.slice.call(arguments);c.postMessage({foo:t,args:e})}};for(s=0;s<e.length;s++){var f;"*"===(f=e[s]).charAt(f.length-1)?p[f=f.substr(0,f.length-1)]=d(f,!0):p[f]=d(f,!1)}return p};